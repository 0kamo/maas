maas (1.4+bzr1475+dfsg-0ubuntu3) UNRELEASED; urgency=low

  * UNRELEASED

  [ Steve Langasek ]
  * Add missing dependency on iproute to maas-region-controller, for use of
    /sbin/ip in postinst.

  [ Julian Edwards ]
  * debian/maas-dhcp.maas-dhcp-server.upstart:
    - Detect 12.04 as the host OS and install with correct permissions. This
      allows the same packaging to be used in the 12.04 backport.

 -- Julian Edwards <julian.edwards@canonical.com>  Mon, 13 May 2013 12:42:59 +1000

maas (1.3+bzr1455+dfsg-0ubuntu1) raring; urgency=low

  * New upstream bugfix release.
    - Fixes and returns the 'resource_url' with the 'canonical' url for
      a file that is fetched using the API (LP: #1154142)

  [ Andres Rodriguez ]
  * debian/control:
    - Change Conflicts/Replaces for Breaks/Replaces.
    - Conflicts on tftpd-hpa and dnsmasq.
    - Do not pre-depends, but Depends on ${misc:Depends} for 'maas'.

  [ Steve Langasek ]
  * postinst scripts are never called with 'reconfigure' as the script
    argument.  Remove references to this (mythical) invocation.
  * always call 'set -e' from maintainer scripts instead of passing 'sh -e'
    as the interpreter, so that scripts will behave correctly when run via
    'sh -x'.
  * invoke-rc.d is never allowed to not exist - simplify scripts (and make
    them better policy-compliant) by invoking unconditionally.  (The only
    possible exception is in the postrm, where it's *theoretically* possible
    for invoke-rc.d to be missing if the user has completely stripped
    down their system; that's a fairly unreasonable corner case, but we
    might as well be correct if it ever happens.)
  * db_get+db_set is a no-op; don't call db_set to push back a value we just
    got from db_get.
  * Omit superfluous calls to 'exit 0' at the end of each script.
  * Remove maas-cluster-controller prerm script, which called debconf for no
    reason.
  * Don't invoke debconf in the postrm script either, debhelper already does
    this for us.
  * Other miscellaneous maintainer script fixes
  * debian/maas-common.postinst: call adduser and addgroup unconditionally;
    the tools are already designed to DTRT, we don't need to check for the
    user/group existence before calling them nor should we worry about
    calling them only once on first install.
  * debian/maas-common.postrm: delete the maas group, not just the user,
    as the comment in the code implies we should do.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 19 Mar 2013 15:38:22 -0400

maas (1.3+bzr1452+dfsg-0ubuntu1) raring; urgency=low

  * New upstream release.
    - MAAS file storage mechanism is shifting from a single shared
      namespace to a per-user namespace. Operators of the majority
      of MAAS systems will not notice any change. However, operators
      of the most complex installations may find that a new
      "shared-environment" user is created, and that some resources
      are reassigned to it, such as API credentials and SSH public
      keys. This provides a transitional environment that mimics the
      behaviour of a shared namespace.

  [ Raphaël Badin ]
  * debian/control: maas-region-controller depends on bind9utils.
    (LP: #1103195)
  * debian/maas-dns.postinst: Call write_dns_config.
    (LP: #1085865).
  * debian/maas-cluster-controller.postinst: Fix the name of the config
    file (/etc/maas/pserv.yaml and not /etc/maas/pserv.conf)
    (LP: #1083542).
  * debian/extras/99-maas-sudoers: Add 'SETENV:' to sudo rule
    to allow preserving the environment when running
    /usr/sbin/maas-import-pxe-files via sudo.
  * debian/maas-dns.postinst: fix permissions and group ownership of
    file /etc/bind/maas/named.conf.rndc.maas. (LP: #1066935)
  * debian/control: Remove the dependency of maas-cluster-controller
    on rabbitmq-server. (LP: #1072744)
  * debian/extras/99-maas-sudoers: Add sudo rule for script
    /usr/sbin/maas-import-pxe-files.
  * debian/maas-cluster-controller.install: Removed commissioning-user-data
    script.

  [ Julian Edwards ]
  * debian/maas-region-controller.install: Remove installation of maas-gc; it
    is no longer required as upstream no longer stores files in the filesystem.
    (LP: #1069734)
  * debian/maas-cluster-controller.postinst: Ensure that /etc/maas/pserv.yaml
    is updated when reconfiguring. (LP: #1081212)

  [ Jeroen Vermeulen ]
  * debian/maas-cluster-controller.install: Install import scripts.
  * debian/maas-cluster-controller.postinst: Configure tgt (the iSCSI server)
    so the import script can install files to it.
  * debian/maas-cluster-controller.postrm: Clean up tgt config.
  * debian/maas-region-controller.install: Move import scripts out to the
    cluster controller, and drop the maas-import-isos compatibility script.
  * debian/maas-region-controller.postinst: Remove tgt config.
  * debian/maas-region-controller.postrm: Remove tgt config cleanup.
  * Bump code revision to include latest user_data.template fixes.

  [ Gavin Panella ]
  * debian/extras/99-maas: squashfs image download is no longer needed.
  * debian/maas-cluster-controller.install: maas-import-squashfs and its
    configuration file are no longer part of upstream.
  * debian/maas-cluster-controller.install: The maas-import-pxe-files cron
    task is no longer used.
  * debian/maas-cluster-controller.postinst: Remove leading comment
    markers from the 'generator' line in pserv.yaml.

  [ Andres Rodriguez ]
  * debian/control:
    - maas-cluster-controller Conflicts with tftpd-hpa (LP: #1076028)
    - maas-dns: Conflicts with dnsmasq
    - maas-cluster-controller Conflicts/Replaces maas-region-controller as
      import scripts are no longer shipped in the region.
    - debian/control: Depends on distro-info for maas-cluster-controller
      instead of maas-region-controller (LP: #1103194)
  * debian/maas-cluster-controller.config: If URL has been detected,
    add /MAAS if it doesn't contain it. This helps upgrades from versions
    where DEFAULT_MAAS_URL didn't use /MAAS.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Mon, 04 Mar 2013 11:49:44 -0500

maas (0.1+bzr1269+dfsg-0ubuntu1) quantal-proposed; urgency=low

  * New upstream bugfix release
    - Fixes commissioning failing to set memory attribute. (LP: #1064638)
    - Fixes node listing by adding pagination (LP: #1064672)
    - Changes default bind rndc key which breaks initscripts (LP: #1066938)
    - Fixes invalid DNS config once node is enlisted (LP: #1066958)
    - Reference documentation link to correct URL (LP: #1067261)

  [ Andres Rodriguez ]
  * debian/rules: Change upstream branch.

  [ Gavin Panella ]
  * debian/maas-dns.postinst: Remove MAAS-related include lines from named's
    config before adding a new one (LP: #1066929)

  [ Raphael Badin ]
  * debian/extras/maas-region-celeryd: Remove whitespace that affects DNS
    rabbitmq queue. (LP: #1067929)

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 16 Oct 2012 10:31:37 -0400

maas (0.1+bzr1264+dfsg-0ubuntu2) quantal; urgency=low

  * Fix MAAS not working after CD/preseed install (LP: #1065763)
    - debian/extras/maas-region-celeryd: Add wrapper to run celery from
      the upstart job.
    - debian/extras/maas-region-controller.maas-region-celery.upstart: Create
      rabbitmq user if it does not exists.
  * debian/control: Remove unneeded deps on python-txtftp for some binary pkgs.
  * debian/maas-region-controller.postinst: Minor fix referencing variable.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 11 Oct 2012 17:38:08 -0400

maas (0.1+bzr1264+dfsg-0ubuntu1) quantal; urgency=low

  * New upstream release.

  [ Raphaël Badin ]
  * debian/maas-region-controller.postinst: Enable proxy_http module.
  * debian/maas-cluster-controller.postinst: Create /var/lib/maas. (LP: #1065062)

  [ Andres Rodriguez ]
  * Install maas-provision with python-maas-provisioningserver (LP: #1065171):
    - debian/python-maas-provisioningserver.install: Install
    - debian/control: Add Conflicts/Replaces with maas-cluster-controller
      to handle upgrades.
  * debian/patches/04-fix-ipmi-enlistment.patch: Drop. Merged Upstream.
  * debian/control: Depends on maas-region-controller for maas-dns.
  * debian/maas-region-controller.postinst: Set the correct host for
    BROKER_URL (LP: #1065080)
  * Handle creation of user/group in maas-common.
  * debian/maas-region-controller.config: Always source dbconfig scripts.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Wed, 10 Oct 2012 11:17:21 -0400

maas (0.1+bzr1243+dfsg-0ubuntu3) quantal; urgency=low

  * 04-fix-ipmi-enlistment.patch: retry maas-enlist without power parameters
    on failure. This allows enlistment to continue working with Precise
    ephemeral images before the Precise SRU for maas-enlist lands.
    (LP: #1064922).

 -- Robie Basak <robie.basak@canonical.com>  Wed, 10 Oct 2012 13:29:16 +0000

maas (0.1+bzr1243+dfsg-0ubuntu2) quantal; urgency=low

  * debian/patches/99-ipmi-user-too-long.patch: Fix username too long for
    IPMI user created on enlistment (LP: #1064832)

 -- Andres Rodriguez <andreserl@ubuntu.com>  Wed, 10 Oct 2012 01:00:29 -0400

maas (0.1+bzr1243+dfsg-0ubuntu1) quantal; urgency=low

  * New upstream release. (LP: #1064596)
  * debian/patches/99-temporary-fix-constraints.patch: Dropped.
  * debian/control:
    - ${python:Depends} for maas-common.
    - Add missing Depends for python-maas-provisioningserver (LP: #1064542)
  * debian/maas-cluster-controller.postinst: Create /var/log/maas if it
    doesn't exist (LP: #1064539)

 -- Andres Rodriguez <andreserl@ubuntu.com>  Mon, 08 Oct 2012 17:02:56 -0400

maas (0.1+bzr1223+dfsg-0ubuntu1) quantal; urgency=low

  * New upstream release. (LP: #1062518)

  [ Julian Edwards ]
  * Split packaging of 'maas' into maas-{region,cluster}-controller
    - debian/control: Update accordingly.
    - debian/*.install: Move files accordingly
    - debian/*.{postinst,postrm,preinst}: Move files accordingly.
  * Ensure isc-dhcp-server is disabled when installing maas-dhcp.
  * Ensure maas-dns creates the maas user before trying to chown files.
  * Make maas-cluster-controller autoconfigure itself when upgrading from the
    old maas package. (LP: #1059416)
  * Add missing prerm file for maas-cluster-controller so that .pyc files
    are cleaned up. (LP: #1059973)

  [ Raphaël Badin ]
  * Install maas_local_celeryconfig.py in /etc/maas and symlink to
    /usr/share/maas.
  * debian/maas.postinst: Create rabbitmq celery user/vhost.
  * debian/maas.postinst: Update BROKER_URL in maas_local_celeryconfig.py.
  * Use maas_local_celeryconfig_cluster.py as the local celery
    configuration file for the cluster worker.
  * debian/maas-region-controller.maas-region-celery.upstart: Add region
    worker upstart script.
  * Rename cluster worker upstart script into
    maas-cluster-controller.maas-clluster-celery.upstart.
  * maas-cluster-controller.maas-celery.upstart: use "celeryconfig_cluster"
    as the Celery config module.
  * debian/maas-common.install: Install celeryconfig_common.py.
  * debian/maas-cluster-controller.install: Install celeryconfig_cluster.py.
  * debian/maas-region-controller.install: Install celeryconfig.py.
  * Split celery config into cluster and region configs.
  * Add region celeryd upstart config.
  * Define CELERY_CONFIG_MODULE in
    maas-cluster-controller.maas-cluster-celery.upstart

  [ Jeroen Vermeulen ]
  * Make maas_local_celery_config.py non-world readable.
  * Make maas_local_celeryconfig_cluster.py non-world readable.
  * Set root:maas ownership of local cluster config only *after*
    the maas user/group have been created

  [ Andres Rodriguez ]
  * debian/maas.postinst:
    - Always restart apache2.
    - Handle upgrades for new upstream release.
    - Handle upgrades for celery rabbitmq worker.
  * Add binary package to install client tool.
    - debian/extras/maas-cli: Add binary.
    - debian/maas-cli.install: Add. Install maascli and apiclient.
    - debian/control: Add binary package.
  * debian/control:
    - Depends on freeipmi-tools instead of ipmitool.
    - Conflicts/Replaces on maas for python-maas-client.
    - Depends on python-netifaces, python-lxml.
  * Add python-maas-client binary package:
    - debian/python-maas-client.install: Add. Install 'apiclient' python module.
    - debian/control: Add package. python-django-maas and maas-cli now
      Depend on it.
  * debian/rules: Install maas-dhcp-server upstart job.
  * debian/maas.postrm: Remove celery worker rabbitmq user and host.
  * debian/extras/99-maas-sudoers: Add for maas-dhcp-server upstart job
    instead of isc-dhcp-server (LP: #1055951)
  * debian/maas-region-controller.postinst: Cleanup upgrade rules.
  * debian/maas-cluster-controller.postinst: Fix 'local' usage.
  * debian/maas-common.install: Install celeryconfig in appropriate location.
  * debian/maas-cluster-controller.postrm: Add and delete maas user.
  * debian/maas-dhcp.postinst: Stop isc-dhcp-server not isc_dhcp_server.
  * debian/maas-region-controller.postinst:
    - Always update passwords on upgrade. No longer check versioning. (LP: #1060094).
    - Add MAAS server to allowed mirror in squid-deb-proxy
    - Source dbconfig conf file for maas-region-controller on upgrade because
      it writes a new config file and no longer preservers the previous password.
  * debian/maas-cluster-controller.maas-cluster-celery.upstart: Remove set{uid/gid}.
  * debian/maas-region-controller.install: Install maas-import-squashfs
  * Handle removal of non existant files (LP: #1059556):
    - debian/maintscript: Added to handle removal of conffiles.
    - debian/control: Add Pre-depends and bump debhelper version.
  * update po files for the templates.
  * debian/extras/99-maas: Install in usr/share/maas/conf and symlink to the
    appropriate etc dir.
  * debian/maas-cluster-controller.config: Source debconf at the beginning of the
    script. (LP: #1063857)
  * debian/patches/99-temporary-fix-constraints.patch: Fix constraints maaping
    when deploying with juju. Temporary until it gets merged upstream

  [ Robie Basak ]
  * Add maas-cluster-controller dependency on uuid-runtime, needed for uuidgen
    by postinst.

  [ Scott Moser ]
  * debian/maas-dhcp.{install,apparmor,postrm} install apparmor profile into
    /etc/apparmor.d/dhcpd.d (LP: #1049177), and update apparmor profile for
    /usr/sbin/dhcpd on install/remove
  * get the ip address for the dhcp server in config

  [ Diogo Matsubara ]
  * Add initial tests to be run by autotests:
    - debian/control: XS-Testsuite: autopkgtest
    - debian/tests/control: Add
    - debian/tests/maas-package-test: Add
    - tests/maas-integration.py: Add

 -- Andres Rodriguez <andreserl@ubuntu.com>  Mon, 08 Oct 2012 13:10:23 -0400

maas (0.1+bzr971+dfsg-0ubuntu2) quantal; urgency=low

  * debian/extras/99-maas-sudoers: Add missing rule for
    maas-provision. (LP: #1046397)

 -- Andres Rodriguez <andreserl@ubuntu.com>  Wed, 05 Sep 2012 12:36:58 -0400

maas (0.1+bzr971+dfsg-0ubuntu1) quantal; urgency=low

  * New upstream release (LP: #1044367)

  [ Julian Edwards ]
  * Fix 02-pserv-config.patch to handle new default tftp directory 

  [ Andres Rodriguez ]
  * debian/maas.postinst:
    - include '/MAAS' for DEFAULT_MAAS_URL.(LP: #1033956)
    - Update bzr version to safely upgrade.
  * Add maas-dns package that configures DNS in MAAS (LP: #1030860)
  * Remove cobbler related bits
    - debian/maas.postinst: Drop cobbler configuration
    - debian/maas.install: Drop installation of snippets/preseeds.
    - debian/control:
      + Drop Depends on maas-provision. (LP: #975473)
      + Depends on bind9utils.
      + Depends on python-lockfile (LP: #1037400)
      Add necessary Conflicts/Replaces. Add conflicts to tftpd-hpa and dnsmasq.
      Depends on isc-dhcp-server for maas-dhcp, and syslinux-common.
    - debian/extras/maas-provision: Add missing "$@" (LP: #1040462)
    - debian/patches:
      + 02-pserv-config.patch: Updated. Do not patch cobbler related bits.
        patch tftp config to default.
  * maas-dhcp: Re-add to handle initial configuration of MAAS DHCP server.
  * Allow restart of 'isc-dhcp-server' by adding a sudoers file:
    - debian/extras/99-maas-sudoers: Added.
    - debian/maas.install: Install 99-maas-sudoers
  * Minor improvements on dbconfig-common handling:
    - debian/maas.config: Only call dbc_go when scripts present.
    - debian/maas.postrm: Only call dbc_go when config file exists.
  * debian/maas.maas-celery.upstart: Enable Beat and set scheduler db file.
  * debian/maas-dns.postinst: Set correct permissions. (LP: #1042868)
  * debian/maas-dhcp.config:
    - Ask whether we want to enable DHCP (LP: #1044229)
    - Add debconf question for network interfaces
  * debian/maas.prerm: Stop services before removing database (LP: #1044559)

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 02 Aug 2012 09:01:43 -0400

maas (0.1+bzr777+dfsg-0ubuntu1) quantal-proposed; urgency=low

  * New upstream release
  * Only run 'maas' command as root. (LP: #974046)
    - debian/extras/maas: Check id.
    - debian/maas.install: Install in 'sbin'.
  * debian/maas.postinst:
    - restart apache2 after everything gets processed.
    - Update version to handle upgrades.
  * debian/extras/maas-provision: Add wrapper to access 'maasprovisiong'
    command line.
  * debian/patches/99_temporary_fix_path.patch: Dropped. No longer needed.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 17 Jul 2012 08:28:36 -0400

maas (0.1+bzr745+dfsg-0ubuntu2) quantal; urgency=low

  * debian/control: Build-Dep on python-django instead of
    python-django-configglue

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 17 Jul 2012 08:24:25 -0400

maas (0.1+bzr745+dfsg-0ubuntu1) quantal; urgency=low

  * New Upstream Release
  * debian/patches:
    - 99_power_fixes.patch: Dropped. Merged Upstream.
    - 99_enums_js.patch: Dropped. No longer needed.
  * Automatically build enums.js:
    - debian/control: Build-Depends on python-django-configglue
    - debian/rules: Build and install enums.js.
  * debian/maas.postinst: Update version to handle upgrades

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 12 Jul 2012 16:34:11 -0400

maas (0.1+bzr740+dfsg-0ubuntu1) quantal; urgency=low

  * New upstream release
  * debian/control: Depends on python-txtftp.
  * debian/rules: Do not ship python-tx-tftp.
  * debian/maas.postinst: Update version to upgrade successfully.
  * debian/patches:
    - 02-pserv-config.patch: Refreshed.
    - 99_enums_js.patch: Updated.
    - 99_power_fixes.patch: Added temporarily to enable IPMI
    - 99_temporary_fix_path.patch: Added temporarily to not fail when
      importing celeryconfig

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 03 Jul 2012 17:54:49 -0400

maas (0.1+bzr709+dfsg-0ubuntu1) quantal; urgency=low

  * New Upstream release
  * debian/control:
    - Depends on python-celery, python-tempita, libjs-yui3-{full,min},
      libjs-raphael
  * debian/maas.install:
    - Install apiclient, celeryconfig.py, maas-import-pxe-files, preseeds_v2.
    - Update to install various files from chroot, rather tha manually copy
      them from the source.
  * debian/maas.links: symlink celeryconfig.py
  * debian/maas.maas-celery.upstart: Add job.
  * debian/rules:
    - Install celery upstart job.
    - Do not install jslibs as packages are now used.
    - Drop copying of maas_local_settings_sample.py as source now ships
      a maas_local_settings.py
  * debian/patches:
    - 04-maas-http-fix.patch: Drop. Merged upstream.
    - 01-fix-database-settings.patch: Refreshed.
    - 99_enums_js.patch: Added until creation of enum.js / build process
      is fixed.
  * debian/maas.postinst: Update bzr version to correctly handle upgrades.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 03 Jul 2012 17:42:37 -0400

maas (0.1+bzr482+dfsg-0ubuntu1) precise; urgency=low

  * New upstream release (Fixes LP: #981103)
  * debian/maas.postinst:
    - Make sure rabbitmq and postgresql are started on upgrade (LP: #981282)
    - Handle upgrades from any lower than 0.1+bzr462+dfsg-0ubuntu1 to
      correctly re-generate passwords, and not have db sync/migrate issues
      as config has changed upstream.
    - Correctly set Passwords for PSERV, otherwise it won't set new passwords.
  * Allow MAAS_DEFAULT_URL reconfiguration. (LP: #980970)
    - debian/maas.config: Add reconfigure validation to correctly allow it,
      and ask a question.
    - debian/maas.postinst: Reconfigure DEFAULT_MAAS_URL as well as cobbler
      server and next_server for PXE/Provisioning.
    - debian/maas.templates: Add debconf question and update info.
  * Do not lose MAAS_DEFAULT_URL settings on upgrade (LP: #984309)
  * debian/maas.postinst:
    - Set cobbler password in between quotes (LP: #984427)
    - Do not change permissions to maas.log (LP: #980915)
  * no longer use maas-cloudimg2ephemeral, but rather use premade images 
    at http://maas.ubuntu.com

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 17 Apr 2012 23:44:46 -0700

maas (0.1+bzr462+dfsg-0ubuntu1) precise; urgency=low

  * New upstream release (LP: #980240)

  [ Scott Moser ]
  * add dependency on distro-info (LP: #949442)
  * debian/control: add dependency on tgt for ephemeral iscsi environment

  [ Andres Rodriguez ]
  * Make package lintian clean:
    - maas{-dhcp}.lintian-overrides: Add to make lintian clean.
    - debian/control: Add missing dependencies; correct section and desc.
    - debian/maas.postinst: Do not use absolute path for rabbitmqctl.
    - debian/patches: Add headers to all patches.
  * debian/maas-dhcp.postrm: Added to disable dnsmasq in cobbler on removal.
  * debian/maas.config: Do not set a password with pwgen as it is not an
    essential package; allow dbconfig-common to create a password instead by
    creating an empty question. (LP: #977475)
  * Run MAAS, pserv, txlongpoll as non-root user. (LP: #975436)
    - debian/maas.postinst: Create user/group; set correct permissions for
      directories.
    - debian/maas.postrm: Remove user/group; restart apache2.
    - debian/maas.maas-{pserv,txlongpoll}.upstart: Update to run as non-root
      'maas' user.
  * debian/patches/01-fix-database-settings.patch: Remove adding of PSERV_URL.
  * debian/maas.postinst:
    - Handle config file upgrade from versions lower than 0.1+bzr445+dfsg-0ubuntu1,
      by creating new passwords and updating accordingly
    - use local variables in functions.
    - Handle maas tgt configuration for upgrades from 0.1+bzr459+dfsg-0ubuntu1.
  * debian/extras/99-maas: Add squid-deb-proxy file to enable PPAs. (LP: #979383)
  * debian/maas.install: Install missing commissioning-user-data script.

  [ Dave Walker (Daviey) ]
  * debian/patches/02-pserv-config.patch: Refreshed to apply to updated config.

  [ Gavin Panella ]
  * debian/maas.postinst: Update pserv.yaml and maas_local_settings.py to use
    password.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 12 Apr 2012 16:37:53 -0400

maas (0.1+bzr415+dfsg-0ubuntu2) precise; urgency=low

  * debian/maas-dhcp.{config,postinst}:
    - Fix not setting new values on fresh install. (LP: #975321)
    - Fix unsetting domain, otherwise, even if disabled, it will always be set.
  * debian/control: Depends on maas for maas-dhcp.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Fri, 06 Apr 2012 15:30:44 -0400

maas (0.1+bzr415+dfsg-0ubuntu1) precise; urgency=low

  * debian/control: Update package descriptions; Suggests maas-dhcp for maas
    and add a maas-dhcp binary.
  * Add maas-dhcp package to configure a DHCP server.
    - debian/maas-dhcp.config: Add to ask debconf questions about range,
      gateway, and domain.
    - debian/maas-dhcp.postinst: Handle update of config values.
    - debian/maas-dhcp.templates: Debconf questions.
  * debian/po: Update for templates.
  * Add message telling MAAS URL after installation.
    - debian/maas.templates: Add message.
    - debian/maas.postinst: Display message.
  * debian/maas.config: Hide dbconfig-install question.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Wed, 04 Apr 2012 14:47:13 -0400

maas (0.1+bzr400+dfsg-0ubuntu1) precise; urgency=low

  * debian/patches/{02-pserv-config,03-txlongpoll-config}.patch: Refreshed.
  * debian/maas.install: Install maas-gc cronjob.
  * Add apport hook.
    - debian/maas.apport: Add hook.
    - debian/rules: Install with apport.
  * debian/maas.logrotate: Add logrotate for txlongpoll and pserv logs.
  * Create 'var/lib/media/maas/storage' on postinst to have right permissions.
    - debian/maas.dirs: Drop dir creation.
    - debian/maas.postinst: Create dir with correct permissions.
    - debian/maas.postrm: Remove dir on purge.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 03 Apr 2012 14:50:34 -0400

maas (0.1+bzr378+dfsg-0ubuntu1) precise; urgency=low

  * maas.dirs: Create var/lib/maas/media/storage for juju storage.
  * maas.postinst:
    - Give correct permissions to above dir.
    - stop apache2 before db upgrade, and restart after.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 29 Mar 2012 19:28:13 -0400

maas (0.1+bzr363+dfsg-0ubuntu1) precise; urgency=low

  [ Dave Walker (Daviey) ]
  * debian/control: Add openssh-server as a Recommends, and wrap-and-sort. 

  [ Andres Rodriguez ]
  * debian/maas.postinst:
    - Do not start apache with apache2ctl. Use invoke-rc.d instead to not
      fail in the installer.
    - For start of postgresql before creating the DB, otherwise it will
      fail in the installer.
    - Add check of invoke-rc.d for syslog.
    - Add check of invoke-rc.d for rabbitmq-server; Add check for rabbitmqctl
    - Add db_stop, in case invoke-rc.d fails.
  * debian/control: Tight python-django-maas dependency.
  * debian/postrm: Add check for rabbitmqctl.
  * debian/maas.maas-txlongpoll.upstart: Create rabbitmq longpoll user/vhost
    and set permissions if they don't exist. Start on rabbitmq-server-running.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 27 Mar 2012 14:49:56 -0400

maas (0.1+bzr338+dfsg-0ubuntu1) precise; urgency=low

  [ Dave Walker (Daviey) ]
  * d/patches/03-txlongpoll-config.patch: Resolve typo error from prior patch.
    - LP: #961031

  [ Andres Rodriguez ]
  * debian/maas.config: Don't allow reconfigure.
  * debian/maas.postinst: Don't allow reconfigure. Run sync/migrate db on
    all upgrades.

  [ Scott Moser ]
  * add rsylog config for logging node boots (LP: 960149)

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 22 Mar 2012 10:56:58 -0400

maas (0.1+bzr315+dfsg-0ubuntu1) precise; urgency=low

  * New upstream snapshot.

  [ Dave Walker ]
  * debian/maas.postinst: Do not import ISO's at install time.
  * debian/control: 
    - Drop run-one, it's not a requirement and currently in universe.
    - Drop python-setproctitle, no longer required.

  [ Andres Rodriguez ]
  * debian/control: Depends on python-avahi, python-dbus, and avahi-daemon.
  * debian/maas.postinst:
    - Only syncdb if dbconfig db creation was selected.
    - Set rabbitmq/longpoll settings
  * debian/patches/03-txlongpoll-config.patch: Updated broker settings for
    rabbitmq.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 20 Mar 2012 20:10:58 -0400

maas (0.1+bzr300+dfsg-0ubuntu1) precise; urgency=low

  * debian/patches:
    - 01-fix-database-settings.patch: Update PSERV_URL port.
    - 02-pserv-config.patch: Update, and set 'maas' as username.
    - 03-longpoll-config.patch: Update.
  * debian/maas.install: Install preseeds and snippets.
  * debian/maas.postinst: 
    - Set password for 'maas' cobbler username (in pserv and cobbler).
    - Set DEFAULT_MAAS_URL to IP of interface with default gateway.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Fri, 16 Mar 2012 14:59:16 -0400

maas (0.1+bzr295+dfsg-0ubuntu2) precise; urgency=low

  * debian/patches:
    - 01-fix-database-settings.patch: Update to set PSERV_URL.
    - 02-pserv-config.patch: Set port to 8001.
  * debian/maas.postinst: Run maas-import-isos on install.
  * debian/control: Depends on rabbitmq-server.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 15 Mar 2012 18:14:08 -0400

maas (0.1+bzr295+dfsg-0ubuntu1) precise; urgency=low

  * debian/maas.upstart: Specify pidfile and conffile.
  * debian/maas.postinst:
    - Only run syncdb if dbconfig postinst file exists.
    - Fix file permissions.
  * debian/maas.{postrm,prerm}: Add dbconfig-common support.
  * Add txlongpoll support for packaging:
    - debian/control: Depends on python-txlongpoll.
    - debian/maas.maas-longpoll.upstart: Added to start txlongpoll.
    - debian/maas.install: Install txlongpoll.yaml
  * debian/extras/maas: Improvements.
  * debian/maas.maas.upstart: Moved from debian/maas.upstart.
  * debian/maas.postinst: Touch logfile to set correct permissions (LP: #955400)
  * debian/maas.logrotate: Add.
  * debian/patches/03-txlongpoll-config.patch: Add default settings.
  * debian/maas.config: Only run dbconfig-common on configure/reconfigure.
  * Install maas_local_settings.py in /etc/maas and symlink to usr/share/maas
  * Update references from MaaS to MAAS.
  * Remove podebconf as templates no longer exist.
    - debian/po: Remove.
    - debian/control: Drop Build-Depends on po-debconf

 -- Andres Rodriguez <andreserl@ubuntu.com>  Thu, 15 Mar 2012 15:28:14 -0400

maas (0.1+bzr266+dfsg-0ubuntu1) precise; urgency=low

  * Remove support for squid3 and use squid-deb-proxy instead.
  * debian/extras/maas: Add to handle syncdb and creation of admin user.
  * Add debconf questions to ask for user/pass:
    - debian/maas.{template,config}: Add
    - debian/maas.postinst: Ask debconf questions.
    - debian/po: Add translation templates.i
  * debian/maas.postinst: Enable wsgi module; drop squid3 steps.
  * debian/maas.postrm: removed.
  * debian/patches/01-fix-database-settings.patch: Custom database settings
    and static files path.
  * debian/{rules,maas.install}: Install maas static files in
    'usr/share/maas/web/static'.
  * Integrate cobbler:
    - debian/maas.install: Install pserv twisted plugin, and config.
    - debian/maas.upstart: Created to start plugin daemon.
    - debian/patches/02-pserv-config.patch: Custom pserv config.
  * Integrate dbconfig-common:
    - debian/maas.config: Added and default user/pass and database.
    - debian/maas.{postinst,postrm}: Added handling for dbconfig-common
  * debian/control: Depends on python-convoy.
  * debian/rules: Update path to removal of dsfg files.
  * debian/patches/01-fix-database-settings.patch: Updated.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Tue, 13 Mar 2012 14:31:50 -0400

maas (0.1+bzr232+dfsg-0ubuntu1) precise; urgency=low

  * New upstream snapshot.

  [ Dave Walker ]
  * debian/control:
    - Changed depends from psycopg2 to python-psycopg2 and dropped versioning.
      - LP: #937982 

  [ Andres Rodriguez ]
  * debian/maas.install: Install maas-import-isos and related files.
  * Integrate squid3 as proxy solution:
    - debian/extras/squid.conf: Added
    - debian/control: Depend on squid3.
    - debian/maas.{postinst,postrm}: Handle installation/removal of custom
      squid config file.
  * Split into different binary packages (maas,python-django-maas).
    - debian/maas.postinst: Handle the apache2 configuration.

 -- Andres Rodriguez <andreserl@ubuntu.com>  Wed, 07 Mar 2012 12:46:17 -0500

maas (0.1+bzr171+dfsg-0ubuntu1) precise; urgency=low

  * New upstream snapshot, post 0.1 release.
  * debian/control: 
    - Drop depends on rabbitmq-server, no longer required.
  * debian/watch: Introduced watch file.

 -- Dave Walker (Daviey) <DaveWalker@ubuntu.com>  Thu, 23 Feb 2012 13:08:12 +0000

maas (0.1~bzr146+dfsg-0ubuntu1) precise; urgency=low

  * Initial release

 -- Julian Edwards <julian.edwards@canonical.com>  Thu, 16 Jan 2012 15:29:07 +0000
