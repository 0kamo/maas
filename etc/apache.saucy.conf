PidFile run/apache.pid

# Avoid distracting warnings in the logs.
ServerName maas.dev

# An MPM must be selected.
Include /etc/apache2/mods-available/mpm_event.load
Include /etc/apache2/mods-available/mpm_event.conf
# authz_core is required for correct operation.
Include /etc/apache2/mods-available/authz_core.load
Include /etc/apache2/mods-available/proxy.load
Include /etc/apache2/mods-available/proxy_http.load
Include /etc/apache2/mods-available/alias.load
Include /etc/apache2/mods-available/alias.conf

# The development server listens for http on port 5240, on all interfaces,
# for both IPv4 and IPv6.
Listen 5240

ErrorLog /dev/stderr
LogFormat "%h %l %u %t \"%r\" %>s %O" common
CustomLog /dev/stdout common

# Serve static files here.
<IfModule alias_module>
    Alias /MAAS/static/ src/maasserver/static/
</IfModule>

# Proxy to maas-regiond.
<IfModule proxy_module>
    ProxyPreserveHost on
    ProxyPass /MAAS/static/ !
    ProxyPass /MAAS/ http://localhost:5243/MAAS/ retry=1
</IfModule>
