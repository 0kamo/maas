<header class="page-header margin-bottom" data-maas-sticky-header>
    <div class="inner-wrapper">
        <h1 class="page-header__title twelve-col">{$ fabric.name $}</h1>
        <div data-ng-hide="loaded">
            <div class="inner-wrapper">
                <h1 class="page-header__title twelve-col">Loading...</h1>
            </div>
        </div>
        <div class="page-header__actions ng-hide" data-ng-show="isSuperUser() && !isDefaultFabric() && !loading">
            <div class="right no-margin-bottom last-col">
                <button class="cta-ubuntu"
                    data-ng-click="deleteButton()"
                    data-ng-hide="confirmingDelete">Delete fabric</button>
            </div>
        </div>
        <div class="page-header__dropdown ng-hide" data-ng-show="confirmingDelete">
            <div class="page-header__feedback ng-hide" data-ng-hide="canBeDeleted()">
                <p class="page-header__feedback-message error">
                    Fabric cannot be deleted because it is the default fabric.
                </p>
                <div class="right">
                    <a href="" class="margin-right" data-ng-click="cancelDeleteButton()">Cancel</a>
                </div>
            </div>
            <div class="page-header__feedback ng-hide" data-ng-show="canBeDeleted() && !error">
                <p class="page-header__feedback-message error">
                    Are you sure you want to delete this fabric?
                </p>
                <div class="right">
                    <a href="" class="margin-right" data-ng-click="cancelDeleteButton()">Cancel</a>
                    <button class="cta-ubuntu" data-ng-click="deleteConfirmButton()">Go</button>
                </div>
            </div>
            <div class="page-header__feedback ng-hide" data-ng-show="canBeDeleted() && error">
                <p class="page-header__feedback-message error">
                    {$ error $}
                </p>
                <div class="right">
                    <a href="" class="margin-right" data-ng-click="cancelDeleteButton()">Cancel</a>
                    <button class="cta-ubuntu" data-ng-click="deleteConfirmButton()">Retry</button>
                </div>
            </div>
        </div>
    </div>
</header>
<div data-ng-show="!loading">
    <section class="row">
        <div class="inner-wrapper">
            <div class="twelve-col">
                <h2>Fabric summary</h2>
            </div>
            <maas-obj-form obj="fabric" manager="fabricManager">
                <fieldset class="six-col">
                    <maas-obj-field type="text" key="name" label="Name" placeholder="Fabric name"
                        label-width="two" input-width="three" blur-on-enter="true"></maas-obj-field>
                    <maas-obj-field type="textarea" key="description" label="Description" placeholder="Fabric description"
                        label-width="two" input-width="three" blur-on-enter="true"></maas-obj-field>
                </fieldset>
                <fieldset class="six-col last-col">
                    <dl>
                        <dt class="two-col">Rack controllers</dt>
                        <dd class="four-col last-col">
                            <span class="margin-right--ten" data-ng-repeat="rack in racks | orderBy:'hostname' track by rack.system_id">
                                <a href="#/node/controller/{$ rack.system_id $}" class="link--alt">{$ rack.hostname $}</a>
                            </span>
                        </dd>
                    </dl>
                </fieldset>
            </maas-obj-form>
        </div>
    </section>
    <section class="row">
        <div class="inner-wrapper">
            <div class="twelve-col">
                <h2>VLANs on this fabric</h2>
            </div>
            <div class="twelve-col">
                <table>
                    <thead>
                        <tr>
                            <th class="table__header table__column--15" data-ng-click="predicate='vlan_name'; reverse = !reverse"
                                 data-ng-class="{sort: predicate === 'vlan_name', 'sort-asc': reverse === false, 'sort-desc': reverse === true}">VLAN</th>
                            <th class="table__header table__column--50" data-ng-click="predicate='subnet_name'; reverse = !reverse"
                                 data-ng-class="{sort: predicate === 'subnet_name', 'sort-asc': reverse === false, 'sort-desc': reverse === true}">Subnet</th>
                            <th class="table__header table__column--10" data-ng-click="predicate='subnet.statistics.available_string'; reverse = !reverse"
                                 data-ng-class="{sort: predicate === 'subnet.statistics.available_string', 'sort-asc': reverse === false, 'sort-desc': reverse === true}">Available</th>
                            <th class="table__header table__column--25" data-ng-click="predicate='space_name'; reverse = !reverse"
                                 data-ng-class="{sort: predicate === 'space_name', 'sort-asc': reverse === false, 'sort-desc': reverse === true}">Space</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table__row table__row--no-hover" data-ng-repeat="row in rows | orderBy:predicate:reverse track by $index">
                            <td class="table__column--15">
                                <a href="#/vlan/{$ row.vlan.id $}">{$ row.vlan_name $}</a>
                            </td>
                            <td class="table__column--50">
                                <a href="#/subnet/{$ row.subnet.id $}">{$ row.subnet_name $}</a>
                            </td>
                            <td class="table__column--10">{$ row.subnet.statistics.available_string $}</td>
                            <td class="table__column--25">
                                <a href="#/space/{$ row.space.id $}">{$ row.space_name $}</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</div>
