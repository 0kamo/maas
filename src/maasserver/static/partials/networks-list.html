<header class="page-header margin-bottom" data-maas-sticky-header>
    <div class="inner-wrapper">
        <h1 class="page-header__title eight-col">
            Networks
            <span class="page-header__title--identicator" id="bulk-actions">
                <span class="power-status--power" data-ng-show="loading">
                    <span class="loader"></span>
                    Loading...
                </span>
            </span>
        </h1>
        <!-- Drop-down box -->
        <div class="page-header__actions" data-ng-show="actionOptions.length">
            <div class="page-header__cta">
                 <div class="right cta-group">
                    <div data-maas-cta="actionOptions"
                         data-default-title="Add"
                         data-ng-model="actionOption"
                         data-ng-change="actionOptionChanged()">
                    </div>
                </div>
            </div>
        </div>
        <!-- Forms -->
        <div data-ng-repeat="option in actionOptions">
            <div class="clearfix margin-bottom" data-ng-if="actionOption.name === option.name">
                <div class="page-header__dropdown border">
                    <h3 class="padding-top--ten">{$ actionOption.selectedTitle $}</h3>
                    <form class="twelve-col padding-top--ten margin-bottom">
                        <div class="inline six-col {$ $odd ? 'last-col' : '' $}"
                             data-maas-model-field="item"
                             data-maas-label-class="two-col"
                             data-maas-select-class="three-col {$ $odd ? 'last-col' : '' $}"
                             data-maas-input-text-class="three-col {$ $odd ? 'last-col' : '' $}"
                             data-ng-repeat="item in option.form.items"></div>
                    </form>
                    <div class="page-header__feedback twelve-col no-margin-bottom no-padding-bottom">
                        <div data-ng-if="!option.error">
                            <div class="right">
                                <button class="cta-ubuntu text-button"
                                        data-ng-disabled="requesting"
                                        data-ng-click="cancelAction(option)">Cancel</button>
                                <button class="cta-ubuntu"
                                        data-ng-disabled="requesting"
                                        data-ng-click="submitAction(option)">
                                    {$ option.form.submit ? option.form.submit : "Go" $}
                                </button>
                            </div>
                        </div>
                        <div data-ng-if="option.error">
                            <div class="twelve-col">
                                <p class="page-header__feedback-message info">{$ option.error $}</p>
                            </div>
                            <div class="right align-right">
                                <button class="cta-ubuntu text-button"
                                        data-ng-disabled="requesting"
                                        data-ng-click="cancelAction(option)">Cancel</button>
                                <button class="cta-ubuntu"
                                        data-ng-disabled="requesting"
                                        data-ng-click="submitAction(option)">Retry</button>
                            </div>
                        </div>
                    </div>
                </div>
           </div>
        </div>
        <!--
        <div class="page-header__dropdown border ng-hide" data-ng-if="actionOption.name === 'merge_fabrics'">
            <form class="form-inline tweleve-col padding-top--ten padding-bottom--ten">
                <div class="form__group">
                    <label for="merge-fabric">Merge selected fabrics into</label>
                    <select name="merge-fabric" id="merge-fabric">
                        <option value="1">fabric-1</option>
                        <option value="2">fabric-2</option>
                        <option value="3">fabric-3</option>
                    </select>
                    <div class="right">
                        <button class="cta-ubuntu text-button">Cancel</button>
                        <button class="cta-ubuntu">Merge fabrics</button>
                    </div>
                </div>
            </form>
        </div>
        -->
    </div>
</header>
<section class="row no-padding-top">
    <div class="inner-wrapper">
        <div class="tweleve-col">
            <form class="form form--inline four-col">
                <div class="form__group listing-filter">
                    <label class="listing-filter__label margin-right--ten" for="network-filter">Group by</label>
                    <select name="network-filter" class="listing-filter__select" id="networks-groupby" data-ng-model="groupBy" data-ng-change="updateGroupBy()">
                        <option value="fabric" selected="selected">Fabric</option>
                        <option value="space">Space</option>
                    </select>
                </div>
            </form>
            <!-- XXX mpontillo temporarily hidden -->
            <div class="eight-col last-col ng-hide">
                <div class="search">
                  <input placeholder="Search" class="search__input" type="search">
                  <input class="search__submit" type="submit">
              </div>
            </div>
        </div>
        <div class="tweleve-col ng-hide" data-ng-show="!loading">
            <!-- Spaces grouped table -->
            <table class="table-listing ng-hide" data-ng-show="groupBy === 'space'">
                <thead>
                    <tr class="table-listing__row">
                        <th class="table__column--3 ng-hide">
                            <input class="checkbox" type="checkbox" id="spaces-all" />
                            <label class="checkbox-label" for="spaces-all"></label>
                        </th>
                        <th class="table__column--20">Space</th>
                        <th class="table__column--30">Subnet</th>
                        <th class="table__column--13 align-right">Available IPs</th>
                        <th class="table__column--20">VLAN</th>
                        <th class="table__column--20">Fabric</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="table-listing__row" data-ng-repeat="row in group.spaces.rows">
                        <td class="table-listing__cell table__column--3 ng-hide">
                            <div data-ng-if="row.space_name">
                                <input class="checkbox" type="checkbox" id="space-{$ row.space.id $}" />
                                <label class="checkbox-label" for="space-{$ row.space.id $}"></label>
                            </div>
                        </td>
                        <td class="table-listing__cell table__column--20">
                            <a href="#/space/{$ row.space.id $}">{$ row.space_name $}</a>
                        </td>
                        <td class="table-listing__cell table__column--30">
                            <a href="#/subnet/{$ row.subnet.id $}">{$ row.subnet_name $}</a>
                        </td>
                        <td class="table-listing__cell table__column--13 align-right">
                            {$ row.subnet.statistics.available_string $}
                        </td>
                        <td class="table-listing__cell table__column--20">
                            <a href="#/vlan/{$ row.vlan.id $}">{$ row.vlan_name $}</a>
                        </td>
                        <td class="table-listing__cell table__column--20">
                            <a href="#/fabric/{$ row.fabric.id $}">{$ row.fabric.name $}</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- Fabric grouped table -->
            <table class="table-listing ng-hide" data-ng-show="groupBy === 'fabric'">
                <thead>
                    <tr class="table-listing__row">
                        <th class="table__column--3 ng-hide">
                            <input class="checkbox" type="checkbox" id="fabrics-all" />
                            <label class="checkbox-label" for="fabrics-all"></label>
                        </th>
                        <th class="table__column--15">Fabric</th>
                        <th class="table__column--15">VLAN</th>
                        <th class="table__column--27">Subnet</th>
                        <th class="table__column--15 align-right">Available IPs</th>
                        <th class="table__column--25">Space</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="table-listing__row" data-ng-repeat="row in group.fabrics.rows">
                        <td class="table-listing__cell table__column--3 ng-hide">
                            <div data-ng-if="row.fabric_name">
                                <input class="checkbox" type="checkbox" id="fabric-{$ row.fabric.id $}" />
                                <label class="checkbox-label" for="fabric-{$ row.fabric.id $}"></label>
                            </div>
                        </td>
                        <td class="table-listing__cell table__column--15">
                            <a href="#/fabric/{$ row.fabric.id $}">{$ row.fabric_name $}</a>
                        </td>
                        <td class="table-listing__cell table__column--15">
                            <a href="#/vlan/{$ row.vlan.id $}">{$ row.vlan_name $}</a>
                        </td>
                        <td class="table-listing__cell table__column--27">
                            <a href="#/subnet/{$ row.subnet.id $}">{$ row.subnet_name $}</a>
                        </td>
                        <td class="table-listing__cell table__column--15 align-right">
                            {$ row.subnet.statistics.available_string $}
                        </td>
                        <td class="table-listing__cell table__column--25">
                            <a href="#/space/{$ row.space.id $}">{$ row.space.name $}</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>
