<div class="row" data-ng-if="!loaded">
    <div class="col-12">
        <p><i class="p-icon--spinner u-animation--spin"></i> Loading...</p>
    </div>
</div>
<form data-ng-if="loaded">
    <div class="row" data-ng-if="
                !isDevice && ((!isController && isAllNetworkingDisabled() && isSuperUser()) ||
                !node.on_network || (!isController && !isUbuntuOS()))">
        <div class="col-12">
            <div class="p-notification--negative" data-ng-if="!node.on_network">
                <p class="p-notification__response">
                    <span class="p-notification__status">Error:</span> Node must be connected to a network.</p>
            </div>
            <div class="p-notification" data-ng-if="!isController && isAllNetworkingDisabled() && isSuperUser()">
                <p class="p-notification__response">Interface
                    configuration cannot be modified unless the
                    node is New, Ready, Allocated, or Broken.</p>
            </div>
            <div class="p-notification--warning" data-ng-if="!isController && isCustomOS()">
                <p class="p-notification__response">
                    <span class="p-notification__status">Important:</span> Custom images may require special preparation to support custom network configuration.
                </p>
            </div>
        </div>
    </div>
    <div class="row">
        <table class="p-table-expanding">
            <thead>
                <tr data-ng-if="isDevice">
                    <th class="table-col--30">MAC</th>
                    <th class="table-col--25">Subnet</th>
                    <th class="table-col--25">IP Address</th>
                    <th class="table-col--15"><div class="u-align--right">Actions</div></th>
                </tr>

                <tr data-ng-if="!isDevice">
                    <th class="table-col--16">
                        <a data-ng-class="{ 'p-link--strong': tableInfo.column == 'name' }"
                            data-ng-click="tableInfo.column = 'name'">
                            Name
                        </a>
                        <span> | </span>
                        <a data-ng-class="{ 'p-link--strong': tableInfo.column == 'mac' }"
                            data-ng-click="tableInfo.column = 'mac'">
                            MAC
                        </a>
                    </th>
                    <th class="table-col--7"><div data-ng-if="!isController" class="u-align--center">PXE</div></th>
                    <th class="table-col--9">Type</th>
                    <th class="table-col--13">Fabric</th>
                    <th class="table-col--13">VLAN</th>
                    <th class="table-col--13">Subnet</th>
                    <th class="table-col--19">IP Address</th>
                    <th class="table-col--10"><div class="u-align--right">Actions</div></th>
                </tr>
            </thead>
            <tbody data-selected-rows>
                <tr data-ng-if="isDevice" data-ng-class="{ disabled: isDisabled(), 'is-active': isInterfaceSelected(interface) && (!isAllNetworkingDisabled() || isLimitedEditingAllowed(interface)), noEdit: cannotEditInterface(interface) }" data-ng-repeat="interface in interfaces | removeInterfaceParents:newBondInterface:isAllNetworkingDisabled() | removeInterfaceParents:newBridgeInterface:isAllNetworkingDisabled()">
                    <td class="table-col--30">{$ interface.mac_address $}</td>
                    <td class="table-col--25" aria-label="Subnet">
                        <span data-ng-if="!isEditing(interface) && (interface.subnet || (interface.fabric && !interface.discovered[0].subnet_id))">{$ getSubnetText(interface.subnet) $}</span>
                        <span data-ng-if="isAllNetworkingDisabled() && interface.discovered[0].subnet_id" title="{$ getSubnetText(getSubnet(interface.discovered[0].subnet_id)) $}">
                            {$ getSubnetText(getSubnet(interface.discovered[0].subnet_id)) $}
                        </span>
                    </td>
                    <td class="table-col--25" aria-label="IP Address">{$ interface.ip_address $}</td>
                    <td class="table-col--15 p-table--action-cell">
                        <div class="u-align--right">
                            <div class="p-contextual-menu" toggle-ctrl data-ng-if="!isAllNetworkingDisabled() || isLimitedEditingAllowed(interface)">
                                <button class="p-button--base is-small p-contextual-menu__toggle" data-ng-click="toggleMenu()"><i class="p-icon--contextual-menu u-no-margin--right">Actions</i></button>
                                <div class="p-contextual-menu__dropdown" role="menu" data-ng-show="isToggled">
                                    <button class="p-contextual-menu__link"
                                        data-ng-if="!cannotEditInterface(interface)"
                                        aria-label="Edit"
                                        data-ng-click="toggleMenu(); edit(interface)">Edit {$ getInterfaceTypeText(interface) $}</button>
                                    <button class="p-contextual-menu__link"
                                        data-ng-if="canBeRemoved()"
                                        aria-label="Remove"
                                        data-ng-click="toggleMenu(); quickRemove(interface)">Remove {$ getInterfaceTypeText(interface) $}&hellip;</button>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="p-table-expanding__panel col-12" data-ng-if="isShowingMembers(interface)">
                        <div class="row" data-ng-class="{ 'is-active': isShowingMembers(interface) }"
                            data-ng-repeat="member in interface.members"
                            data-ng-show="isShowingMembers(interface)">
                            <div class="col-1"></div>
                            <div class="col-2" data-ng-show="tableInfo.column == 'name'">{$ member.name $}</div>
                            <div class="col-2 ng-hide"data-ng-show="tableInfo.column == 'mac'">{$ member.mac_address $}</div>
                            <div class="col-2">{$ getInterfaceTypeText(member) $}</div>
                            <div class="col-7"></div>
                        </div>
                    </td>
                    <td class="p-table-expanding__panel col-12"  data-ng-if="isInterfaceSelected(interface)">
                        <div class="row" data-ng-if="isShowingAdd() || isEditing(interface) || isShowingDeleteConfirm() || isShowingAdd() && !newInterface.saving">
                            <div class="table__dropdown-title" data-ng-if="windowWidth <= 768">
                                <h2 data-ng-click="cancel()" class="u-float--left p-heading--four">
                                    <span data-ng-if="canAddAlias(newInterface.parent)">Adding alias</span>
                                    <span data-ng-if="canAddVLAN(newInterface.parent)">Adding VLAN</span>
                                    <span data-ng-if="isEditing(interface)">Editing {$ interface.name $}</span>
                                    <span data-ng-if="isShowingDeleteConfirm()">Removing {$ interface.name $}</span>
                                </h2>
                                <button data-ng-click="cancel()" class="p-button u-float--right">
                                    <i class="p-icon--remove">Cancel</i>
                                </button>
                            </div>
                            <div class="p-form p-form--stacked" data-ng-class="{ 'is-active': isEditing(interface) || isShowingAdd() }">
                                <div class="row" data-ng-if="isShowingAdd()">
                                    <div class="col-6">
                                        <div class="p-form__group">
                                            <label class="p-form__label">Name</label>
                                            <div class="p-form__control">
                                                <span class="col-4">{$ getAddName() $}</span>
                                            </div>
                                        </div>
                                        <div class="p-form__group">
                                            <label for="type" class="p-form__label">Type</label>
                                            <div class="p-form__control">
                                                <select name="type" data-ng-model="newInterface.type" data-ng-change="addTypeChanged()">
                                                    <option value="alias" data-ng-show="canAddAlias(newInterface.parent)">Alias</option>
                                                    <option value="vlan" data-ng-show="canAddVLAN(newInterface.parent)">VLAN</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.type !== 'alias'">
                                            <label class="p-form__label">Tags</label>
                                            <div class="p-form__control tags--inline">
                                                <tags-input data-ng-model="newInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="p-form__group">
                                            <label for="fabric" class="p-form__label">Fabric</label>
                                            <div class="p-form__control">
                                                <select name="fabric"
                                                    data-ng-model="newInterface.parent.fabric"
                                                    data-ng-options="fabric as fabric.name for fabric in fabrics"
                                                    disabled="disabled">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.type === 'alias'">
                                            <label for="vlan" class="p-form__label">VLAN</label>
                                            <div class="p-form__control">
                                                <select name="vlan"
                                                    data-ng-model="newInterface.vlan"
                                                    data-ng-options="vlan as getVLANText(vlan) for vlan in vlans"
                                                    disabled="disabled">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.type === 'vlan'">
                                            <label for="vlan" class="p-form__label">VLAN</label>
                                            <div class="p-form__control">
                                                <select name="vlan"
                                                    data-ng-model="newInterface.vlan"
                                                    data-ng-change="vlanChanged(newInterface)"
                                                    data-ng-options="vlan as getVLANText(vlan) for vlan in vlans | removeDefaultVLAN | filterByFabric:newInterface.parent.fabric | filterByUnusedForInterface:newInterface.parent:originalInterfaces">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group">
                                            <label for="subnet" class="p-form__label">Subnet</label>
                                            <div class="p-form__control">
                                                <select name="subnet"
                                                    data-ng-model="newInterface.subnet"
                                                    data-ng-change="subnetChanged(newInterface)"
                                                    data-ng-options="subnet as getSubnetText(subnet) for subnet in subnets | filterByVLAN:newInterface.vlan">
                                                    <option value="" data-ng-hide="newInterface.type === 'alias'">Unconfigured</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="!isLinkModeDisabled(newInterface)">
                                            <label for="link-mode" class="p-form__label">IP mode</label>
                                            <div class="p-form__control">
                                                <select name="link-mode"
                                                    data-ng-model="newInterface.mode"
                                                    data-ng-change="modeChanged(newInterface)"
                                                    data-ng-options="mode.mode as mode.text for mode in modes | filterLinkModes:newInterface">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.mode == 'static'">
                                            <label for="ip-address" class="p-form__label">IP address</label>
                                            <div class="p-form__control" data-ng-class="{ 'is-error': isIPAddressInvalid(newInterface) }">
                                                <input name="ip-address" type="text" placeholder="IP address" data-ng-model="newInterface.ip_address">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <maas-obj-form obj="editInterface" manager="nodesManager" manager-method="updateInterfaceForm"
                                    table-form="true" save-on-blur="false" after-save="editSave" pre-process="preProcessInterface"
                                    data-ng-if="isEditing(editInterface)">
                                    <div class="row">
                                        <div class="col-6">
                                            <maas-obj-field type="text" key="mac_address" label="MAC address" label-width="2" input-width="5"
                                                data-ng-if="interface.type !== 'alias' && interface.type !== 'vlan'" disable-label="false"
                                                input-class="table__input u-margin--none" placeholder="00:00:00:00:00:00"></maas-obj-field>
                                            <maas-obj-field type="tags" key="tags" label="Tags" label-width="2" input-width="5"
                                                placeholder="Add a tag"
                                                data-ng-if="!isAllNetworkingDisabled(interface) && interface.type !== 'alias'"
                                                disable-label="false"></maas-obj-field>
                                        </div>
                                        <div class="col-6" data-ng-if="!isAllNetworkingDisabled(interface)">
                                            <maas-obj-field type="options" key="ip_assignment" label="IP Assignment" label-width="2" input-width="5"
                                                disable-label="false"
                                                options="assignment.name as assignment.text for assignment in ipAssignments"></maas-obj-field>
                                            <maas-obj-field type="options" key="subnet" label="Subnet" placeholder="Unconfigured" placeholder-enabled="true"
                                                data-ng-init="editInterface.subnet = editInterface.defaultSubnet" label-width="2" input-width="5"
                                                data-ng-if="editInterface.$maasForm.getValue('ip_assignment') === 'static'"
                                                on-change="subnetChangedForm"
                                                disable-label="false"
                                                options="subnet as getSubnetText(subnet) for subnet in subnets"></maas-obj-field>
                                            <maas-obj-field type="text" key="ip_address" label="IP address" placeholder="IP Address" label-width="two" input-width="three"
                                                disable-label="false" input-class="table__input u-margin--none"
                                                data-ng-if="editInterface.$maasForm.getValue('ip_assignment') === 'external'">
                                            </maas-obj-field>
                                            <maas-obj-field type="text" key="ip_address" label="IP Address" placeholder="IP Address (optional)"
                                                data-ng-if="editInterface.$maasForm.getValue('ip_assignment') === 'static'" label-width="2" input-width="5"
                                                disable-label="false"></maas-obj-field>
                                        </div>
                                    </div>
                                    <div class="row u-no-margin--top">
                                        <hr />
                                        <div class="u-float--left">
                                            <maas-obj-errors></maas-obj-errors>
                                        </div>
                                        <div class="u-float--right u-no-margin--top">
                                            <button class="p-button--base"
                                                data-ng-click="editCancel()">Cancel</button>
                                            <button class="p-button--positive u-no-margin--top"
                                                data-ng-disabled="isIPAddressInvalid(editInterface) || isMACAddressInvalid(editInterface.mac_address, true)"
                                                maas-obj-save>Save</button>
                                        </div>
                                    </div>
                                </maas-obj-form>
                            </div>
                            <div class="row is-active" data-ng-if="isShowingDeleteConfirm() && isInterfaceSelected(interface)">
                                <div class="col-8">
                                    <p><span class="p-icon--warning">Warning:</span> Are you sure you want to remove this {$ getRemoveTypeText(interface) $}?</p>
                                </div>
                                <div class="col-4">
                                    <div class="u-align--right">
                                        <button class="p-button--base" data-ng-click="cancel()">Cancel</button>
                                        <button class="p-button--negative u-no-margin--top" data-ng-click="confirmRemove(interface)">Remove</button>
                                    </div>
                                </div>
                            </div>
                            <hr data-ng-if="isShowingAdd() && !newInterface.saving" />
                            <div class="row" data-ng-if="isShowingAdd() && !newInterface.saving">
                                <div class="col-6">
                                    <button class="p-button--neutral"
                                        data-ng-click="addInterface('alias')"
                                        data-ng-show="canAddAlias(interface)">Add <span data-ng-show="newInterface.type === 'alias'">another </span>alias</button>
                                    <button class="p-button--neutral u-no-margin--top"
                                        data-ng-click="addInterface('vlan')"
                                        data-ng-show="canAddAnotherVLAN(interface)">Add <span data-ng-show="newInterface.type === 'vlan'">another </span>VLAN</button>
                                </div>
                                <div class="col-6">
                                    <div class="u-align--right">
                                        <button class="p-button--base" data-ng-click="cancel()">Cancel</button>
                                        <button class="p-button--positive u-no-margin--top" data-ng-click="addInterface()">Add</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>

                <tr data-ng-if="!isDevice"  data-ng-class="{ disabled: isDisabled(), 'is-active': isInterfaceSelected(interface) && (!isAllNetworkingDisabled() || isLimitedEditingAllowed(interface)), noEdit: cannotEditInterface(interface) }"
                    data-ng-repeat="interface in interfaces | removeInterfaceParents:newBondInterface:isAllNetworkingDisabled() | removeInterfaceParents:newBridgeInterface:isAllNetworkingDisabled()">
                    <td class="table-col--16" aria-label="Name"
                        data-ng-class="{ 'is-error': isInterfaceNameInvalid(editInterface) }">
                        <span class="u-float--left" data-ng-if="!isController && !isAllNetworkingDisabled() && !isEditing(interface)">
                            <input type="checkbox" class="checkbox" id="{$ getUniqueKey(interface) $}"
                                data-ng-hide="isAllNetworkingDisabled()"
                                data-ng-checked="isInterfaceSelected(interface)"
                                data-ng-click="toggleInterfaceSelect(interface)"
                                data-ng-disabled="isDisabled()">
                        </span>
                        <span data-ng-if="!isEditing(interface) || interface.type === 'vlan'" data-ng-show="tableInfo.column == 'name'" title="{$ interface.name $}">{$ interface.name $}</span>
                        <span class="ng-hide" data-ng-show="tableInfo.column == 'mac'" title="{$ interface.mac_address $}">{$ interface.mac_address $}</span>
                        <input type="text" class="p-form-validation__input u-no-margin--top"
                            data-ng-if="isEditing(interface) && interface.type !== 'vlan'"
                            data-ng-disabled="isController"
                            data-ng-model="editInterface.name">
                    </td>
                    <td class="table-col--7" aria-label="Boot interface">
                        <span class="u-align--center u-hide u-show--large">
                            <input type="radio" name="bootInterface" id="{$ interface.name $}" checked
                                data-ng-if="!isController && isBootInterface(interface) && !isEditing(interface)"
                                class="u-no-margin--right">
                            <label for="{$ interface.name $}"></label>
                        </span>
                        <span class="u-hide--large" data-ng-if="!isController && isBootInterface(interface) && !isEditing(interface)">Yes</span>
                        <span class="u-hide--large" data-ng-if="!isController && !isBootInterface(interface) && !isEditing(interface)">No</span>
                    </td>
                    <td class="table-col--9" aria-label="Type">
                        <span data-ng-if="!isEditing(interface)" title="{$ getInterfaceTypeText(interface) $}">{$ getInterfaceTypeText(interface) $}</span>
                    </td>
                    <td class="table-col--13" aria-label="Fabric">
                        <span data-ng-if="!isEditing(interface)" title="{$ interface.fabric.name || 'Disconnected' $}">{$ interface.fabric.name || "Disconnected" $}</span>
                    </td>
                    <td class="table-col--13" aria-label="VLAN">
                        <span data-ng-if="!isEditing(interface)" title="{$ getVLANText(interface.vlan) $}">{$ getVLANText(interface.vlan) $}</span>
                    </td>
                    <td class="table-col--13" aria-label="Subnet">
                        <span data-ng-if="!isEditing(interface) && ((isDevice && interface.subnet) || (interface.fabric && !interface.discovered[0].subnet_id))" title="{$ getSubnetText(interface.subnet) $}">{$ getSubnetText(interface.subnet) $}</span>
                        <span data-ng-if="isAllNetworkingDisabled() && interface.discovered[0].subnet_id">
                            {$ getSubnetText(getSubnet(interface.discovered[0].subnet_id)) $}
                        </span>
                    </td>
                    <td class="table-col--19" aria-label="IP Address">
                        <span data-ng-if="!isEditing(interface) && !interface.discovered[0].ip_address && interface.fabric" title="{$ interface.ip_address $} ({$ getLinkModeText(interface) $})">
                            {$ interface.ip_address $} ({$ getLinkModeText(interface) $})
                        </span>
                        <span data-ng-if="!isEditing(interface) && interface.discovered[0].ip_address && interface.fabric" title="{$ interface.discovered[0].ip_address $} (DHCP)">
                            {$ interface.discovered[0].ip_address $} (DHCP)
                        </span>
                    </td>
                    <td class="table-col--10 p-table--action-cell">
                        <div class="u-align--right">
                            <div class="p-contextual-menu" toggle-ctrl data-ng-if="!isAllNetworkingDisabled() || isLimitedEditingAllowed(interface)">
                                <button class="p-button--base is-small p-contextual-menu__toggle" data-ng-click="toggleMenu()"><i class="p-icon--contextual-menu u-no-margin--right">Actions</i></button>
                                <div class="p-contextual-menu__dropdown" role="menu" data-ng-show="isToggled">
                                    <button class="p-contextual-menu__link"
                                        aria-label="Add Alias or VLAN"
                                        data-ng-if="canAddAliasOrVLAN(interface)"
                                        data-ng-click="toggleMenu(); quickAdd(interface)">Add alias or VLAN</button>
                                    <button class="p-contextual-menu__link"
                                        data-ng-if="!cannotEditInterface(interface)"
                                        aria-label="Edit"
                                        data-ng-click="toggleMenu(); edit(interface)">Edit {$ getInterfaceTypeText(interface) $}</button>
                                    <button class="p-contextual-menu__link"
                                        data-ng-if="canBeRemoved()"
                                        aria-label="Remove"
                                        data-ng-click="toggleMenu(); quickRemove(interface)">Remove {$ getInterfaceTypeText(interface) $}&hellip;</button>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="p-table-expanding__panel col-12" data-ng-if="isShowingMembers(interface)">
                        <div class="row" data-ng-class="{ 'is-active': isShowingMembers(interface) }"
                            data-ng-repeat="member in interface.members"
                            data-ng-show="isShowingMembers(interface)">
                            <div class="col-1"></div>
                            <div class="col-2" data-ng-show="tableInfo.column == 'name'">{$ member.name $}</div>
                            <div class="col-2 ng-hide"data-ng-show="tableInfo.column == 'mac'">{$ member.mac_address $}</div>
                            <div class="col-2">{$ getInterfaceTypeText(member) $}</div>
                            <div class="col-7"></div>
                        </div>
                    </td>

                    <td class="p-table-expanding__panel col-12" data-ng-class="{ 'u-no-padding': !isShowingAdd() && !isEditing(interface) && !isShowingDeleteConfirm() && !isShowingAdd() || newInterface.saving }" data-ng-if="isInterfaceSelected(interface)">
                        <div class="row" data-ng-if="isShowingAdd() || isEditing(interface) || isShowingDeleteConfirm() || isShowingAdd() && !newInterface.saving">
                            <div class="table__dropdown-title" data-ng-if="windowWidth <= 768">
                                <h2 data-ng-click="cancel()" class="u-float--left p-heading--four">
                                    <span data-ng-if="canAddAlias(newInterface.parent)">Adding alias</span>
                                    <span data-ng-if="canAddVLAN(newInterface.parent)">Adding VLAN</span>
                                    <span data-ng-if="isEditing(interface)">Editing {$ interface.name $}</span>
                                    <span data-ng-if="isShowingDeleteConfirm()">Removing {$ interface.name $}</span>
                                </h2>
                                <button data-ng-click="cancel()" class="p-button u-float--right">
                                    <i class="p-icon--remove">Cancel</i>
                                </button>
                            </div>
                            <div class="p-form p-form--stacked" data-ng-class="{ 'is-active': isEditing(interface) || isShowingAdd() }">
                                <div class="row" data-ng-if="isShowingAdd()">
                                    <div class="col-6">
                                        <div class="p-form__group">
                                            <label class="p-form__label">Name</label>
                                            <div class="p-form__control">
                                                <span class="col-4">{$ getAddName() $}</span>
                                            </div>
                                        </div>
                                        <div class="p-form__group">
                                            <label for="type" class="p-form__label">Type</label>
                                            <div class="p-form__control">
                                                <select name="type" data-ng-model="newInterface.type" data-ng-change="addTypeChanged()">
                                                    <option value="alias" data-ng-show="canAddAlias(newInterface.parent)">Alias</option>
                                                    <option value="vlan" data-ng-show="canAddVLAN(newInterface.parent)">VLAN</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.type !== 'alias'">
                                            <label class="p-form__label">Tags</label>
                                            <div class="p-form__control tags--inline">
                                                <tags-input data-ng-model="newInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="p-form__group">
                                            <label for="fabric" class="p-form__label">Fabric</label>
                                            <div class="p-form__control">
                                                <select name="fabric"
                                                    data-ng-model="newInterface.parent.fabric"
                                                    data-ng-options="fabric as fabric.name for fabric in fabrics"
                                                    disabled="disabled">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.type === 'alias'">
                                            <label for="vlan" class="p-form__label">VLAN</label>
                                            <div class="p-form__control">
                                                <select name="vlan"
                                                    data-ng-model="newInterface.vlan"
                                                    data-ng-options="vlan as getVLANText(vlan) for vlan in vlans"
                                                    disabled="disabled">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.type === 'vlan'">
                                            <label for="vlan" class="p-form__label">VLAN</label>
                                            <div class="p-form__control">
                                                <select name="vlan"
                                                    data-ng-model="newInterface.vlan"
                                                    data-ng-change="vlanChanged(newInterface)"
                                                    data-ng-options="vlan as getVLANText(vlan) for vlan in vlans | removeDefaultVLAN | filterByFabric:newInterface.parent.fabric | filterByUnusedForInterface:newInterface.parent:originalInterfaces">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group">
                                            <label for="subnet" class="p-form__label">Subnet</label>
                                            <div class="p-form__control">
                                                <select name="subnet"
                                                    data-ng-model="newInterface.subnet"
                                                    data-ng-change="subnetChanged(newInterface)"
                                                    data-ng-options="subnet as getSubnetText(subnet) for subnet in subnets | filterByVLAN:newInterface.vlan">
                                                    <option value="" data-ng-hide="newInterface.type === 'alias'">Unconfigured</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="!isLinkModeDisabled(newInterface)">
                                            <label for="link-mode" class="p-form__label">IP mode</label>
                                            <div class="p-form__control">
                                                <select name="link-mode"
                                                    data-ng-model="newInterface.mode"
                                                    data-ng-change="modeChanged(newInterface)"
                                                    data-ng-options="mode.mode as mode.text for mode in modes | filterLinkModes:newInterface">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="p-form__group" data-ng-if="newInterface.mode == 'static'">
                                            <label for="ip-address" class="p-form__label">IP address</label>
                                            <div class="p-form__control"
                                                data-ng-class="{ 'is-error': isIPAddressInvalid(newInterface) }">
                                                <input name="ip-address" type="text" placeholder="IP address" data-ng-model="newInterface.ip_address">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <maas-obj-form obj="editInterface" manager="nodesManager" manager-method="updateInterfaceForm"
                                    table-form="true" save-on-blur="false" after-save="editSave" pre-process="preProcessInterface"
                                    data-ng-if="isEditing(editInterface)">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="p-form__group">
                                                <label class="p-form__label">Type</label>
                                                <div class="p-form__control">
                                                    <span>{$ getInterfaceTypeText(interface) $}</span>
                                                </div>
                                            </div>
                                            <maas-obj-field type="text" key="mac_address" label="MAC address" label-width="2" input-width="5"
                                                data-ng-if="interface.type !== 'alias' && interface.type !== 'vlan'" disable-label="false"
                                                disabled="isController"
                                                input-class="table__input u-margin--none" placeholder="00:00:00:00:00:00"></maas-obj-field>
                                            <maas-obj-field type="tags" key="tags" label="Tags" label-width="2" input-width="5"
                                                placeholder="Add a tag"
                                                data-ng-if="!isAllNetworkingDisabled(interface) && interface.type !== 'alias'"
                                                disable-label="false"></maas-obj-field>
                                        </div>
                                        <div class="col-6" data-ng-if="!isAllNetworkingDisabled(interface)">
                                            <maas-obj-field type="options" key="fabric" label="Fabric" label-width="2" input-width="5"
                                                disable-label="false"
                                                placeholder="Disconnected" placeholder-enabled="true"
                                                on-change="fabricChangedForm"
                                                options="fabric as fabric.name for fabric in fabrics"></maas-obj-field>
                                            <maas-obj-field type="options" key="vlan" label="VLAN" label-width="2" input-width="5"
                                                disable-label="false"
                                                data-ng-show="!isController && editInterface.$maasForm.getValue('fabric')"
                                                on-change="vlanChangedForm"
                                                options="vlan as getVLANText(vlan) for vlan in vlans | removeDefaultVLANIfVLAN:interface.type | filterByFabric:editInterface.$maasForm.getValue('fabric')">
                                            </maas-obj-field>
                                            <maas-obj-field type="options" key="subnet" label="Subnet" placeholder="Unconfigured" placeholder-enabled="true"
                                                disable-label="false" label-width="2" input-width="5"
                                                data-ng-show="!isController && editInterface.$maasForm.getValue('fabric')"
                                                on-change="subnetChangedForm"
                                                options="subnet as getSubnetText(subnet) for subnet in subnets | filterByVLAN:editInterface.$maasForm.getValue('vlan')">
                                            </maas-obj-field>
                                            <maas-obj-field type="options" key="subnet" label="Subnet" placeholder="Unconfigured" placeholder-enabled="true"
                                                data-ng-init="editInterface.subnet = editInterface.defaultSubnet" label-width="2" input-width="5"
                                                data-ng-if="!isController && editInterface.$maasForm.getValue('ip_assignment') === 'static'"
                                                on-change="subnetChangedForm"
                                                disable-label="false"
                                                options="subnet as getSubnetText(subnet) for subnet in subnets"></maas-obj-field>
                                            <maas-obj-field type="options" key="mode" label="IP mode" label-width="2" input-width="5"
                                                disable-label="false"
                                                data-ng-if="!isController && editInterface.$maasForm.getValue('fabric') && !isLinkModeDisabled(editInterface.$maasForm)"
                                                options="mode.mode as mode.text for mode in modes | filterLinkModes:editInterface.$maasForm"
                                                on-change="modeChangedForm">
                                            </maas-obj-field>
                                            <maas-obj-field type="text" key="ip_address" label="IP address" placeholder="IP Address" label-width="two" input-width="three"
                                                disable-label="false" input-class="table__input u-margin--none"
                                                data-ng-if="!isController && editInterface.$maasForm.getValue('fabric') && editInterface.$maasForm.getValue('mode') == 'static'">
                                            </maas-obj-field>
                                        </div>
                                    </div>
                                    <div class="row u-no-margin--top">
                                        <hr />
                                        <div class="u-float--left">
                                            <maas-obj-errors></maas-obj-errors>
                                        </div>
                                        <div class="u-float--right u-no-margin--top">
                                            <button class="p-button--base"
                                                data-ng-click="editCancel()">Cancel</button>
                                            <button class="p-button--positive u-no-margin--top"
                                                data-ng-disabled="(isInterfaceNameInvalid(editInterface)) || isIPAddressInvalid(editInterface) || isMACAddressInvalid(editInterface.mac_address, true)"
                                                maas-obj-save>Save</button>
                                        </div>
                                    </div>
                                </maas-obj-form>
                            </div>
                            <div class="row is-active" data-ng-if="isShowingDeleteConfirm() && isInterfaceSelected(interface)">
                                <div class="col-8">
                                    <p><span class="p-icon--warning">Warning:</span> Are you sure you want to remove this {$ getRemoveTypeText(interface) $}?</p>
                                </div>
                                <div class="col-4">
                                    <div class="u-align--right">
                                        <button class="p-button--base" data-ng-click="cancel()">Cancel</button>
                                        <button class="p-button--negative u-no-margin--top" data-ng-click="confirmRemove(interface)">Remove</button>
                                    </div>
                                </div>
                            </div>
                            <hr data-ng-if="isShowingAdd() && !newInterface.saving" />
                            <div class="row" data-ng-if="isShowingAdd() && !newInterface.saving">
                                <div class="col-6">
                                    <button class="p-button--neutral"
                                        data-ng-click="addInterface('alias')"
                                        data-ng-show="canAddAlias(interface)">Add <span data-ng-show="newInterface.type === 'alias'">another </span>alias</button>
                                    <button class="p-button--neutral u-no-margin--top"
                                        data-ng-click="addInterface('vlan')"
                                        data-ng-show="canAddAnotherVLAN(interface)">Add <span data-ng-show="newInterface.type === 'vlan'">another </span>VLAN</button>
                                </div>
                                <div class="col-6">
                                    <div class="u-align--right">
                                        <button class="p-button--base" data-ng-click="cancel()">Cancel</button>
                                        <button class="p-button--positive u-no-margin--top" data-ng-click="addInterface()">Add</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="is-active" data-ng-if="isShowingCreateBond() && !isAllNetworkingDisabled()">
                    <td>
                        <div class="row" data-ng-if="windowWidth > 768">
                            <table class="u-no-margin--top">
                                <tr class="u-no-padding">
                                    <td class="table-col--16">
                                        <input type="checkbox" class="checkbox u-float--left" id="bond-create" disabled="disabled" checked style="margin-top: 0.5rem;" />
                                        <label for="bond-create"></label>
                                        <span data-ng-class="{ 'is-error': isInterfaceNameInvalid(newBondInterface) }">
                                            <input type="text" name="name" class="editible p-form-validation__input" data-ng-model="newBondInterface.name" style="width: 82%;">
                                        </span>
                                    </td>
                                    <td class="table-col--7 u-align--center">
                                        <input type="radio" name="bondBootInterface" checked id="{$ newBondInterface $}" data-ng-if="hasBootInterface(newBondInterface)">
                                    </td>
                                    <td class="table-col--77">&nbsp;</td>
                                </tr>
                            </table>
                            <hr>
                        </div>
                        <div class="row" data-ng-if="windowWidth <= 768">
                            <h2 class="u-float--left">Create bond</h2>
                            <button data-ng-click="cancel()" class="p-button u-float--right u-no-margin--top">
                                <i class="p-icon--close">Cancel</i>
                            </button>
                        </div>
                    </td>
                    <td class="p-table-expanding__panel col-12 u-no-padding--top">
                        <div class="p-form p-form--stacked is-active">
                            <div class="row">
                                <div class="col-6">
                                    <div class="p-form__group" data-ng-if="windowWidth <= 768">
                                        <label for="bond-name" class="p-form__label">Name</label>
                                        <div class="p-form__control p-form-validation"
                                            data-ng-class="{ 'is-error': isInterfaceNameInvalid(newBondInterface) }">
                                            <input type="text" name="name" id="bond-name" class="p-form-validation__input"
                                                data-ng-model="newBondInterface.name">
                                        </div>
                                    </div>
                                    <div class="p-form__group">
                                        <label for="bond-mode" class="p-form__label">Bond mode</label>
                                        <div class="p-form__control">
                                            <select name="bond-mode"
                                                data-ng-model="newBondInterface.mode"
                                                data-ng-options="mode[0] as mode[1] for mode in bondOptions.modes">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group">
                                        <label for="mac" class="p-form__label">MAC address</label>
                                        <div class="p-form__control p-form-validation"
                                            data-ng-class="{ 'is-error': isMACAddressInvalid(newBondInterface.mac_address) }">
                                            <input type="text" name="mac" class="p-form-validation__input"
                                                placeholder="00:00:00:00:00:00"
                                                data-ng-model="newBondInterface.mac_address"
                                                data-ng-pattern="/^([0-9A-F]{2}[::]){5}([0-9A-F]{2})$/gmi" mac-address maxlength="17"
                                                data-ng-placeholder="getInterfacePlaceholderMACAddress(newBondInterface)">
                                        </div>
                                    </div>
                                    <div class="p-form__group u-vertically-center">
                                        <label class="p-form__label">Tags</label>
                                        <div class="p-form__control tags--inline">
                                            <tags-input data-ng-model="newBondInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="p-form__group" data-ng-if="showLACPRate()">
                                        <label for="lacp-rate" class="p-form__label">LACP rate</label>
                                        <div class="p-form__control">
                                            <select name="lacp-rate"
                                                data-ng-model="newBondInterface.lacpRate"
                                                data-ng-options="rate[0] as rate[1] for rate in bondOptions.lacp_rates">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group" data-ng-if="showXMITHashPolicy()">
                                        <label for="xmit-hash-policy" class="p-form__label">XMIT hash policy</label>
                                        <div class="p-form__control">
                                            <select name="xmit-hash-policy"
                                                data-ng-model="newBondInterface.xmitHashPolicy"
                                                data-ng-options="xmit[0] as xmit[1] for xmit in bondOptions.xmit_hash_policies">
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div data-ng-if="newBondInterface.parents.length > 0">
                            <hr>
                            <table class="row">
                                <tr class="u-hide u-show--large">
                                    <th class="table-col--16">Name</th>
                                    <th class="table-col--16">Type</th>
                                    <th class="table-col--16">Primary</th>
                                </tr>
                                <tr data-ng-repeat="parent in newBondInterface.parents | orderBy:'name'">
                                    <td class="table-col--16" aria-label="Name">{$ parent.name $}</td>
                                    <td class="table-col--16" aria-label="Type">{$ getInterfaceTypeText(parent) $}</td>
                                    <td class="table-col--16" aria-label="Primary">
                                        <input type="radio" name="bondPrimary" id="{$ parent.name $}" data-ng-model="newBondInterface.primary" data-ng-value="parent">
                                        <label for="{$ parent.name $}"></label>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="row">
                            <hr />
                            <div class="col-12 u-align--right">
                                <button class="p-button--base" type="button" data-ng-click="cancel()">Cancel</button>
                                <button class="p-button--positive u-no-margin--top"
                                    data-ng-click="addBond()"
                                    data-ng-disabled="cannotAddBond()">Save</button>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="is-active" data-ng-if="isShowingCreateBridge() && !isAllNetworkingDisabled()">
                    <td class="p-table-expanding__panel col-12">
                        <div class="row">
                            <div class="col-12 u-hide--medium u-hide--small">
                                <table>
                                    <tr class="u-no-padding">
                                        <td class="table-col--16">
                                            <input type="checkbox" class="checkbox u-float--left" id="bond-create" disabled="disabled" checked style="margin-top: 0.5rem;" />
                                            <label for="bridge-create"></label>
                                            <span data-ng-class="{ 'is-error': isInterfaceNameInvalid(newBridgeInterface) }">
                                                <input type="text" class="table__input editible u-no-margin--top" data-ng-model="newBridgeInterface.name" style="width: 82%;">
                                            </span>
                                        </td>
                                        <td class="table-col--7 u-align--center">
                                            <input type="radio" id="{$ newBridgeInterface.name $}" name="bridgeBootInterface" checked data-ng-if="hasBootInterface(newBridgeInterface)">
                                        </td>
                                        <td class="table-col--77">&nbsp;</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="u-hide--large">
                                <label for="bridge-name" class="p-form__label">Name</label>
                                <div class="p-form__control" data-ng-class="{ 'is-error': isInterfaceNameInvalid(newBridgeInterface) }">
                                    <input type="text" id="bridge-name" data-ng-model="newBridgeInterface.name">
                                </div>
                            </div>
                            <hr>
                        </div>
                        <div class="row p-form--stacked u-no-margin--top">
                            <div class="col-6">
                                <div class="p-form__group u-vertically-center" style="min-height: 2.5rem;">
                                    <label class="p-form__label">Primary</label>
                                    <div class="p-form__control">
                                        <span>{$ newBridgeInterface.primary.name $}</span>
                                    </div>
                                </div>
                                <div class="p-form__group u-vertically-center" data-ng-class="{ 'is-error': isMACAddressInvalid(newBridgeInterface.mac_address) }">
                                    <label for="mac" class="p-form__label">MAC address</label>
                                    <div class="p-form__control">
                                        <input type="text" name="mac" placeholder="00:00:00:00:00:00" data-ng-model="newBridgeInterface.mac_address" data-ng-pattern="/^([0-9A-F]{2}[::]){5}([0-9A-F]{2})$/gmi" mac-address maxlength="17" data-ng-placeholder="getInterfacePlaceholderMACAddress(newBridgeInterface)">
                                    </div>
                                </div>
                                <div class="p-form__group u-vertically-center">
                                    <label class="p-form__label">Tags</label>
                                    <div class="p-form__control tags--inline">
                                        <tags-input data-ng-model="newBridgeInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="p-form__group u-vertically-center" style="min-height: 2.5rem;">
                                    <label for="stp" class="p-form__label">STP</label>
                                    <div class="p-form__control">
                                        <div class="onoffswitch maas-p-switch">
                                            <input id="bridge_stp" type="checkbox" name="bridge_stp" class="onoffswitch-checkbox maas-p-switch--input"
                                                data-ng-model="newBridgeInterface.bridge_stp">
                                            <label class="onoffswitch-label u-no-margin--top maas-p-switch--mask" for="bridge_stp">
                                                <span class="onoffswitch-inner"></span>
                                                <span class="onoffswitch-switch"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-form__group u-vertically-center" data-ng-if="newBridgeInterface.bridge_stp">
                                    <label for="fd" class="p-form__label">Forward delay</label>
                                    <div class="p-form__control">
                                        <input type="text" name="mac" data-ng-model="newBridgeInterface.bridge_fd">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row u-no-margin--top">
                            <hr>
                            <div class="col-12 u-align--right">
                                <button class="p-button--base" data-ng-click="cancel()">Cancel</button>
                                <button class="p-button--positive u-no-margin--top" data-ng-click="addBridge()" data-ng-disabled="cannotAddBridge()">Save</button>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr class="is-active ng-hide" data-ng-show="isShowingCreatePhysical()">
                    <td class="col-2 p-form-validation" data-ng-if="!isDevice"
                        data-ng-class="{ 'is-error': isInterfaceNameInvalid(newInterface) }">
                        <input type="text" class="p-form-validation__input"
                            data-ng-model="newInterface.name">
                    </td>
                    <td class="col-10"></td>
                    <td class="p-table-expanding__panel col-12">
                        <div class="row" data-ng-if="windowWidth <= 768">
                            <div class="col-8">
                                <h2 data-ng-click="cancel()" class="p-heading--four">&lsaquo;&nbsp;&nbsp;New interface</h2>
                            </div>
                            <div class="col-4">
                                <div class="u-align--right">
                                    <i data-ng-click="cancel()" class="p-icon--close">Cancel</i>
                                </div>
                            </div>
                        </div>
                        <div class="p-form p-form--stacked" data-ng-if="!isDevice">
                            <div class="row">
                                <div class="col-6" data-ng-if="!isDevice">
                                    <div class="p-form__group p-form-validation u-hide--large"
                                        data-ng-class="{ 'is-error': isInterfaceNameInvalid(newInterface) }">
                                        <label for="new-interface-name" class="p-form__label">Name</label>
                                        <div class="p-form__control">
                                            <input type="text" class="p-form-validation__input" id="new-interface-name"
                                                data-ng-model="newInterface.name">
                                        </div>
                                    </div>
                                    <div class="p-form__group" style="min-height: 2.5rem;">
                                        <label class="p-form__label">Type</label>
                                        <div class="p-form__control">
                                            <span>Physical</span>
                                        </div>
                                    </div>
                                    <div class="p-form__group p-form-validation u-no-margin--top"
                                        data-ng-class="{ 'is-error': isMACAddressInvalid(newInterface.mac_address, false) || newInterface.macError }">
                                        <label for="mac" class="p-form__label">MAC address</label>
                                        <div class="p-form__control">
                                            <input type="text" name="mac" class="p-form-validation__input"
                                                placeholder="00:00:00:00:00:00"
                                                data-ng-model="newInterface.mac_address"
                                                data-ng-pattern="/^([0-9A-F]{2}[::]){5}([0-9A-F]{2})$/gmi" mac-address maxlength="17">
                                        </div>
                                    </div>
                                    <div class="p-form__group u-vertically-center" style="min-height: 2.5rem;">
                                        <label class="p-form__label">Tags</label>
                                        <div class="p-form__control tags--inline">
                                            <tags-input data-ng-model="newInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="p-form__group">
                                        <label for="fabric" class="p-form__label">Fabric</label>
                                        <div class="p-form__control">
                                            <select name="fabric"
                                                data-ng-model="newInterface.fabric"
                                                data-ng-change="fabricChanged(newInterface)"
                                                data-ng-options="fabric as fabric.name for fabric in fabrics">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group">
                                        <label for="vlan" class="p-form__label">VLAN</label>
                                        <div class="p-form__control">
                                            <select name="vlan"
                                                data-ng-model="newInterface.vlan"
                                                data-ng-options="vlan as getVLANText(vlan) for vlan in vlans"
                                                disabled="disabled">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group">
                                        <label for="subnet" class="p-form__label">Subnet</label>
                                        <div class="p-form__control">
                                            <select name="subnet"
                                                data-ng-model="newInterface.subnet"
                                                data-ng-change="subnetChanged(newInterface)"
                                                data-ng-options="subnet as getSubnetText(subnet) for subnet in subnets | filterByVLAN:newInterface.vlan">
                                                <option value="" data-ng-hide="newInterface.type === 'alias'">Unconfigured</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group" data-ng-if="!isLinkModeDisabled(newInterface)">
                                        <label for="link-mode" class="p-form__label">IP mode</label>
                                        <div class="p-form__control">
                                            <select name="link-mode"
                                                data-ng-model="newInterface.mode"
                                                data-ng-change="modeChanged(newInterface)"
                                                data-ng-options="mode.mode as mode.text for mode in modes | filterLinkModes:newInterface">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group p-form-validation" data-ng-if="newInterface.mode == 'static'"
                                        data-ng-class="{ 'is-error': isIPAddressInvalid(newInterface) }">
                                        <label for="ip-address" class="p-form__label">IP address</label>
                                        <div class="p-form__control">
                                            <input name="ip-address" type="text"
                                                class="p-form-validation__input"
                                                placeholder="IP address (optional)"
                                                data-ng-model="newInterface.ip_address">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-form p-form--stacked u-no-margin--top">
                            <div class="row" data-ng-if="isDevice">
                                <div class="col-6">
                                    <div class="p-form__group p-form-validation u-no-margin--top"
                                        data-ng-class="{ 'is-error': isMACAddressInvalid(newInterface.mac_address, true) }">
                                        <label for="mac" class="p-form__label">MAC address</label>
                                        <div class="p-form__control">
                                            <input name="mac" type="text"
                                                class="p-form-validation__input"
                                                placeholder="00:00:00:00:00:00"
                                                data-ng-model="newInterface.mac_address"
                                                data-ng-pattern="/^([0-9A-F]{2}[::]){5}([0-9A-F]{2})$/gmi" mac-address maxlength="17">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6" data-ng-if="!isAllNetworkingDisabled(interface)">
                                    <div class="p-form__group">
                                        <label for="ip-assignment" class="p-form__label">IP Assignment</label>
                                        <div class="p-form__control">
                                            <select name="ip-assignment"
                                                data-ng-model="newInterface.ip_assignment"
                                                data-ng-options="assignment.name as assignment.text for assignment in ipAssignments">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group" data-ng-if="newInterface.ip_assignment === 'static'">
                                        <label for="subnet" class="p-form__label">Subnet</label>
                                        <div class="p-form__control">
                                            <select name="subnet"
                                                data-ng-init="newInterface.subnet = subnets[0]"
                                                data-ng-model="newInterface.subnet"
                                                data-ng-change="subnetChanged(newInterface)"
                                                data-ng-options="subnet as getSubnetText(subnet) for subnet in subnets">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="p-form__group p-form-validation" data-ng-if="newInterface.ip_assignment !== 'dynamic'"
                                        data-ng-class="{ 'is-error': isIPAddressInvalid(newInterface) }">
                                        <label for="ip-address" class="p-form__label">IP address</label>
                                        <div class="p-form__control">
                                            <input name="ip-address" type="text"
                                                class="p-form-validation__input"
                                                data-ng-if="newInterface.ip_assignment === 'static'"
                                                placeholder="IP address (optional)"
                                                data-ng-model="newInterface.ip_address">
                                            <input name="ip-address" type="text"
                                                class="p-form-validation__input"
                                                data-ng-if="newInterface.ip_assignment !== 'static'"
                                                placeholder="IP address"
                                                data-ng-model="newInterface.ip_address">
                                            <p class="p-form-validation__message" role="alert"
                                                data-ng-if="getInterfaceError(newInterface)">
                                                <strong>Error:</strong> {$ getInterfaceError(newInterface) $}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <hr />
                            <div class="u-float--left" data-ng-show="newInterface.errorMsg">
                                <span class="p-icon--error">Error:</span> {$ newInterface.errorMsg $}
                            </div>
                            <div class="u-float--right u-no-margin--top">
                                <button class="p-button--base" data-ng-click="cancel()">Cancel</button>
                                <button class="p-button--positive u-no-margin--top"
                                    data-ng-click="addPhysicalInterface()"
                                    data-ng-disabled="cannotAddPhysicalInterface()">Save</button>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <div data-ng-if="!isController && !isDevice" data-ng-hide="isAllNetworkingDisabled() || isShowingCreateBond() || isShowingCreatePhysical()">
            <button class="p-button--neutral"
                data-ng-disabled="selectedMode !== null"
                data-ng-click="showCreatePhysical()">Add interface</button>
            <button class="p-button--neutral"
                data-ng-disabled="!canCreateBond()"
                data-ng-click="showCreateBond()">Create bond</button>
            <button class="p-button--neutral"
                data-ng-disabled="!canCreateBridge()"
                data-ng-click="showCreateBridge()">Create bridge</button>
        </div>
        <div data-ng-if="isDevice" data-ng-hide="isAllNetworkingDisabled() || isShowingCreateBond() || isShowingCreatePhysical()">
            <button class="p-button--neutral"
                data-ng-disabled="selectedMode !== null"
                data-ng-click="showCreatePhysical()">Add interface</button>
        </div>
    </div>
</form>
