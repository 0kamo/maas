<h1 id="page-title">{$ nodes.length $} Installable Nodes</h1>
<aside id="sidebar">
    <div class="filters three-col">
        <h3 class="filters__title">Filter by</h3>
        <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
        <div class="ng-hide filters-data" data-ng-show="metadata.statuses.length">
            <h4 class="filters-data__title">Status</h4>
            <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
            <ul class="filters-data__list" data-ng-repeat="status in metadata.statuses | orderBy:['-count', 'name']">
                <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                <li class="filters-data__item" data-ng-class="{ active: isFilterActive('status', status.name) }">
                    <a class="filters-data__link" href="" data-ng-click="toggleFilter('status', status.name)">{$ status.name $}</a> ({$ status.count $})
                </li>
            </ul>
        </div>
        <div class="ng-hide filters-data" data-ng-show="metadata.owners.length">
            <h4 class="filters-data__title">Owner</h4>
            <ul class="filters-data__list" data-ng-repeat="owner in metadata.owners | orderBy:['-count', 'name']">
                <li class="filters-data__item" data-ng-class="{ active: isFilterActive('owner', owner.name) }">
                    <a class="filters-data__link" href="" data-ng-click="toggleFilter('owner', owner.name)">{$ owner.name $}</a> ({$ owner.count $})
                </li>
            </ul>
        </div>
    </div>
</aside>
<div class="nine-col last-col">
    <div id="search-bar" class="node-search">
        <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
        <input
            type="search" placeholder="Search nodes" class="node-search__input"
            data-ng-model="search" data-ng-change="updateFilters()"
            data-ng-class="{ error: !searchValid }" />
        <input type="submit" class="node-search__submit" />
    </div>
    <table class="list" id="nodes-listing">
        <thead>
            <tr>
                <th>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <input type="checkbox" data-ng-click="toggleCheckAll()" data-ng-model="allViewableChecked" />
                </th>
                <th colspan="2" claas="table-listing__cell-fixed">
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='fqdn'; reverse=!reverse; column='fqdn'">
                        <acronym title="Fully Qualified Domain Name">FQDN</acronym>
                    </a> /
                    <a href="" data-ng-click="predicate='pxe_mac'; reverse=!reverse; column='pxe_mac'">
                        <acronym title="Media Access Control addresses">MAC</acronym>
                    </a>
                </th>
                <th>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='owner'; reverse=!reverse">Owner</a>
                </th>
                <th>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='status'; reverse=!reverse">Status</a>
                </th>
                <th class="powerstate">
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='power_state'; reverse=!reverse">Power</a>
                </th>
                <th>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='cpu_count'; reverse=!reverse">Cores</a>
                </th>
                <th>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='memory'; reverse=!reverse">RAM (GiB)</a>
                </th>
                <th>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='storage'; reverse=!reverse">Storage (GB)</a>
                </th>
                <th>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <a href="" data-ng-click="predicate='disks'; reverse=!reverse">Disks</a>
                </th>
            </tr>
        </thead>
            <!-- XXX blake_r 2015-02-18 - Need to add e2e test. This really needs lots of tests. -->
            <tr data-ng-repeat="node in filtered_nodes = (nodes | nodesFilter:search | orderBy:predicate:reverse) track by node.system_id">
                <td>
                    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                    <input type="checkbox" data-ng-click="toggleChecked(node)" data-ng-model="node.$selected" />
                </td>
                <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                <td class="node-column table-listing__cell-fixed" data-ng-show="$parent.column === 'fqdn'" colspan="2">
                    <a href="{$ node.url $}">{$ node.fqdn $}</a>
                </td>
                <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
                <td class="ng-hide table-listing__cell-fixed" data-ng-show="$parent.column === 'pxe_mac'" colspan="2">
                    <a href="{$ node.url $}" title="{$ node.pxe_mac_vendor $}">{$ node.pxe_mac $}</a>
                    <a href="{$ node.url $}" class="extra-macs" data-ng-show="node.extra_macs.length">(+{$ node.extra_macs.length $})</a>
                </td>
                <td>{$ node.owner $}</td>
                <td>{$ node.status $}</td>
                <td class="powerstate">
                    <div title="{$ node.power_state $}" class="powerstates power-{$ node.power_state $}">
                    </div>
                </td>
                <td>{$ node.cpu_count $}</td>
                <td>{$ node.memory $}</td>
                <td>{$ node.storage $}</td>
                <td>{$ node.disks $}</td>
            </tr>
    </table>
    <!-- XXX blake_r 2015-02-18 - Need to add e2e test. -->
    <div id="bulk-actions" class="ng-hide" data-ng-show="selectedNodes.length">
        {$ selectedNodes.length $} Selected Nodes
    </div>
</div>
<div class="clear"></div>
