<div data-ng-hide="loaded">
    <header class="page-header" sticky media-query="min-width: 769px">
        <div class="wrapper--inner">
            <h1 class="page-header__title">Loading...</h1>
        </div>
    </header>
</div>
<div class="ng-hide" data-ng-show="loaded">
    <header class="page-header" sticky media-query="min-width: 769px">
        <div class="wrapper--inner">
            <h1 class="page-header__title">
                <span contenteditable="true"
                    data-ng-class="{ editable: canEdit(), 'has-error': editHeaderInvalid(), editmode: header.editing }"
                    data-ng-model="header.hostname.value"
                    data-ng-disabled="!canEdit()"
                    data-maas-editing="editHeader()"></span>
                <span class="page-header__title-dot ng-hide" data-ng-show="header.editing">.</span>
                <select class="page-header__title-domain ng-hide"
                    data-ng-show="header.editing"
                    data-ng-model="header.domain.selected"
                    data-ng-options="domain as domain.name for domain in header.domain.options">
                </select>
            </h1>
            <a href="" class="button--base button--inline u-margin--bottom-small ng-hide"
                data-ng-show="header.editing"
                data-ng-click="cancelEditHeader()">Cancel</a>
            <a href="" class="button--positive button--inline u-margin--bottom-small ng-hide"
                data-ng-show="header.editing"
                data-ng-disabled="editHeaderInvalid()"
                data-ng-click="saveEditHeader()">Save</a>

            <!-- XXX ricgard 2016-06-16 - Need to add e2e test. -->
            <p class="page-header__status" data-ng-hide="isController || header.editing">
                {$ node.status $}
                <span class="u-text--{$ getPowerStateClass() $} u-margin--left-small"><i class="icon icon--power-{$ getPowerStateClass() $} u-margin--right-tiny"></i>{$ getPowerStateText() $}</span>
                <a href="" class="page-header__status-check" data-ng-show="canCheckPowerState()" data-ng-click="checkPowerState()">check now</a>
            </p>

            <!-- XXX ricgard 2016-06-16 - Need to add e2e test. -->
            <div class="page-header__controls" data-ng-show="!header.editing && availableActionOptions.length">
                <div data-maas-cta="availableActionOptions"
                    data-ng-model="actionOption"
                    data-ng-change="actionOptionChanged()">
                </div>
            </div>

            <!-- XXX blake_r 2015-02-19 - Need to add e2e test. -->
            <div class="page-header__dropdown" data-ng-class="{ 'is-open': actionOption }">

                <div class="page-header__section twelve-col u-margin--bottom-none ng-hide" data-ng-show="!node.dhcp_on">
	            <p class="page-header__message page-header__message--warning">
                        MAAS is not providing DHCP.
		    </p>
                </div>

                <!-- XXX blake_r 2015-02-19 - Need to add e2e test. -->
                <div class="page-header__section twelve-col u-margin--bottom-none ng-hide" data-ng-hide="isActionError() || isDeployError() || isSSHKeyError() || hasActionPowerError(actionOption.name)">
                    <form class="form form--inline">
                        <fieldset class="form__fieldset ng-hide" data-ng-show="actionOption.name === 'commission'">
                            <div class="form__group">
                                <input class="checkbox" id="enableSSH" type="checkbox"
                                    data-ng-model="commissionOptions.enableSSH">
                                <label for="enableSSH">Allow SSH access and prevent machine from powering off</label>
                            </div>
                            <div class="form__group">
                                <input class="checkbox" id="skipNetworking" type="checkbox"
                                    data-ng-model="commissionOptions.skipNetworking">
                                <label for="skipNetworking">Retain network configuration</label>
                            </div>
                            <div class="form__group">
                                <input class="checkbox" id="skipStorage" type="checkbox"
                                    data-ng-model="commissionOptions.skipStorage">
                                <label for="skipStorage">Retain storage configuration</label>
                            </div>
                        </fieldset>
                        <fieldset class="form__fieldset ng-hide" data-ng-show="actionOption.name === 'deploy'">
                            <div class="form__group">
                                <label for="image" class="form__group-label">Choose your image</label>
                                <div class="form__group-input">
                                    <span data-maas-os-select="osinfo" data-ng-model="osSelection"></span>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset class="form__fieldset" data-ng-if="actionOption.name === 'release'">
                            <div class="form__group">
                                <span data-maas-release-options="releaseOptions"></span>
                            </div>
                        </fieldset>
                        <div class="page-header__controls">
                            <a href="" class="button--base button--inline" data-ng-click="actionCancel()">Cancel</a>
                            <button class="button--inline" data-ng-class="actionOption.name === 'delete' ? 'button--destructive' : 'button--positive'" data-ng-click="actionGo('nodes')" data-ng-hide="hasActionsFailed('nodes')">
                                <span data-ng-if="actionOption.name === 'commission'">Commission
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'acquire'">Acquire
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'deploy'">Deploy
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'release'">Release
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'set-zone'">Set zone for
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'on'">Power on
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'off'">Power off
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'abort'">Abort action on
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'rescue-mode'">Rescue
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'exit-rescue-mode'">Exit rescue mode
                                </span>
                                <span data-ng-if="actionOption.name === 'mark-broken'">Mark
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span> as broken
                                </span>
                                <span data-ng-if="actionOption.name === 'mark-fixed'">Mark
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span> as fixed
                                </span>
                                <span data-ng-if="actionOption.name === 'delete'">Delete
                                    <span data-ng-if="!isController">machine</span>
                                    <span data-ng-if="isController">controller</span>
                                </span>
                                <span data-ng-if="actionOption.name === 'import-images'">Import images
                                </span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- XXX blake_r 2015-02-19 - Need to add e2e test. -->
                <div class="page-header__section twelve-col u-margin--bottom-none ng-hide" data-ng-show="isActionError()">
                    <p class="page-header__message page-header__message--error">
                        Node failed to be {$ actionOption.sentence $}, because of the following error: {$ actionError $}
                    </p>
                    <div class="page-header__controls">
                        <a href="" class="button--base button--inline" data-ng-click="actionCancel()">Cancel</a>
                        <button class="button--secondary button--inline" data-ng-click="actionGo()">Retry</button>
                    </div>
                </div>

                <!-- XXX blake_r 2015-02-19 - Need to add e2e test. -->
                <div class="page-header__section twelve-col u-margin--bottom-none ng-hide" data-ng-show="isDeployError()">
                    <p class="page-header__message page-header__message--error">
                        Node cannot be {$ actionOption.sentence $}, because the required boot images have not been imported. To import boot images, visit the <a href="images/">images page</a>.
                    </p>
                    <div class="page-header__controls">
                        <a href="" class="button--base button--inline" data-ng-click="actionCancel()">Cancel</a>
                    </div>
                </div>

                <div class="page-header__section twelve-col u-margin--bottom-none ng-hide" data-ng-show="hasActionPowerError(actionOption.name)">
                    <p class="page-header__message page-header__message--error">
                        Node cannot be {$ actionOption.sentence $}, because power control software for the
                        node is missing from its rack controller. To proceed, install the
                        {$ getPowerErrors() $} on the rack controller.
                    </p>
                    <div class="page-header__controls">
                        <a href="" class="button--base button--inline" data-ng-click="actionCancel()">Cancel</a>
                    </div>
                </div>

                <div class="page-header__section twelve-col u-margin--bottom-none ng-hide" data-ng-show="isSSHKeyError()">
                    <p class="page-header__message page-header__message--error">
                        Node cannot be {$ actionOption.sentence $}, because an SSH key has not been added to your account. To add an SSH key, visit <a href="account/prefs/">your account page</a>.
                    </p>
                    <div class="page-header__controls">
                        <a href="" class="button--base button--inline" data-ng-click="actionCancel()">Cancel</a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- <nav class="p-mobile-nav">
        <a class="p-mobile-nav__link">Summary</a>
        <a class="p-mobile-nav__link" href="#containers">Containers and VMs</a>
        <a class="p-mobile-nav__link" href="#power">Power</a>
        <a class="p-mobile-nav__link" href="#services">Services</a>
        <a class="p-mobile-nav__link" href="#vlans">VLANs</a>
        <a class="p-mobile-nav__link" href="#storage">Storage</a>
        <a class="p-mobile-nav__link" href="#events">Events</a>
        <a class="p-mobile-nav__link" href="#output">Output</a>
    </nav> -->
    <div class="row" id="summary">
        <div class="wrapper--inner">
            <h2 data-ng-hide="isController" class="eight-col">Machine summary</h2>
            <h2 data-ng-show="isController" class="eight-col">Controller summary</h2>
            <div data-ng-hide="isController">
                <div class="four-col last-col u-align--right" data-ng-hide="summary.editing">
                    <a href="" class="button--secondary button--inline"
                        data-ng-show="canEdit()"
                        data-ng-click="editSummary()">Edit</a>
                </div>
                <div class="four-col last-col u-align--right ng-hide" data-ng-show="summary.editing">
                    <a href="" class="button--base button--inline"
                       data-ng-click="cancelEditSummary()">Cancel</a>
                    <button class="button--positive button--inline"
                        data-ng-class="{ secondary: invalidArchitecture() }"
                        data-ng-click="saveEditSummary()">Save changes</button>
                </div>
            </div>
            <div class="twelve-col" data-ng-if="isSuperUser()">
                <div class="p-notification--error"
                    data-ng-if="!isController && !isRackControllerConnected()">
                    <p class="p-notification__response">
                      <span class="p-notification__status">Error:</span>Editing is currently disabled because no rack controller is currently connected to the region.</p>
                </div>
                <div class="p-notification--error"
                    data-ng-if="!isController && hasInvalidArchitecture() && isRackControllerConnected() && hasUsableArchitectures()">
                        <p class="p-notification__response">
                          <span class="p-notification__status">Error:</span>This machine currently has an invalid architecture. Update the architecture of this machine to make it deployable.</p>
                </div>
                <div class="p-notification--error"
                    data-ng-if="!isController && hasInvalidArchitecture() && isRackControllerConnected() && !hasUsableArchitectures()">
                        <p class="p-notification__response">
                          <span class="p-notification__status">Error:</span>No boot images have been imported for a valid architecture to be selected. Visit the <a href="images">images page</a> to start the import process.</p>
                </div>
            </div>
            <form class="form form--stack">
                <fieldset class="form__fieldset six-col ng-hide" data-ng-show="isSuperUser() && !isController">
                    <div class="form__group">
                        <label for="zone" class="form__group-label two-col">Zone</label>
                        <div class="form__group-input three-col">
                            <select name="zone" id="zone" placeholder="Choose a zone"
                                data-ng-disabled="!summary.editing"
                                data-ng-model="summary.zone.selected"
                                data-ng-options="zone as zone.name for zone in summary.zone.options">
                                <option value="" disabled="disabled">Choose a zone</option>
                            </select>
                        </div>
                    </div>
                    <div class="form__group">
                        <label for="architecture" class="form__group-label two-col">Architecture</label>
                        <div class="form__group-input three-col">
                            <select name="architecture" id="architecture"
                                data-ng-disabled="!summary.editing"
                                data-ng-model="summary.architecture.selected"
                                data-ng-options="arch for arch in summary.architecture.options"
                                data-ng-class="{ 'has-error': invalidArchitecture() }">
                                <option value="" disabled="disabled">{$ getArchitecturePlaceholder() $}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form__group">
                        <label for="min_hwe_kernel" class="form__group-label two-col">Minimum Kernel</label>
                        <div class="form__group-input three-col">
                            <select name="min_hwe_kernel" id="min_hwe_kernel" placeholder="No minimum kernel"
                                data-ng-disabled="!summary.editing"
                                data-ng-model="summary.min_hwe_kernel.selected"
                                data-ng-options="hwe_kernel[0] as hwe_kernel[1] for hwe_kernel in summary.min_hwe_kernel.options">
                                <option value="">No minimum kernel</option>
                            </select>
                        </div>
                    </div>
                    <dl class="u-width--full u-float--left u-margin--top-small">
                        <dt class="two-col">Owner</dt>
                            <dd class="four-col last-col">
                                {$ node.owner || "Unassigned" $}
                            </dd>
                        <dt class="two-col">Tags</dt>
                            <dd class="three-col last-col">
                                <span class="tag-link" data-ng-repeat="tag in node.tags" data-ng-hide="summary.editing">
                                    <a href="#/nodes/?query=tags:({$ tag $})">{$ tag $}</a>
                                </span>
                                <tags-input ng-model="summary.tags"
                                    data-ng-show="summary.editing" allowed-tags-pattern="[\w-]+">
                                    <auto-complete source="tagsAutocomplete($query)"></auto-complete>
                                </tags-input>
                            </dd>
                    </dl>
                </fieldset>
                <div data-ng-hide="isSuperUser() || isController">
                    <dl>
                        <dt class="two-col">Zone</dt>
                            <dd class="four-col last-col">
                                {$ node.zone.name $}
                            </dd>
                        <dt class="two-col">Architecture</dt>
                            <dd class="four-col last-col">
                                {$ node.architecture || "Missing" $}
                            </dd>
                        <dt class="two-col">Owner</dt>
                            <dd class="four-col last-col">
                                {$ node.owner || "Unassigned" $}
                            </dd>
                        <dt class="two-col">Tags</dt>
                            <dd class="four-col last-col">
                                {$ node.tags.join(', ') $}
                            </dd>
                    </dl>
                </div>
                <div class="six-col" data-ng-if="isController">
                    <dl>
                        <dt class="two-col">Type</dt>
                            <dd class="four-col last-col">
                                {$ node.node_type_display $}
                                <i class="icon icon--help u-margin--left-tiny tooltip"
                                      aria-label="A region controller controls MAAS services like DNS and runs the database."
                                      data-ng-show="node.node_type == 3"></i>
                                <i class="icon icon--help u-margin--left-tiny tooltip"
                                      aria-label="A rack controller controls hosts and images and runs network services&#xa;like DHCP for connected VLANs."
                                      data-ng-show="node.node_type == 2"></i>
                                <i class="icon icon--help u-margin--left-tiny tooltip"
                                      aria-label="A region controller controls MAAS services like DNS and runs the database.&#xa;&#xa;A rack controller controls hosts and images and runs network services&#xa;like DHCP for connected VLANs."
                                      data-ng-show="node.node_type == 4"></i>
                            </dd>
                        <dt class="two-col" data-ng-show="node.node_type == 2 || node.node_type == 4">Last image sync</dt>
                            <dd class="four-col last-col" data-ng-show="node.node_type == 2 || node.node_type == 4">
                                {$ node.last_image_sync || 'never' $}
                            </dd>
                        <dt class="two-col" data-ng-show="node.node_type == 2 || node.node_type == 4">Images status</dt>
                            <dd class="four-col last-col" data-ng-show="node.node_type == 2 || node.node_type == 4">
                                <maas-controller-image-status system-id="node.system_id"></maas-controller-image-status>
                            </dd>
                        <dt class="two-col">Zone</dt>
                            <dd class="four-col last-col">
                                {$ node.zone.name $}
                            </dd>
                    </dl>
                </div>
                <div class="six-col last-col">
                    <dl>
                        <dt class="two-col">CPU</dt>
                            <dd class="four-col last-col">
                                {$ node.cpu_count $} cores
                            </dd>
                        <dt class="two-col">RAM</dt>
                            <dd class="four-col last-col">
                                {$ node.memory $}GiB
                            </dd>
                        <dt class="two-col">Storage</dt>
                            <dd class="four-col last-col">
                                {$ node.storage $}GB over {$ node.physical_disk_count $} disks
                            </dd>
                        <dt class="two-col ng-hide" data-ng-show="node.show_os_info">Operating System</dt>
                            <dd class="four-col last-col ng-hide" data-ng-show="node.show_os_info">{$ getOSText() $}</dd>
                        <dt class="two-col ng-hide" data-ng-show="node.show_os_info && isUbuntuOS() && !isController">Kernel</dt>
                            <dd class="four-col last-col ng-hide" data-ng-show="node.show_os_info && isUbuntuOS() && !isController">{$ node.hwe_kernel $}</dd>
                        <dt class="two-col ng-hide" data-ng-show="node.show_os_info && node.third_party_driver">Third Party Driver</dt>
                            <dd class="four-col last-col ng-hide" data-ng-show="node.show_os_info && node.third_party_driver">
                                {$ node.third_party_driver.module $} "{$ node.third_party_driver.comment $}"
                            </dd>
                    </dl>
                </div>
            </form>
        </div>
    </div>
    <div class="row" id="containers" data-ng-show="!isController && devices.length">
        <div class="wrapper--inner">
            <div class="twelve-col">
                <h2>Containers and VMs</h2>
            </div>
            <div class="twelve-col">
                <div class="table">
                    <header class="table__head">
                        <div class="table__row">
                            <div class="table__header table-col--30">Name</div>
                            <div class="table__header table-col--30">MAC</div>
                            <div class="table__header table-col--40">IP Address</div>
                        </div>
                    </header>
                    <main class="table__body" data-selected-rows>
                        <div class="table__row" data-ng-repeat="device in devices">
                            <div class="table__data table-col--30">{$ device.name $}</div>
                            <div class="table__data table-col--30">{$ device.mac_address $}</div>
                            <div class="table__data table-col--40">{$ device.ip_address $}</div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
    </div>
    <div class="row" id="power" data-ng-show="!isController && isSuperUser()">
        <div class="wrapper--inner">
            <h2 class="eight-col">Power</h2>
            <div class="four-col last-col u-align--right" data-ng-hide="power.editing">
                <a href="" class="button--secondary button--inline"
                    data-ng-show="canEdit() && power_types.length"
                    data-ng-click="editPower()">Edit</a>
            </div>
            <div class="four-col last-col u-align--right" data-ng-show="power.editing">
                <a href="" class="button--base button--inline"
                    data-ng-click="cancelEditPower()">Cancel</a>
                <button class="button--positive button--inline"
                    data-ng-class="{ secondary: invalidPowerType() }"
                    data-ng-click="saveEditPower()">Save changes</button>
            </div>
            <div class="twelve-col">
                <div class="p-notification--error" data-ng-if="!isRackControllerConnected()">
                    <p class="p-notification__response">
                      <span class="p-notification__status">Error:</span>Editing is currently
                      disabled because no rack controller is current
                      connected to the region.</p>
                </div>
                <div class="p-notification--error" data-ng-if="isRackControllerConnected() && node.power_type == ''">
                    <p class="p-notification__response">
                      <span class="p-notification__status">Error:</span>This node does not
                      have a power type set and MAAS will be unable to
                      control it. Update the power information below.</p>
                </div>
                <div class="p-notification--error" data-ng-if="hasPowerError()">
                    <p class="p-notification__response">
                      <span class="p-notification__status">Error:</span>Power control
                      software for this power type is missing from the rack
                      controller.  To proceed, install the
                      {$ getPowerErrors() $} on the rack controller.</p>
                </div>
                <div class="p-notification--error" data-ng-if="hasPowerEventError()">
                    <p class="p-notification__response">
                      <span class="p-notification__status">Error:</span>{$ getPowerEventErrorText() $}</p>
                </div>
                <div class="p-notification" data-ng-if="power.type.name == 'manual'">
                    <p class="p-notification__response">Power control for
                      this power type will need to be handled manually.</p>
                </div>
                <div class="p-notification" data-ng-if="power.editing && node.power_bmc_node_count > 1">
                    <p class="p-notification__response">This power controller
                      manages {$ node.power_bmc_node_count - 1 $} other
                    {$ node.power_bmc_node_count > 3 ? "nodes" : "node" $}.
                    Changing power parameters will affect these nodes.</p>
                </div>
            </div>
            <form class="form form--stack" class="disabled">
                <fieldset class="form__fieldset six-col ng-hide"
                    data-ng-show="power_types.length"
                    data-ng-disabled="!power.editing"
                    data-maas-power-parameters="power_types"
                    data-ng-model="power">
                </fieldset>
            </form>
        </div>
    </div>
    <div class="row" id="services" data-ng-show="isController">
        <div class="wrapper--inner">
            <div class="twelve-col">
                <h2>Services</h2>
            </div>
            <div data-ng-show="node.node_type == 3 || node.node_type == 4">
                <div class="twelve-col">
                    <h3>Region Controller</h3>
                </div>
                <div class="twelve-col">
                    <ul class="list__tree no-bullets">
                        <li class="list__item">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.regiond) $}"></span>
                                &nbsp;regiond
                                <span data-ng-if="services.regiond.status_info"> &mdash; {$ services.regiond.status_info $}</span>
                            </span>
                        </li>
                        <li class="list__item">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.bind9) $}"></span>
                                &nbsp;bind9
                                <span data-ng-if="services.bind9.status_info"> &mdash; {$ services.bind9.status_info $}</span>
                            </span>
                        </li>
                        <li class="list__item">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.proxy) $}"></span>
                                &nbsp;proxy
                                <span data-ng-if="services.proxy.status_info"> &mdash; {$ services.proxy.status_info $}</span>
                            </span>
                        </li>
                        <li class="list__item" data-ng-if="services.ntp_region">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.ntp_region) $}"></span>
                                &nbsp;ntp
                                <span data-ng-if="services.ntp_region.status_info"> &mdash; {$ services.ntp_region.status_info $}</span>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="twelve-col" data-ng-show="node.node_type == 2 || node.node_type == 4">
                <div class="twelve-col">
                    <h3>Rack Controller</h3>
                </div>
                <div class="twelve-col">
                    <ul class="list__tree no-bullets">
                        <li class="list__item">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.rackd) $}"></span>
                                &nbsp;rackd
                                <span data-ng-if="services.rackd.status_info"> &mdash; {$ services.rackd.status_info $}</span>
                            </span>
                            <ul class="list__tree list__tree--sub-level">
                                <li class="list__item">
                                    <span>
                                        <span class="icon icon--{$ getServiceClass(services.http) $}"></span>
                                        &nbsp;http
                                        <span data-ng-if="services.http.status_info"> &mdash; {$ services.http.status_info $}</span>
                                    </span>
                                </li>
                                <li class="list__item">
                                    <span>
                                        <span class="icon icon--{$ getServiceClass(services.tftp) $}"></span>
                                        &nbsp;tftp
                                        <span data-ng-if="services.tftp.status_info"> &mdash; {$ services.tftp.status_info $}</span>
                                    </span>
                                </li>
                            </ul>
                        </li>
                        <li class="list__item">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.dhcpd) $}"></span>
                                &nbsp;dhcpd
                                <span data-ng-if="services.dhcpd.status_info"> &mdash; {$ services.dhcpd.status_info $}</span>
                            </span>
                        </li>
                        <li class="list__item">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.dhcpd6) $}"></span>
                                &nbsp;dhcpd6
                                <span data-ng-if="services.dhcpd6.status_info"> &mdash; {$ services.dhcpd6.status_info $}</span>
                            </span>
                        </li>
                        <li class="list__item">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.tgt) $}"></span>
                                &nbsp;tgt
                                <span data-ng-if="services.tgt.status_info"> &mdash; {$ services.tgt.status_info $}</span>
                            </span>
                        </li>
                        <li class="list__item" data-ng-if="services.ntp_rack">
                            <span>
                                <span class="icon icon--{$ getServiceClass(services.ntp_rack) $}"></span>
                                &nbsp;ntp
                                <span data-ng-if="services.ntp_rack.status_info"> &mdash; {$ services.ntp_rack.status_info $}</span>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="vlans" data-ng-controller="NodeNetworkingController">
        <div class="row" data-ng-show="isController">
            <div class="wrapper--inner">
                <div class="twelve-col" data-ng-hide="loaded">
                    <h2>Served VLANs</h2>
                    <p class="u-text--loading"><i class="icon icon--loading u-animation--spin"></i>&nbsp;&nbsp;Loading...</p>
                </div>
                <div class="twelve-col" data-ng-show="loaded">
                    <h2>Served VLANs</h2>
                </div>
                <div class="twelve-col">
                    <form class="ng-hide" data-ng-show="loaded">
                        <div class="table">
                            <header class="table__head">
                                <div class="table__row">
                                    <div class="table__header table-col--15">Fabric</div>
                                    <div class="table__header table-col--15">VLAN</div>
                                    <div class="table__header table-col--30">Subnets</div>
                                    <div class="table__header table-col--20">Primary rack</div>
                                    <div class="table__header table-col--20">Secondary rack</div>
                                </div>
                            </header>
                            <main class="table__body">
                                <div class="table__row" data-ng-repeat="vlanRow in vlanTable">
                                    <div class="table__data table-col--15">
                                        <a href="#/fabric/{$ vlanRow['fabric'].id $}">{$ vlanRow['fabric'].name $}</a>
                                    </div>
                                    <div class="table__data table-col--15">
                                        <a href="#/vlan/{$ vlanRow['vlan'].id $}">{$ getVLANText(vlanRow['vlan']) $}</a>
                                    </div>
                                    <div class="table__data table-col--30">
                                        <span data-ng-repeat="subnet in vlanRow['subnets']">
                                            <div class="u-margin--bottom-small">
                                                <a href="#/subnet/{$ subnet.id $}">{$ getSubnetText(subnet) $}</a>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="table__data table-col--20">
                                        <a href="#/node/controller/{$ vlanRow['primary_rack'].system_id $}">{$ vlanRow['primary_rack'].fqdn $}</a>
                                    </div>
                                    <div class="table__data table-col--20">
                                        <a href="#/node/controller/{$ vlanRow['secondary_rack'].system_id $}">{$ vlanRow['secondary_rack'].fqdn $}</a>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="wrapper--inner">
                <div class="twelve-col" data-ng-hide="loaded">
                    <h2>Interfaces</h2>
                    <p><i class="icon icon--loading u-animation--spin"></i>Loading...</p>
                </div>
                <form class="ng-hide" data-ng-show="loaded">
                    <div class="twelve-col">
                        <h2 class="title">Interfaces</h2>
                    </div>
                    <div class="twelve-col" data-ng-if="
                            (!isController && isAllNetworkingDisabled() && isSuperUser()) ||
                            !node.on_network || (!isController && !isUbuntuOS())">
                            <div class="p-notification--error" data-ng-if="!node.on_network">
                                <p class="p-notification__response">
                                  <span class="p-notification__status">Error:</span>Node must be connected to a network.</p>
                            </div>
                            <div class="p-notification" data-ng-if="!isController && isAllNetworkingDisabled() && isSuperUser()">
                                <p class="p-notification__response">Interface
                                  configuration cannot be modified unless the
                                  node is Ready or Broken.</p>
                            </div>
                            <div class="p-notification" data-ng-if="!isController && !isUbuntuOS()">
                                <p class="p-notification__response">
                                  <span class="p-notification__status">Error:</span>Custom network configuration only supported on Ubuntu. Using OS default configuration.</p>
                            </div>
                    </div>
                    <div class="twelve-col">
                      <div class="table table--hover u-margin--bottom">
                          <header class="table__head">
                              <div class="table__row">
                                  <div class="table__header table-col--3"></div>
                                  <div class="table__header table-col--12">
                                      <a class="table__header-link is-active"
                                          data-ng-class="{ 'is-active': column == 'name' }"
                                          data-ng-click="column = 'name'">
                                          Name
                                      </a>
                                      <span class="divide"></span>
                                      <a class="table__header-link" data-ng-class="{ 'is-active': column == 'mac' }"
                                          data-ng-click="column = 'mac'">
                                          MAC
                                      </a>
                                  </div>
                                  <div class="table__header table-col--3"><span data-ng-if="!isController">PXE</span></div>
                                  <div class="table__header table-col--9">Type</div>
                                  <div class="table__header table-col--14">Fabric</div>
                                  <div class="table__header table-col--14">VLAN</div>
                                  <div class="table__header table-col--18">Subnet</div>
                                  <div class="table__header table-col--27">IP Address</div>
                              </div>
                          </header>
                          <main class="table__body" data-selected-rows>
                              <div class="table__row"
                                  data-ng-class="{ disabled: isDisabled(), 'is-active': isInterfaceSelected(interface) && (isNodeEditingAllowed() || isLimitedEditingAllowed(interface)), noEdit: cannotEditInterface(interface) }"
                                  data-ng-repeat="interface in interfaces | removeInterfaceParents:newBondInterface:!isNodeEditingAllowed() | removeInterfaceParents:newBridgeInterface:!isNodeEditingAllowed()">
                                  <div class="table__data table-col--3" aria-label="Select">
                                      <input type="checkbox" class="checkbox" id="{$ getUniqueKey(interface) $}"
                                          data-ng-hide="isAllNetworkingDisabled()"
                                          data-ng-checked="isInterfaceSelected(interface)"
                                          data-ng-click="toggleInterfaceSelect(interface)"
                                          data-ng-disabled="isDisabled()"
                                          data-ng-if="!isController && isNodeEditingAllowed()">
                                      <label for="{$ getUniqueKey(interface) $}"></label>
                                  </div>
                                  <div class="table__data table-col--12" aria-label="Name" data-ng-show="column == 'name'">
                                      <span data-ng-if="!isEditing(interface)">{$ interface.name $}</span>
                                      <input type="text" class="table__input"
                                          data-ng-if="isEditing(interface) && interface.type != 'vlan'"
                                          data-ng-model="editInterface.name"
                                          data-ng-class="{ 'has-error': isInterfaceNameInvalid(editInterface) }">
                                  </div>
                                  <div class="table__data table-col--12 ng-hide" data-ng-show="column == 'mac'">
                                      {$ interface.mac_address $}
                                  </div>
                                  <div class="table__data table-col--3 u-align--center" aria-label="Boot interface">
                                      <input type="radio" name="bootInterface" id="{$ interface.name $}" checked
                                          data-ng-if="!isController && isBootInterface(interface)" class="u-display--desktop">
                                      <label for="{$ interface.name $}" class="u-display--desktop"></label>
                                      <span class="u-display--mobile" data-ng-if="!isController && isBootInterface(interface)">Yes</span>
                                      <span class="u-display--mobile" data-ng-if="!isController && !isBootInterface(interface)">No</span>
                                  </div>
                                  <div class="table__data table-col--9" aria-label="Type">
                                      <span data-ng-if="!isEditing(interface)">{$ getInterfaceTypeText(interface) $}</span>
                                  </div>
                                  <div class="table__data table-col--14" aria-label="Fabric">
                                      <span data-ng-if="!isEditing(interface)">{$ interface.fabric.name || "Disconnected" $}</span>
                                  </div>
                                  <div class="table__data table-col--14" aria-label="VLAN">
                                      <span data-ng-if="!isEditing(interface)">{$ getVLANText(interface.vlan) $}</span>
                                  </div>
                                  <div class="table__data table-col--18" aria-label="Subnet">
                                      <span data-ng-if="!isEditing(interface) && interface.fabric">{$ getSubnetText(interface.subnet) $}</span>
                                      <span data-ng-if="isAllNetworkingDisabled() && interface.discovered[0].subnet_id">
                                          {$ getSubnetText(getSubnet(interface.discovered[0].subnet_id)) $}
                                      </span>
                                  </div>
                                  <div class="table__data table-col--19" aria-label="IP Address">
                                      <span data-ng-if="!isEditing(interface) && !interface.discovered[0].ip_address && interface.fabric">
                                          {$ interface.ip_address $} ({$ getLinkModeText(interface) $})
                                      </span>
                                      <span data-ng-if="!isEditing(interface) && interface.discovered[0].ip_address && interface.fabric">
                                          {$ interface.discovered[0].ip_address $} (DHCP)
                                      </span>
                                  </div>
                                  <div class="table__data table--mobile-controls  table-col--8">
                                      <div class="table__controls u-align--right" data-ng-if="isNodeEditingAllowed() || isLimitedEditingAllowed(interface)">
                                          <a class="u-display--desktop icon icon--add tooltip"
                                              aria-label="Add Alias or VLAN"
                                              data-ng-if="canAddAliasOrVLAN(interface)"
                                              data-ng-click="quickAdd(interface)"></a>
                                          <a class="u-display--desktop icon icon--edit tooltip"
                                              data-ng-if="!cannotEditInterface(interface)"
                                              aria-label="Edit"
                                              data-ng-click="edit(interface)"></a>
                                          <a class="u-display--desktop icon icon--delete tooltip u-margin--left"
                                              data-ng-if="canBeRemoved()"
                                              aria-label="Remove"
                                              data-ng-click="quickRemove(interface)"></a>
                                          <a class="button--secondary u-display--mobile"
                                              aria-label="Add Alias or VLAN"
                                              data-ng-if="canAddAliasOrVLAN(interface)"
                                              data-ng-click="quickAdd(interface)">Add alias or VLAN</a>
                                          <a class="button--secondary u-display--mobile"
                                              data-ng-if="!cannotEditInterface(interface)"
                                              aria-label="Edit"
                                              data-ng-click="edit(interface)">Edit interface</a>
                                          <a class="button--secondary u-display--mobile"
                                              data-ng-if="canBeRemoved()"
                                              aria-label="Remove"
                                              data-ng-click="quickRemove(interface)">Remove interface</a>
                                      </div>
                                  </div>
                                  <div class="table__dropdown table__dropdown--info" data-ng-if="isShowingMembers(interface)">
                                      <div class="table__row" data-ng-class="{ 'is-active': isShowingMembers(interface) }" data-ng-repeat="member in interface.members">
                                          <div data-ng-show="isShowingMembers(interface)">
                                              <div class="table__data u-padding--top-none table-col--3"></div>
                                              <div class="table__data u-padding--top-none table-col--15"
                                                  data-ng-show="column == 'name'">{$ member.name $}</div>
                                              <div class="table__data u-padding--top-none table-col--15 ng-hide"
                                                  data-ng-show="column == 'mac'">{$ member.mac_address $}</div>
                                              <div class="table__data u-padding--top-none table-col--15">{$ getInterfaceTypeText(member) $}</div>
                                              <div class="table__data u-padding--top-none table-col--67">
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                                  <div data-ng-if="isNodeEditingAllowed() || isLimitedEditingAllowed(interface)">
                                      <div class="table__dropdown" data-ng-if="isShowingAdd() || isEditing(interface) || isShowingDeleteConfirm() || isShowingAdd() && !newInterface.saving">
                                          <div class="table__dropdown-title">
                                              <h2 data-ng-click="cancel()" class="u-float--left">
                                                 <span data-ng-if="canAddAlias(newInterface.parent)">Adding alias</span>
                                                 <span data-ng-if="canAddVLAN(newInterface.parent)">Adding VLAN</span>
                                                 <span data-ng-if="isEditing(interface)">Editing {$ interface.name $}</span>
                                                 <span data-ng-if="isShowingDeleteConfirm()">Removing {$ interface.name $}</span>
                                              </h2>
                                              <i data-ng-click="cancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                          </div>
                                          <div class="table__row form form--stack" data-ng-class="{ 'is-active': isEditing(interface) || isShowingAdd() }">
                                              <div class="table__data table-col--100" data-ng-if="isShowingAdd()">
                                                  <fieldset class="form__fieldset six-col">
                                                      <dl>
                                                          <dt class="two-col">Name</dt>
                                                              <dd class="four-col last-col">{$ getAddName() $}</dd>
                                                      </dl>
                                                      <div class="form__group">
                                                          <label for="type" class="two-col">Type</label>
                                                          <select name="type" class="three-col"
                                                              data-ng-model="newInterface.type"
                                                              data-ng-change="addTypeChanged()">
                                                              <option value="alias" data-ng-show="canAddAlias(newInterface.parent)">Alias</option>
                                                              <option value="vlan" data-ng-show="canAddVLAN(newInterface.parent)">VLAN</option>
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="newInterface.type === 'vlan'">
                                                          <label class="two-col">Tags</label>
                                                          <div class="form__group-input three-col last-col">
                                                              <tags-input ng-model="newInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                          </div>
                                                      </div>
                                                  </fieldset>
                                                  <fieldset class="form__fieldset six-col last-col">
                                                      <div class="form__group">
                                                          <label for="fabric" class="two-col">Fabric</label>
                                                          <select name="fabric" class="three-col"
                                                              data-ng-model="newInterface.parent.fabric"
                                                              data-ng-options="fabric as fabric.name for fabric in fabrics"
                                                              disabled="disabled">
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="newInterface.type === 'alias'">
                                                          <label for="vlan" class="two-col">VLAN</label>
                                                          <select name="vlan" class="three-col"
                                                              data-ng-model="newInterface.vlan"
                                                              data-ng-options="vlan as getVLANText(vlan) for vlan in vlans"
                                                              disabled="disabled">
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="newInterface.type === 'vlan'">
                                                          <label for="vlan" class="two-col">VLAN</label>
                                                          <select name="vlan" class="three-col"
                                                              data-ng-model="newInterface.vlan"
                                                              data-ng-change="vlanChanged(newInterface)"
                                                              data-ng-options="vlan as getVLANText(vlan) for vlan in vlans | removeDefaultVLAN | filterByFabric:newInterface.parent.fabric | filterByUnusedForInterface:newInterface.parent:originalInterfaces">
                                                          </select>
                                                      </div>
                                                      <div class="form__group">
                                                          <label for="subnet" class="two-col">Subnet</label>
                                                          <select name="subnet" class="three-col"
                                                              ng-model="newInterface.subnet"
                                                              data-ng-change="subnetChanged(newInterface)"
                                                              data-ng-options="subnet as getSubnetText(subnet) for subnet in subnets | filterByVLAN:newInterface.vlan">
                                                              <option value="" data-ng-hide="newInterface.type === 'alias'">Unconfigured</option>
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="!isLinkModeDisabled(newInterface)">
                                                          <label for="link-mode" class="two-col">IP mode</label>
                                                          <select name="link-mode" class="three-col"
                                                              data-ng-model="newInterface.mode"
                                                              data-ng-change="modeChanged(newInterface)"
                                                              data-ng-options="mode.mode as mode.text for mode in modes | filterLinkModes:newInterface">
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="newInterface.mode == 'static'">
                                                          <label for="ip-address" class="two-col">IP address</label>
                                                          <input name="ip-address" type="text" class="three-col"
                                                              placeholder="IP address (optional)"
                                                              ng-model="newInterface.ip_address"
                                                              data-ng-class="{ 'has-error': isIPAddressInvalid(newInterface) }">
                                                      </div>
                                                  </fieldset>
                                              </div>
                                              <div class="table__data table-col--100" data-ng-if="isEditing(interface)">
                                                  <fieldset class="form__fieldset six-col">
                                                      <dl>
                                                          <dt class="two-col">Type</dt>
                                                              <dd class="four-col last-col">{$ getInterfaceTypeText(interface) $}</dd>
                                                      </dl>
                                                      <div class="form__group" data-ng-if="interface.type != 'alias' && interface.type != 'vlan'">
                                                          <label for="mac" class="two-col">MAC address</label>
                                                          <input name="mac" type="text" class="three-col"
                                                              placeholder="00:00:00:00:00:00"
                                                              data-ng-model="editInterface.mac_address"
                                                              data-ng-class="{ 'has-error': isMACAddressInvalid(editInterface.mac_address, true) }">
                                                      </div>
                                                      <div class="form__group" data-ng-if="!isLimitedEditingAllowed(interface)">
                                                          <label class="two-col" data-ng-if="interface.type != 'alias'">Tags</label>
                                                          <div class="form__group-input three-col last-col" data-ng-if="interface.type != 'alias'">
                                                              <tags-input ng-model="editInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                          </div>
                                                      </div>
                                                  </fieldset>
                                                  <fieldset class="form__fieldset six-col last-col" data-ng-if="!isLimitedEditingAllowed(interface)">
                                                      <div class="form__group">
                                                          <label for="fabric" class="two-col">Fabric</label>
                                                          <select name="fabric" class="three-col"
                                                              data-ng-model="editInterface.fabric"
                                                              data-ng-change="fabricChanged(editInterface)"
                                                              data-ng-disabled="interface.type === 'vlan'"
                                                              data-ng-options="fabric as fabric.name for fabric in fabrics">
                                                                  <option value="">Disconnected</option>
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="editInterface.fabric">
                                                          <label for="vlan" class="two-col">VLAN</label>
                                                          <select name="vlan" class="three-col"
                                                              ng-model="editInterface.vlan"
                                                              data-ng-disabled="interface.type === 'physical' || interface.type === 'bond'"
                                                              data-ng-change="vlanChanged(editInterface)"
                                                              data-ng-options="vlan as getVLANText(vlan) for vlan in vlans | removeDefaultVLANIfVLAN:interface.type | filterByFabric:editInterface.fabric">
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="editInterface.fabric">
                                                          <label for="subnet" class="two-col">Subnet</label>
                                                          <select name="subnet" class="three-col"
                                                              ng-model="editInterface.subnet"
                                                              data-ng-change="subnetChanged(newInterface)"
                                                              data-ng-options="subnet as getSubnetText(subnet) for subnet in subnets | filterByVLAN:editInterface.vlan">
                                                              <option value="" data-ng-hide="interface.links.length > 1">Unconfigured</option>
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="editInterface.fabric && !isLinkModeDisabled(editInterface)">
                                                          <label for="link-mode" class="two-col">IP mode</label>
                                                          <select name="link-mode" class="three-col"
                                                              ng-model="editInterface.mode"
                                                              data-ng-change="modeChanged(editInterface)"
                                                              data-ng-options="mode.mode as mode.text for mode in modes | filterLinkModes:editInterface">
                                                          </select>
                                                      </div>
                                                      <div class="form__group" data-ng-if="editInterface.fabric && editInterface.mode == 'static'">
                                                          <label for="ip-address" class="two-col">IP address</label>
                                                          <div class="form__group-input three-col last-col">
                                                              <input name="ip-address" type="text"
                                                                  placeholder="IP address (optional)"
                                                                  ng-model="editInterface.ip_address"
                                                                  data-ng-class="{ 'has-error': isIPAddressInvalid(editInterface) }">
                                                              <ul class="errors u-margin--bottom-none form__group--errors" data-ng-if="getInterfaceError(editInterface)">
                                                                  <li>{$ getInterfaceError(editInterface) $}</li>
                                                              </ul>
                                                          </div>
                                                      </div>
                                                  </fieldset>
                                              </div>
                                          </div>
                                          <div class="table__row is-active" data-ng-if="isShowingDeleteConfirm()">
                                              <div class="table__data u-float--left">
                                                    <p><span class="icon icon--warning u-margin--right-small"></span> Are you sure you want to remove this {$ getRemoveTypeText(interface) $}?</p>
                                              </div>
                                              <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="cancel()">Cancel</a>
                                                    <button class="button--destructive button--inline" data-ng-click="confirmRemove(interface)">Remove</button>
                                              </div>
                                          </div>
                                          <div class="table__row is-active" data-ng-if="isEditing(interface)">
                                              <div class="table__data u-float--right">
                                                  <a class="button--base button--inline" data-ng-click="editCancel()">Cancel</a>
                                                  <button class="button--positive button--inline" data-ng-disabled="isInterfaceNameInvalid(editInterface) || isIPAddressInvalid(editInterface) || isMACAddressInvalid(editInterface.mac_address, true)" data-ng-click="editSave()">Save</button>
                                              </div>
                                          </div>
                                          <div class="table__row is-active" data-ng-if="isShowingAdd() && !newInterface.saving">
                                              <div class="table__data u-float--left">
                                                  <button class="button--secondary button--inline"
                                                      data-ng-click="addInterface('alias')"
                                                      data-ng-show="canAddAlias(interface)">Add <span data-ng-show="newInterface.type === 'alias'">another </span>alias</button>
                                                  <button class="button--secondary button--inline"
                                                      data-ng-click="addInterface('vlan')"
                                                      data-ng-show="canAddAnotherVLAN(interface)">Add <span data-ng-show="newInterface.type === 'vlan'">another </span>VLAN</button>
                                              </div>
                                              <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="cancel()">Cancel</a>
                                                    <button class="button--positive button--inline" data-ng-click="addInterface()">Add</button>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              <div class="table__row is-active" data-ng-if="isShowingCreateBond() && isNodeEditingAllowed()">
                                  <div class="table__data table-col--3">
                                      <input type="checkbox" class="checkbox" name="bond-create" disabled="disabled" checked />
                                      <label for="bond-create"></label>
                                  </div>
                                  <div class="table__data table-col--12">
                                      <input type="text" name="name" class="table__input editible"
                                          data-ng-class="{ 'has-error': isInterfaceNameInvalid(newBondInterface) }"
                                          data-ng-model="newBondInterface.name">
                                  </div>
                                  <div class="table__data table-col--3 u-align--center">
                                      <input type="radio" name="bondBootInterface" checked id="{$ newBondInterface $}"
                                          data-ng-if="hasBootInterface(newBondInterface)">
                                      <label for="{$ newBondInterface $}"></label>
                                  </div>
                                  <div class="table__data table-col--82"></div>
                                  <div class="table__dropdown">
                                    <div class="table__dropdown-title">
                                        <h2 data-ng-click="cancel()" class="u-float--left">&lsaquo;&nbsp;&nbsp;
                                           Create bond
                                        </h2>
                                        <i data-ng-click="cancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                    </div>
                                    <div class="table__row form form--stack is-active">
                                        <div class="table__data table-col--100">
                                            <div class="form__fieldset six-col">
                                                  <div class="form__group u-display--mobile">
                                                      <label for="bond-name" class="two-col">Name</label>
                                                      <input type="text" name="name" id="bond-name" class="three-col"
                                                          data-ng-class="{ 'has-error': isInterfaceNameInvalid(newBondInterface) }"
                                                          data-ng-model="newBondInterface.name">
                                                  </div>
                                                  <div class="form__group">
                                                      <label for="bond-mode" class="two-col">Bond mode</label>
                                                      <select name="bond-mode" class="three-col"
                                                          data-ng-model="newBondInterface.mode"
                                                          data-ng-options="mode[0] as mode[1] for mode in bondOptions.modes">
                                                      </select>
                                                  </div>
                                                  <div class="form__group">
                                                      <label for="mac" class="two-col">MAC address</label>
                                                      <input type="text" name="mac" class="three-col"
                                                          data-ng-model="newBondInterface.macAddress"
                                                          data-ng-class="{ 'has-error': isMACAddressInvalid(newBondInterface.macAddress) }"
                                                          data-ng-placeholder="getInterfacePlaceholderMACAddress(newBondInterface)">
                                                  </div>
                                                  <div class="form__group">
                                                      <label class="two-col">Tags</label>
                                                      <div class="form__Group-input three-col last-col">
                                                          <tags-input ng-model="newBondInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                      </div>
                                                  </div>
                                            </div>
                                            <div class="form__fieldset six-col last-col">
                                                <div class="form__group" data-ng-if="showLACPRate()">
                                                    <label for="lacp-rate" class="two-col">LACP rate</label>
                                                    <select name="lacp-rate" class="three-col"
                                                        data-ng-model="newBondInterface.lacpRate"
                                                        data-ng-options="rate[0] as rate[1] for rate in bondOptions.lacp_rates">
                                                    </select>
                                                </div>
                                                <div class="form__group" data-ng-if="showXMITHashPolicy()">
                                                    <label for="xmit-hash-policy" class="two-col">XMIT hash policy</label>
                                                    <select name="xmit-hash-policy" class="three-col"
                                                        data-ng-model="newBondInterface.xmitHashPolicy"
                                                        data-ng-options="xmit[0] as xmit[1] for xmit in bondOptions.xmit_hash_policies">
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data table-col--100">
                                            <div class="table__row table__row--head is-active u-border--none u-display--desktop">
                                              <div class="table__header table-col--15">Name</div>
                                              <div class="table__header table-col--15">Type</div>
                                              <div class="table__header table-col--70">Primary</div>
                                            </div>
                                            <div class="table__row u-border--none is-active"
                                                data-ng-repeat="parent in newBondInterface.parents | orderBy:'name'">
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Name">{$ parent.name $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Type">{$ getInterfaceTypeText(parent) $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--70" aria-label="Primary">
                                                    <input type="radio" name="bondPrimary" id="{$ parent.name $}" data-ng-model="newBondInterface.primary" data-ng-value="parent">
                                                    <label for="{$ parent.name $}"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data u-float--right">
                                            <a class="button--base button--inline" data-ng-click="cancel()">Cancel</a>
                                            <button class="button--positive button--inline"
                                                data-ng-click="addBond()"
                                                data-ng-disabled="cannotAddBond()">Save</button>
                                        </div>
                                    </div>
                                  </div>
                              </div>
                              <div class="table__row is-active" data-ng-if="isShowingCreateBridge() && isNodeEditingAllowed()">
                                  <div class="table__data table-col--3">
                                      <input type="checkbox" class="checkbox" id="bond-create" disabled="disabled" checked />
                                      <label for="bridge-create"></label>
                                  </div>
                                  <div class="table__data table-col--12">
                                      <input type="text" class="table__input editible"
                                          data-ng-class="{ 'has-error': isInterfaceNameInvalid(newBridgeInterface) }"
                                          data-ng-model="newBridgeInterface.name">
                                  </div>
                                  <div class="table__data table-col--3">
                                      <input class="align-center" type="radio" id="{$ newBridgeInterface $}" name="bridgeBootInterface" checked
                                          data-ng-if="hasBootInterface(newBridgeInterface)">
                                      <label for="{$ newBridgeInterface $}"></label>
                                  </div>
                                  <div class="table__data table-col--82"></div>
                                  <div class="table__dropdown">
                                    <div class="table__dropdown-title">
                                        <h2 data-ng-click="cancel()" class="u-float--left">&lsaquo;&nbsp;&nbsp;
                                           Create bridge
                                        </h2>
                                        <i data-ng-click="cancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                    </div>
                                    <div class="table__row form form--stack is-active">
                                        <div class="table__data table-col--100">
                                            <div class="form__fieldset six-col">
                                                  <div class="form__group u-display--mobile">
                                                      <label for="bridge-name" class="two-col">Name</label>
                                                      <input type="text" id="bridge-name" class="three-col"
                                                          data-ng-class="{ 'has-error': isInterfaceNameInvalid(newBridgeInterface) }"
                                                          data-ng-model="newBridgeInterface.name">
                                                  </div>
                                                  <dl>
                                                      <dt class="two-col">Primary</dt>
                                                          <dd class="four-col last-col">{$ newBridgeInterface.primary.name $}</dd>
                                                  </dl>
                                                  <div class="form__group">
                                                      <label for="mac" class="two-col">MAC address</label>
                                                      <input type="text" name="mac" class="three-col"
                                                          data-ng-model="newBridgeInterface.macAddress"
                                                          data-ng-class="{ 'has-error': isMACAddressInvalid(newBridgeInterface.macAddress) }"
                                                          data-ng-placeholder="getInterfacePlaceholderMACAddress(newBridgeInterface)">
                                                  </div>
                                                  <div class="form__group">
                                                      <label class="two-col">Tags</label>
                                                      <div class="form__group-input three-col last-col">
                                                          <tags-input ng-model="newBridgeInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                      </div>
                                                  </div>
                                            </div>
                                            <div class="form__fieldset six-col last-col">
                                                <div class="form__group">
                                                    <label for="stp" class="two-col form__group-label">STP</label>
                                                    <div class="form__group-input three-col">
                                                        <div class="onoffswitch">
                                                            <input input id="bridge_stp" type="checkbox" name="bridge_stp" class="onoffswitch-checkbox"
                                                                data-ng-model="newBridgeInterface.bridge_stp">
                                                            <label class="onoffswitch-label" for="bridge_stp">
                                                                <span class="onoffswitch-inner"></span>
                                                                <span class="onoffswitch-switch"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form__group" data-ng-if="newBridgeInterface.bridge_stp">
                                                    <label for="fd" class="two-col">Forward delay</label>
                                                    <input type="text" name="mac" class="three-col"
                                                        data-ng-model="newBridgeInterface.bridge_fd">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data u-float--right">
                                            <a class="button--base button--inline" data-ng-click="cancel()">Cancel</a>
                                            <button class="button--positive button--inline"
                                                data-ng-click="addBridge()"
                                                data-ng-disabled="cannotAddBridge()">Save</button>
                                        </div>
                                    </div>
                                  </div>
                              </div>
                              <div class="table__row is-active" data-ng-show="isShowingCreatePhysical()">
                                  <div class="table__data table-col--3">
                                      <input type="checkbox" class="checkbox" id="interface-create" disabled="disabled" checked />
                                      <label for="interface-create"></label>
                                  </div>
                                  <div class="table__data table-col--12">
                                      <input type="text" class="table__input"
                                          data-ng-class="{ 'has-error': isInterfaceNameInvalid(newInterface) }"
                                          data-ng-model="newInterface.name">
                                  </div>
                                  <div class="table__data table-col--85"></div>
                                  <div class="table__dropdown">
                                      <div class="table__dropdown-title">
                                          <h2 data-ng-click="cancel()" class="u-float--left">&lsaquo;&nbsp;&nbsp;New interface
                                          </h2>
                                          <i data-ng-click="cancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                      </div>
                                      <div class="table__row form form--stack is-active">
                                          <div class="table__data table-col--100">
                                              <div class="form__fieldset six-col">
                                                  <div class="form__group u-display--mobile">
                                                      <label for="new-interface-name" class="two-col">Name</label>
                                                      <input type="text" class="three-col" id="new-interface-name"
                                                          data-ng-class="{ 'has-error': isInterfaceNameInvalid(newInterface) }"
                                                          data-ng-model="newInterface.name">
                                                  </div>
                                                  <dl>
                                                      <dt class="two-col">Type</dt>
                                                          <dd class="four-col last-col">Physical</dd>
                                                  </dl>
                                                  <div class="form__group">
                                                      <label for="mac" class="two-col">MAC address</label>
                                                      <input type="text" name="mac" class="three-col"
                                                          data-ng-model="newInterface.macAddress"
                                                          data-ng-class="{ 'has-error': isMACAddressInvalid(newInterface.macAddress, false) || newInterface.macError }">
                                                  </div>
                                                  <div class="form__group">
                                                      <label class="two-col">Tags</label>
                                                      <div class="form__group-input three-col last-col">
                                                          <tags-input ng-model="newInterface.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                      </div>
                                                  </div>
                                              </div>
                                              <div class="form__fieldset six-col last-col">
                                                  <div class="form__group">
                                                      <label for="fabric" class="two-col">Fabric</label>
                                                      <select name="fabric" class="three-col"
                                                          data-ng-model="newInterface.fabric"
                                                          data-ng-change="fabricChanged(newInterface)"
                                                          data-ng-options="fabric as fabric.name for fabric in fabrics">
                                                      </select>
                                                  </div>
                                                  <div class="form__group">
                                                      <label for="vlan" class="two-col">VLAN</label>
                                                      <select name="vlan" class="three-col"
                                                          data-ng-model="newInterface.vlan"
                                                          data-ng-options="vlan as getVLANText(vlan) for vlan in vlans"
                                                          disabled="disabled">
                                                      </select>
                                                  </div>
                                                  <div class="form__group">
                                                      <label for="subnet" class="two-col">Subnet</label>
                                                      <select name="subnet" class="three-col"
                                                          ng-model="newInterface.subnet"
                                                          data-ng-change="subnetChanged(newInterface)"
                                                          data-ng-options="subnet as getSubnetText(subnet) for subnet in subnets | filterByVLAN:newInterface.vlan">
                                                          <option value="" data-ng-hide="newInterface.type === 'alias'">Unconfigured</option>
                                                      </select>
                                                  </div>
                                                  <div class="form__group" data-ng-if="!isLinkModeDisabled(newInterface)">
                                                      <label for="link-mode" class="two-col">IP mode</label>
                                                      <select name="link-mode" class="three-col"
                                                          data-ng-model="newInterface.mode"
                                                          data-ng-change="modeChanged(newInterface)"
                                                          data-ng-options="mode.mode as mode.text for mode in modes | filterLinkModes:newInterface">
                                                      </select>
                                                  </div>
                                                  <div class="form__group" data-ng-if="newInterface.mode == 'static'">
                                                      <label for="ip-address" class="two-col">IP address</label>
                                                      <input name="ip-address" type="text" class="three-col"
                                                          placeholder="IP address (optional)"
                                                          ng-model="newInterface.ip_address"
                                                          data-ng-class="{ 'has-error': isIPAddressInvalid(newInterface) }">
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="table__row is-active">
                                          <div class="table__data u-float--left" data-ng-show="newInterface.errorMsg">
                                              <span class="icon icon--error u-margin--right-small"></span>{$ newInterface.errorMsg $}
                                          </div>
                                          <div class="table__data u-float--right">
                                              <a class="button--base button--inline" data-ng-click="cancel()">Cancel</a>
                                              <button class="button--positive button--inline"
                                                  data-ng-click="addPhysicalInterface()"
                                                  data-ng-disabled="cannotAddPhysicalInterface()">Save</button>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </main>
                      </div>
                      <div data-ng-if="!isController" data-ng-hide="isAllNetworkingDisabled() || isShowingCreateBond() || isShowingCreatePhysical()">
                          <a class="button--secondary button--inline"
                              data-ng-disabled="selectedMode !== null"
                              data-ng-click="showCreatePhysical()">Add interface</a>
                          <a class="button--secondary button--inline"
                              data-ng-disabled="!canCreateBond()"
                              data-ng-click="showCreateBond()">Create bond</a>
                          <a class="button--secondary button--inline"
                              data-ng-disabled="!canCreateBridge()"
                              data-ng-click="showCreateBridge()">Create bridge</a>
                      </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="row" id="storage" data-ng-hide="isController">
        <div class="wrapper--inner" ng-controller="NodeStorageController">
            <form>
                <div class="twelve-col">
                    <h2 class="title">Storage</h2>
                </div>
                <div class="p-notification--error ng-hide" data-ng-hide="has_disks">
                    <p class="p-notification__response">
                      <span class="p-notification__status">Error:</span>No storage information. Commissioning this node will gather the storage information.</p>
                </div>
                <div class="p-notification ng-hide" data-ng-show="isAllStorageDisabled() && isSuperUser()">
                    <p class="p-notification__response">Storage configuration cannot be modified unless the node is Ready or Allocated.</p>
                </div>
                <div class="p-notification ng-hide" data-ng-show="isAllStorageDisabled() && !isSuperUser()">
                    <p class="p-notification__response">Storage configuration cannot be modified unless the node is Ready or Allocated and you own the node.</p>
                </div>
                <div class="p-notification ng-hide" data-ng-show="!isUbuntuOS()">
                    <p class="p-notification__response">Custom storage configuration only supported on Ubuntu. Using flat layout.</p>
                </div>
                <div data-ng-repeat="issue in node.storage_layout_issues" class="p-notification--error ng-hide" data-ng-show="hasStorageLayoutIssues()">
                    <p class="p-notification__response">
                      <span class="p-notification__status">Error:</span>{$ issue $}
                    </p>
                </div>
                <div class="twelve-col padding-bottom" ng-controller="NodeFilesystemsController">
                    <h3>File systems</h3>
                    <section class="table">
                        <header class="table__head">
                            <div class="table__row">
                                <div class="table__header table-col--18">Name</div>
                                <div class="table__header table-col--10">Size</div>
                                <div class="table__header table-col--10">File system</div>
                                <div class="table__header table-col--32">Mount point</div>
                                <div class="table__header table-col--20">Mount options</div>
                            </div>
                        </header>
                        <main class="table__body">
                            <div class="table__row" data-ng-hide="filesystems.length">
                                <div class="table__header table-col--100">
                                    No filesystems defined.
                                </div>
                            </div>
                            <div data-ng-repeat="filesystem in filesystems">
                                <div class="table__row"
                                    data-ng-class="{ 'is-active': filesystem.$selected }">
                                    <div class="table__data table-col--18" aria-label="Name">{$ filesystem.name $}</div>
                                    <div class="table__data table-col--10" aria-label="Size">{$ filesystem.size_human $}</div>
                                    <div class="table__data table-col--10" aria-label="File system">{$ filesystem.fstype $}</div>
                                    <div class="table__data table-col--32" aria-label="Mount point">{$ filesystem.mount_point $}</div>
                                    <div class="table__data table-col--20" aria-label="Mount options">{$ filesystem.mount_options $}</div>
                                    <div class="table__data table-col--10 table--mobile-controls">
                                        <div class="table__controls">
                                            <a class="u-display--desktop icon icon--unmount tooltip" aria-label="Unmount" data-ng-click="quickFilesystemUnmount(filesystem)"
                                               data-ng-show="!isAllStorageDisabled() && usesStorage(filesystem.fstype)">Unmount</a>
                                            <a class="u-display--desktop icon icon--delete tooltip" aria-label="Remove" data-ng-click="quickFilesystemDelete(filesystem)"
                                               data-ng-show="!isAllStorageDisabled()">Remove</a>
                                           <a class="button--secondary u-display--mobile" aria-label="Unmount" data-ng-click="quickFilesystemUnmount(filesystem)"
                                              data-ng-show="!isAllStorageDisabled() && usesStorage(filesystem.fstype)">Unmount filesystem</a>
                                           <a class="button--secondary u-display--mobile" aria-label="Remove" data-ng-click="quickFilesystemDelete(filesystem)"
                                              data-ng-show="!isAllStorageDisabled()">Remove filesystem</a>
                                        </div>
                                    </div>
                                    <div class="table__dropdown" data-ng-if="filesystemMode === 'unmount' || filesystemMode === 'delete'">
                                        <div class="table__dropdown-title">
                                            <h2 data-ng-click="filesystemCancel()" class="u-float--left">
                                                <span data-ng-if="filesystemMode === 'unmount'">Unmounting {$ filesystem.name $}</span>
                                                <span data-ng-if="filesystemMode === 'delete'">Removing {$ filesystem.name $}</span>
                                            </h2>
                                            <i data-ng-click="filesystemCancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                        </div>
                                        <div class="table__row" data-ng-if="filesystemMode !== null && filesystemMode !== 'multi'" data-ng-class="{ 'is-active': filesystemMode !== null && filesystemMode !== 'multi' }">
                                            <div data-ng-if="filesystemMode === 'unmount'">
                                                <div class="table__data u-float--left u-margin--top-tiny">
                                                    <p><span class="icon icon--warning u-margin--right-small"></span> Are you sure you want to unmount this filesystem?</p>
                                                </div>
                                                <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="filesystemCancel()">Cancel</a>
                                                    <button class="button--secondary button--inline" data-ng-click="filesystemConfirmUnmount(filesystem)">Unmount</button>
                                                </div>
                                            </div>
                                            <div data-ng-if="filesystemMode === 'delete'">
                                                <div class="table__data u-float--left u-margin--top-tiny">
                                                    <p><span class="icon icon--warning u-margin--right-small"></span> Are you sure you want to remove this {$ getRemoveTypeText(filesystem) $}?</p>
                                                </div>
                                                <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="filesystemCancel(filesystem)">Cancel</a>
                                                    <button class="button--destructive button--inline" data-ng-click="filesystemConfirmDelete(filesystem)">Remove</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="table__row is-active" data-ng-if="dropdown" ng-switch="dropdown">
                                <!-- Adding a new TMPFS or RAMFPS file system -->
                                <div class="table__dropdown" ng-controller="NodeAddSpecialFilesystemController" ng-switch-when="special">
                                    <div class="table__dropdown-title">
                                        <h2 data-ng-click="cancel()" class="u-float--left">Adding filesystem</h2>
                                        <i data-ng-click="cancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                    </div>
                                    <div class="table__row form form--stack is-active">
                                        <div class="table__data table-col--100">
                                            <fieldset class="form__fieldset six-col">
                                                <dl>
                                                    <dt class="two-col">Description</dt>
                                                    <dd class="three-col" ng-bind="description"></dd>
                                                </dl>
                                                <div class="form__group">
                                                    <label for="file-sys" class="two-col">Filesystem</label>
                                                    <select name="type" id="type" class="table__input three-col no-margin"
                                                            ng-model="filesystem.fstype">
                                                        <option value="" disabled="disabled">Select type</option>
                                                        <option value="tmpfs">tmpfs</option>
                                                        <option value="ramfs">ramfs</option>
                                                    </select>
                                                </div>
                                            </fieldset>
                                            <fieldset class="form__fieldset six-col last-col">
                                                <div class="form__group">
                                                    <label class="two-col" for="mount-point">Mount point</label>
                                                    <input type="text" id="mount-point" class="table__input three-col"
                                                           placeholder="Absolute path" ng-model="filesystem.mountPoint"
                                                           ng-class="{ 'has-error': isMountPointInvalid(filesystem.mountPoint) }">
                                                </div>
                                                <div class="form__group">
                                                    <label for="mount-options" class="two-col">Mount options</label>
                                                    <input type="text" id="mount-options" class="table__input three-col"
                                                           placeholder="Separated by commas, no spaces" ng-model="filesystem.mountOptions">
                                                </div>
                                            </fieldset>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                      <div class="table__data u-float--right">
                                          <a class="button--base button--inline"
                                              ng-click="cancel()">Cancel</a>
                                          <button class="button--secondary button--inline ng-binding"
                                              ng-disabled="!canMount()"
                                              ng-click="mount()">Mount</button>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </section>
                    <a class="button--secondary button--inline tooltip"
                       aria-label="Create a tmpfs or ramfs filesystem"
                       data-ng-disabled="dropdown !== null"
                       data-ng-if="!isAllStorageDisabled()"
                       data-ng-click="addSpecialFilesystem()">Add special filesystem</a>
                </div>
                <div data-ng-show="cachesets.length">
                    <div class="twelve-col">
                        <h3>Available cache sets</h3>
                    </div>
                    <div class="twelve-col">
                      <section class="table table--hover">
                        <header class="table__head">
                            <div class="table__row">
                                <div class="table__header table-col--3"></div>
                                <div class="table__header table-col--15">Name</div>
                                <div class="table__header table-col--27">Size</div>
                                <div class="table__header table-col--55">Used by</div>
                            </div>
                        </header>
                        <main class="table__body">
                            <div data-ng-repeat="cacheset in cachesets">
                                <div class="table__row"
                                    data-ng-class="{ 'is-active': cacheset.$selected }">
                                    <div class="table__data table-col--3 u-display--desktop"></div>
                                    <div class="table__data table-col--15" aria-label="Name">{$ cacheset.name $}</div>
                                    <div class="table__data table-col--27" aria-label="Size">{$ cacheset.size_human $}</div>
                                    <div class="table__data table-col--45" aria-label="Used by">{$ cacheset.used_by $}</div>
                                    <div class="table__data table-col--10 table--mobile-controls">
                                        <div class="table__controls">
                                            <a class="u-display--desktop icon icon--delete tooltip" aria-label="Remove"
                                                data-ng-show="canDeleteCacheSet(cacheset)"
                                                data-ng-click="quickCacheSetDelete(cacheset)">Remove</a>
                                            <a class="button--secondary u-display--mobile" aria-label="Remove"
                                                data-ng-show="canDeleteCacheSet(cacheset)"
                                                data-ng-click="quickCacheSetDelete(cacheset)">Remove cacheset</a>
                                        </div>
                                    </div>
                                    <div class="table__dropdown" data-ng-if="cachesetsMode === 'delete'">
                                        <div class="table__dropdown-title">
                                            <h2 data-ng-click="filesystemCancel()" class="u-float--left">
                                                <span data-ng-if="cachesetsMode === 'delete'">Removing {$ cacheset.name $}</span>
                                            </h2>
                                            <i data-ng-click="filesystemCancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                        </div>
                                        <div class="table__row" data-ng-class="{ 'is-active': cachesetsMode !== null && cachesetsMode !== 'multi' }">
                                            <div data-ng-show="cachesetsMode === 'single' && canDeleteCacheSet(cacheset)">
                                                <div class="table__data u-float--left">
                                                    <a class="button--base button--inline"
                                                        data-ng-show="canDeleteCacheSet(cacheset)"
                                                        data-ng-click="cacheSetDelete()">Remove</a>
                                                </div>
                                            </div>
                                            <div class="ng-hide" data-ng-show="cachesetsMode === 'delete'">
                                                <div class="table__data u-float--left u-margin--top-tiny">
                                                    <p><span class="icon icon--warning u-margin--right-small"></span> Are you sure you want to delete this cache set?</p>
                                                </div>
                                                <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="cacheSetCancel()">Cancel</a>
                                                    <button class="button--destructive button--inline" data-ng-click="cacheSetConfirmDelete(cacheset)">Remove</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </section>
                    </div>
                </div>
                <div class="twelve-col">
                    <h3>Available disks and partitions</h3>
                </div>
                <div class="twelve-col">
                    <section class="table table--hover u-margin--bottom">
                        <header class="table__head">
                            <div class="table__row">
                                <div class="table__header table-col--3">
                                    <input type="checkbox" class="checkbox" id="available-check-all"
                                        data-ng-hide="isAllStorageDisabled()"
                                        data-ng-checked="availableAllSelected"
                                        data-ng-click="toggleAvailableAllSelect()"
                                        data-ng-disabled="isAvailableDisabled()" />
                                    <label for="available-check-all"></label>
                                </div>
                                <div class="table__header table-col--16">
                                    <a class="table__header-link" data-ng-click="column = 'name'" data-ng-class="{'is-active': column === 'name'}">Name</a>
                                    <span class="divide"></span>
                                    <a class="table__header-link" data-ng-click="column = 'model'" data-ng-class="{'is-active': column === 'model'}">Model</a>
                                    <span class="divide"></span>
                                    <a class="table__header-link" data-ng-click="column = 'serial'" data-ng-class="{'is-active': column === 'serial'}">Serial</a>
                                </div>
                                <div class="table__header table-col--4">Boot</div>
                                <div class="table__header table-col--15">Size</div>
                                <div class="table__header table-col--15">Device Type</div>
                                <div class="table__header table-col--10">Filesystem</div>
                                <div class="table__header table-col--25">Tags</div>
                                <div class="table__header table-col--12"></div>
                            </div>
                        </header>
                        <main class="table__body">
                            <div class="table__row" data-ng-hide="available.length">
                                <div class="table__header table-col--100">
                                    No available disks or partitions.
                                </div>
                            </div>
                            <div data-ng-repeat="item in available | removeAvailableByNew:availableNew">
                                <div class="table__row"
                                    data-ng-class="{ 'is-active': item.$selected }">
                                    <div class="table__data table-col--3" aria-label="Select device">
                                        <input type="checkbox" class="checkbox" id="{$ item.name $}"
                                            data-ng-hide="isAllStorageDisabled()"
                                            data-ng-checked="item.$selected"
                                            data-ng-click="toggleAvailableSelect(item)"
                                            data-ng-disabled="isAvailableDisabled()" />
                                        <label for="{$ item.name $}" ></label>
                                    </div>
                                    <div class="table__data table-col--16" data-ng-show="column === 'name'" aria-label="Name">
                                        <span data-ng-hide="availableMode === 'edit' && item.$selected">{$ item.name $}</span>
                                        <input type="text" class="table__input"
                                            data-ng-model="item.name"
                                            data-ng-show="availableMode === 'edit' && item.$selected"
                                            data-ng-class="{ 'has-error': isNameInvalid(item) }"
                                            data-ng-disabled="item.type === 'partition' || isAllStorageDisabled() || !isSuperUser()"
                                            data-ng-change="nameHasChanged(item)">
                                    </div>
                                    <div class="table__data table-col--16 ng-hide" data-ng-show="column === 'model'">{$ item.model $}</div>
                                    <div class="table__data table-col--16 ng-hide" data-ng-show="column === 'serial'">{$ item.serial $}</div>
                                    <div class="table__data table-col--4 u-align--center" aria-label="Boot">
                                        <input type="radio" name="boot-disk" id="{$ item.name $}-boot"
                                            data-ng-click="setAsBootDisk(item)"
                                            data-ng-checked="item.is_boot"
                                            data-ng-if="item.type === 'physical'"
                                            data-ng-disabled="isBootDiskDisabled(item, 'available')"
                                            data-ng-hide="availableMode === 'edit' && item.$selected">
                                        <label for="{$ item.name $}-boot" data-ng-hide="availableMode === 'edit' && item.$selected"></label>
                                    </div>
                                    <div class="table__data table-col--15" aria-label="Size">
                                        <span data-ng-hide="availableMode === 'edit' && item.$selected">
                                            {$ item.size_human $} <span class="table__label ng-hide" data-ng-show="showFreeSpace(item)">Free: {$ item.available_size_human $}</span>
                                        </span>
                                    </div>
                                    <div class="table__data table-col--15" aria-label="Device type">
                                        <span data-ng-hide="availableMode === 'edit' && item.$selected">{$ getDeviceType(item) $}</span>
                                    </div>
                                    <div class="table__data table-col--10" aria-label="Filesystem">
                                        <span data-ng-hide="availableMode === 'edit' && item.$selected">{$ item.fstype $}</span>
                                    </div>
                                    <div class="table__data table__tags table-col--25" aria-label="Tags">
                                        <span class="table__tag" data-ng-repeat="tag in item.tags" data-ng-hide="item.$options.editingTags">
                                            <a href="#/node/?query=storage_tags:({$ tag.text $})">{$ tag.text $}</a>
                                        </span>
                                    </div>
                                    <div class="table__data table-col--12 table--mobile-controls">
                                        <div class="table__controls">
                                            <div class="u-display--mobile">
                                                <a class="button--secondary ng-hide"
                                                    aria-label="Add logical volume"
                                                    data-ng-show="canAddLogicalVolume(item)"
                                                    data-ng-click="availableLogicalVolume(item)">Add logical volume</a>
                                                <a class="button--secondary ng-hide"
                                                    aria-label="Partition"
                                                    data-ng-show="canAddPartition(item)"
                                                    data-ng-click="availableQuickPartition(item)">Add partition</a>
                                                <a class="button--secondary ng-hide"
                                                    aria-label="Edit"
                                                    data-ng-show="canEdit(item)"
                                                    data-ng-click="availableQuickEdit(item)">Edit disk</a>
                                                <a class="button--secondary ng-hide"
                                                    aria-label="Remove"
                                                    data-ng-show="canDelete(item)"
                                                    data-ng-click="availableQuickDelete(item)">Remove disk</a>
                                            </div>
                                            <a class="icon u-display--desktop icon--logical-volume tooltip ng-hide"
                                                aria-label="Add logical volume"
                                                data-ng-show="canAddLogicalVolume(item)"
                                                data-ng-click="availableLogicalVolume(item)"></a>
                                            <a class="icon u-display--desktop icon--partition tooltip ng-hide"
                                                aria-label="Partition"
                                                data-ng-show="canAddPartition(item)"
                                                data-ng-click="availableQuickPartition(item)">Partition</a>
                                            <a class="icon u-display--desktop icon--edit tooltip ng-hide"
                                                aria-label="Edit"
                                                data-ng-show="canEdit(item)"
                                                data-ng-click="availableQuickEdit(item)">Edit</a>
                                            <a class="icon u-display--desktop icon--delete tooltip ng-hide u-margin--left"
                                                aria-label="Remove"
                                                data-ng-show="canDelete(item)"
                                                data-ng-click="availableQuickDelete(item)">Remove</a>

                                        </div>
                                    </div>
                                    <div class="table__dropdown" data-ng-if="availableMode === 'edit' || availableMode === 'format-mount' || availableMode === 'partition' || availableMode === 'logical-volume' || availableMode === 'delete'">
                                        <div class="table__dropdown-title">
                                            <h2 data-ng-click="availableCancel(item)" class="u-float--left">
                                                <span data-ng-if="availableMode === 'edit'">Editing {$ item.name $}</span>
                                                <span data-ng-if="availableMode === 'format-mount'">Mount device</span>
                                                <span data-ng-if="availableMode === 'partition'">Adding partition</span>
                                                <span data-ng-if="availableMode === 'logical-volume'">Adding logical volume</span>
                                                <span data-ng-if="availableMode === 'delete'">Removing {$ item.name $}</span>
                                            </h2>
                                            <i data-ng-click="availableCancel(item)" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                        </div>
                                        <div class="table__row form form--stack"
                                            data-ng-if="availableMode === 'edit'"
                                            data-ng-class="{ 'is-active': availableMode === 'edit' }">
                                            <div class="table__data table-col--100">
                                                <div class="form__fieldset six-col">
                                                    <div class="form__group u-display--mobile" data-ng-show="availableMode === 'edit' && item.$selected">
                                                        <label for="device-name" data-ng-show="availableMode === 'edit' && item.$selected">Name</label>
                                                        <input type="text" id="device-name" class="three-col"
                                                            data-ng-model="item.name"
                                                            data-ng-show="availableMode === 'edit' && item.$selected"
                                                            data-ng-class="{ 'has-error': isNameInvalid(item) }"
                                                            data-ng-disabled="item.type === 'partition' || isAllStorageDisabled() || !isSuperUser()"
                                                            data-ng-change="nameHasChanged(item)">
                                                    </div>
                                                    <dl>
                                                        <dt class="two-col">Size</dt>
                                                            <dd class="four-col last-col">{$ item.size_human $}</dd>
                                                        <dt class="two-col ng-hide" data-ng-show="showFreeSpace(item)">Free space</dt>
                                                            <dd class="four-col last-col ng-hide" data-ng-show="showFreeSpace(item)">{$ item.available_size_human $}</dd>
                                                        <dt class="two-col">Type</dt>
                                                            <dd class="four-col last-col">{$ getDeviceType(item) $}</dd>
                                                    </dl>
                                                    <div class="form__group" data-ng-if="item.$options.editingTags">
                                                        <label for="tags" class="form__group-label two-col">Tags</label>
                                                        <div class="form__group-input three-col">
                                                            <tags-input ng-model="item.$options.tags" data-ng-if="item.$options.editingTags" allow-tags-pattern="[\w-]+"></tags-input>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form__fieldset six-col last-col" data-ng-show="item.$options.editingFilesystem">
                                                    <div class="form__group">
                                                        <label for="filesys" class="two-col">Filesystem</label>
                                                        <select name="filesys" class="three-col"
                                                            ng-model="item.$options.fstype"
                                                            data-ng-change="fstypeChanged(item.$options)"
                                                            data-ng-options="fs.key as fs.key for fs in node.supported_filesystems">
                                                            <option value="" selected="selected">Unformatted</option>
                                                        </select>
                                                    </div>
                                                    <div class="form__group">
                                                        <label for="mount-point" class="two-col">Mount point</label>
                                                        <input type="text" id="mount-point" class="three-col"
                                                            placeholder="Absolute path"
                                                            ng-model="item.$options.mountPoint"
                                                            ng-disabled="!usesMountPoint(item.$options.fstype)"
                                                            ng-class="{ 'has-error': isMountPointInvalid(item.$options.mountPoint) }">
                                                    </div>
                                                    <div class="form__group">
                                                        <label for="mount-options" class="two-col">Mount options</label>
                                                        <input class="three-col"
                                                            type="text" id="mount-options"
                                                            placeholder="Separated by commas, no spaces"
                                                            data-ng-model="item.$options.mountOptions"
                                                            data-ng-disabled="item.$options.fstype === null">
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="table__row form form--stack u-padding--top u-padding--right u-padding--left box-sizing"
                                            data-ng-if="availableMode === 'format-mount'"
                                            data-ng-class="{ 'is-active': availableMode === 'format-mount' }">
                                            <div data-ng-if="availableMode === 'format-mount'" class="table__data">
                                                <div class="form__fieldset six-col">
                                                    <dl>
                                                        <dt class="two-col">Size</dt>
                                                            <dd class="four-col last-col">{$ item.size_human $} <span class="table__label ng-hide" data-ng-show="showFreeSpace(item)">Free: {$ item.available_size_human $}</span></dd>
                                                        <dt class="two-col">Type</dt>
                                                            <dd class="four-col last-col">{$ getDeviceType(item) $}</dd>
                                                    </dl>
                                                    <div class="form__group">
                                                        <label for="tags" class="two-col">Tags</label>
                                                        <input type="text" class="table__input three-col">
                                                    </div>
                                                </div>
                                                <div class="form__fieldset six-col last-col">
                                                    <div>
                                                        <div class="form__group">
                                                            <label for="filesys" class="two-col">Filesystem</label>
                                                            <select name="filesys" class="three-col"
                                                                ng-model="item.$options.fstype"
                                                                data-ng-change="fstypeChanged(item.$options)"
                                                                data-ng-options="fs.key as fs.key for fs in node.supported_filesystems">
                                                                <option value="">Unformatted</option>
                                                            </select>
                                                        </div>
                                                        <div class="form__group">
                                                            <label for="mount-point" class="two-col">Mount point</label>
                                                            <input type="text" id="mount-point" class="three-col"
                                                                placeholder="Absolute path"
                                                                ng-model="item.$options.mountPoint"
                                                                ng-disabled="!usesMountPoint(item.$options.fstype)"
                                                                ng-class="{ 'has-error': isMountPointInvalid(item.$options.mountPoint) }">
                                                        </div>
                                                        <div class="form__group">
                                                            <label for="mount-options" class="two-col">Mount options</label>
                                                            <input class="three-col"
                                                                type="text" id="mount-options"
                                                                placeholder="Separated by commas, no spaces"
                                                                data-ng-model="item.$options.mountOptions"
                                                                data-ng-disabled="item.$options.fstype === null">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table__row form form--stack"
                                            data-ng-if="availableMode === 'partition'"
                                            data-ng-class="{ 'is-active': availableMode === 'partition' }">
                                            <div data-ng-if="availableMode === 'partition'" class="table__data table-col--100">
                                                <div class="form__fieldset six-col">
                                                    <dl>
                                                        <dt class="two-col">Name</dt>
                                                            <dd class="four-col last-col">{$ getAddPartitionName(item) $}</dd>
                                                        <dt class="two-col">Type</dt>
                                                            <dd class="four-col last-col">Partition</dd>
                                                    </dl>
                                                    <div class="form__group">
                                                        <label class="two-col form__group-label" for="filesys">Size</label>
                                                        <div class="form__group-input three-col">
                                                            <input type="text" class="u-width--half u-display--inline-block"
                                                                ng-model="item.$options.size"
                                                                ng-class="{ 'has-error': isAddPartitionSizeInvalid(item) }">
                                                            <select name="size-units" class="u-width--third u-display--inline-block"
                                                                ng-model="item.$options.sizeUnits"
                                                                ng-class="{ 'has-error': isAddPartitionSizeInvalid(item) }">
                                                                <option value="MB">MB</option>
                                                                <option value="GB">GB</option>
                                                                <option value="TB">TB</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form__fieldset six-col last-col">
                                                    <div class="form__group">
                                                        <label class="two-col" for="filesys">Filesystem</label>
                                                        <select class="table__input three-col"
                                                            name="filesys"
                                                            data-ng-model="item.$options.fstype"
                                                            data-ng-change="fstypeChanged(item.$options)"
                                                            data-ng-options="fs.key as fs.key for fs in node.supported_filesystems">
                                                            <option value="">Unformatted</option>
                                                        </select>
                                                    </div>
                                                    <div class="form__group">
                                                        <label class="two-col" for="mount-point">Mount point</label>
                                                        <input class="table__input three-col"
                                                            type="text" id="mount-point"
                                                            placeholder="Absolute path"
                                                            data-ng-model="item.$options.mountPoint"
                                                            data-ng-disabled="!usesMountPoint(item.$options.fstype)"
                                                            data-ng-class="{ 'has-error': isMountPointInvalid(item.$options.mountPoint) }">
                                                    </div>
                                                    <div class="form__group">
                                                        <label class="two-col" for="">Mount options</label>
                                                        <input class="table__input three-col"
                                                            type="text" id="mount-options"
                                                            placeholder="Separated by commas, no spaces"
                                                            data-ng-model="item.$options.mountOptions"
                                                            data-ng-disabled="item.$options.fstype === null">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table__row form form--stack"
                                            data-ng-if="availableMode === 'logical-volume'"
                                            data-ng-class="{ 'is-active': availableMode === 'logical-volume' }">
                                            <div data-ng-if="availableMode === 'logical-volume'" class="table__data table-col--100">
                                                <div class="form__fieldset six-col">
                                                    <div class="form__group">
                                                        <label for="name" class="two-col">Name</label>
                                                        <input type="text" class="table__input three-col"
                                                            data-ng-class="{ 'has-error': isLogicalVolumeNameInvalid(item) }"
                                                            data-ng-change="newLogicalVolumeNameChanged(item)"
                                                            data-ng-model="item.$options.name">
                                                    </div>
                                                    <div class="form__group">
                                                        <label for="size" class="two-col form__group-label">Size</label>
                                                        <div class="three-col form__group-input">
                                                            <input type="text" id="size" class="u-width--half u-display--inline-block"
                                                                ng-model="item.$options.size"
                                                                ng-class="{ 'has-error': isAddLogicalVolumeSizeInvalid(item) }">
                                                            <select name="size-units" class="u-width--third u-display--inline-block"
                                                                ng-model="item.$options.sizeUnits"
                                                                ng-class="{ 'has-error': isAddLogicalVolumeSizeInvalid(item) }">
                                                                <option value="MB">MB</option>
                                                                <option value="GB">GB</option>
                                                                <option value="TB">TB</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <dl>
                                                        <dt class="two-col">Type</dt>
                                                            <dd class="four-col last-col">Logical volume</dd>
                                                    </dl>
                                                    <div class="form__group">
                                                        <label for="tags" class="form__group-label two-col">Tags</label>
                                                        <div class="form__group-input three-col">
                                                            <tags-input ng-model="item.$options.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form__fieldset six-col last-col">
                                                    <div class="form__group">
                                                        <label for="filesys" class="two-col">Filesystem</label>
                                                        <select name="filesys"
                                                            class="table__input three-col"
                                                            data-ng-model="item.$options.fstype"
                                                            data-ng-change="fstypeChanged(item.$options)"
                                                            data-ng-options="fs.key as fs.key for fs in node.supported_filesystems">
                                                            <option value="">Unformatted</option>
                                                        </select>
                                                    </div>
                                                    <div class="form__group">
                                                        <label for="mount-point" class="two-col">Mount point</label>
                                                        <input type="text" id="mount-point"
                                                            class="table__input three-col"
                                                            placeholder="Absolute path"
                                                            data-ng-model="item.$options.mountPoint"
                                                            data-ng-disabled="!usesMountPoint(item.$options.fstype)"
                                                            data-ng-class="{ 'has-error': isMountPointInvalid(item.$options.mountPoint) }">
                                                    </div>
                                                    <div class="form__group">
                                                        <label for="mount-options" class="two-col">Mount options</label>
                                                        <input class="table__input three-col"
                                                            type="text" id="mount-options"
                                                            placeholder="Separated by commas, no spaces"
                                                            data-ng-model="item.$options.mountOptions"
                                                            data-ng-disabled="item.$options.fstype === null">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table__row"
                                            data-ng-if="availableMode !== null && activeMode !== 'multi'"
                                            data-ng-class="{ 'is-active': availableMode !== null && activeMode !== 'multi' }">
                                            <div data-ng-if="availableMode === 'edit'">
                                                <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="availableCancel(item)">Cancel</a>
                                                    <button class="button--positive button--inline"
                                                        data-ng-disabled="isMountPointInvalid(item.$options.mountPoint) || isNameInvalid(item)"
                                                        data-ng-click="availableConfirmEdit(item)">Save</button>
                                                </div>
                                            </div>
                                            <div data-ng-if="availableMode === 'delete'">
                                                <div class="table__data u-float--left u-margin--top-tiny">
                                                    <p><span class="icon icon--warning u-margin--right-small"></span> Are you sure you want to remove this {$ getRemoveTypeText(item) $}?</p>
                                                </div>
                                                <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="availableCancel(item)">Cancel</a>
                                                    <button class="button--destructive button--inline" data-ng-click="availableConfirmDelete(item)">Remove</button>
                                                </div>
                                            </div>
                                              <div data-ng-if="availableMode === 'partition'">
                                                <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="availableCancel(item)">Cancel</a>
                                                    <button class="button--positive button--inline"
                                                        data-ng-disabled="isAddPartitionSizeInvalid(item) || isMountPointInvalid(item.$options.mountPoint)"
                                                        data-ng-click="availableConfirmPartition(item)">Add partition</button>
                                                </div>
                                            </div>
                                            <div data-ng-if="availableMode === 'logical-volume'">
                                                <div class="table__data u-float--right">
                                                    <a class="button--base button--inline" data-ng-click="availableCancel(item)">Cancel</a>
                                                    <button class="button--positive button--inline"
                                                        data-ng-disabled="isLogicalVolumeNameInvalid(item) || isAddLogicalVolumeSizeInvalid(item) || isMountPointInvalid(item.$options.mountPoint)"
                                                        data-ng-click="availableConfirmLogicalVolume(item)">Add logical volume</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table__row is-active" data-ng-if="availableMode === 'bcache'">
                                <div class="table__data table-col--3">
                                    <input type="checkbox" class="checkbox" id="bcache-create" disabled="disabled" checked />
                                    <label class="checkbox-label" for="bcache-create"></label>
                                </div>
                                <div class="table__data table-col--15">
                                    <input type="text" class="table__input"
                                        data-ng-class="{ 'has-error': isNewDiskNameInvalid() }"
                                        data-ng-model="availableNew.name">
                                </div>
                                <div class="table__data table-col--15"></div>
                                <div class="table__data table-col--15"></div>
                                <div class="table__data table-col--45"></div>
                                <div class="table__data table-col--7"></div>
                                <div class="table__dropdown">
                                    <div class="table__dropdown-title">
                                        <h2 data-ng-click="availableCancel()" class="u-float--left">Creating Bcache</h2>
                                        <i data-ng-click="availableCancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                    </div>
                                    <div class="table__row form form--stack is-active">
                                        <div class="table__data table-col--100">
                                            <div class="form__fieldset six-col">
                                                <div class="form__group u-display--mobile">
                                                  <label for="bcache-name" class="two-col">Name</label>
                                                  <input type="text" id="bcache-name" class="table__input three-col"
                                                      data-ng-class="{ 'has-error': isNewDiskNameInvalid() }"
                                                      data-ng-model="availableNew.name">
                                                </div>
                                                <dl>
                                                  <dt class="two-col">Size</dt>
                                                      <dd class="four-col last-col">{$ availableNew.device.size_human $}</dd>
                                                  <dt class="two-col">Type</dt>
                                                      <dd class="four-col last-col">Bcache</dd>
                                                </dl>
                                                <div class="form__group">
                                                    <label class="two-col">Tags</label>
                                                    <div class="form__group-input three-col last-col">
                                                        <tags-input ng-model="availableNew.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                    </div>
                                                </div>
                                                <div class="form__group">
                                                    <label for="type" class="two-col">Cache set</label>
                                                    <select name="cache-set" id="cache-set"
                                                        class="table__input three-col"
                                                        data-ng-model="availableNew.cacheset"
                                                        data-ng-options="cacheset as cacheset.name for cacheset in cachesets">
                                                    </select>
                                                </div>
                                                <div class="form__group">
                                                    <label for="type" class="two-col">Cache mode</label>
                                                    <select name="cache-mode" id="cache-mode" class="three-col"
                                                        data-ng-model="availableNew.cacheMode">
                                                        <option value="writeback">writeback</option>
                                                        <option value="writethrough">writethrough</option>
                                                        <option value="writearound">writearound</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form__fieldset six-col last-col">
                                                <div class="form__group">
                                                    <label for="type" class="two-col">Filesystem</label>
                                                    <select name="filesys" class="three-col"
                                                        data-ng-model="availableNew.fstype"
                                                        data-ng-change="fstypeChanged(availableNew)"
                                                        data-ng-options="fs.key as fs.key for fs in node.supported_filesystems">
                                                        <option value="">Unformatted</option>
                                                    </select>
                                                </div>
                                                <div class="form__group">
                                                    <label for="mount-point" class="two-col">Mount point</label>
                                                    <input type="text" id="mount-point" class="three-col"
                                                        placeholder="Absolute path"
                                                        data-ng-model="availableNew.mountPoint"
                                                        data-ng-disabled="!usesMountPoint(availableNew.fstype)"
                                                        data-ng-class="{ 'has-error': isMountPointInvalid(availableNew.mountPoint) }">
                                                </div>
                                                <div class="form__group">
                                                    <label for="mount-options" class="two-col">Mount options</label>
                                                    <input type="text" id="mount-options" class="three-col"
                                                        placeholder="Separated by commas, no spaces"
                                                        data-ng-model="availableNew.mountOptions"
                                                        data-ng-disabled="availableNew.fstype === null">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row">
                                        <div class="table__row table__row--head u-border--none is-active">
                                            <div class="table__header table-col--15">Name</div>
                                            <div class="table__header table-col--15">Size</div>
                                            <div class="table__header table-col--15">Device type</div>
                                            <div class="table__header table-col--45"></div>
                                        </div>
                                        <div class="table__row u-border--none is-active">
                                            <div class="table__data u-padding--top-none table-col--15">{$ availableNew.device.name $}</div>
                                            <div class="table__data u-padding--top-none table-col--15">{$ availableNew.device.size_human $}</div>
                                            <div class="table__data u-padding--top-none table-col--15">{$ getDeviceType(availableNew.device) $}</div>
                                            <div class="table__data u-padding--top-none table-col--45"></div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data u-float--right">
                                            <a class="button--base button--inline"
                                                data-ng-click="availableCancel()">Cancel</a>
                                            <button class="button--positive button--inline"
                                                data-ng-disabled="!createBcacheCanSave()"
                                                data-ng-click="availableConfirmCreateBcache()">Create bcache</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table__row is-active" data-ng-if="availableMode === 'raid'">
                                <div class="table__data table-col--3">
                                    <input type="checkbox" class="checkbox" id="raid-create" disabled="disabled" checked />
                                    <label for="raid-create"></label>
                                </div>
                                <div class="table__data table-col--15">
                                    <input type="text" class="table__input"
                                        data-ng-class="{ 'has-error': isNewDiskNameInvalid() }"
                                        data-ng-model="availableNew.name">
                                </div>
                                <div class="table__data table-col--82"></div>
                                <div class="table__dropdown">
                                    <div class="table__dropdown-title">
                                        <h2 data-ng-click="availableCancel()" class="u-float--left">Creating RAID</h2>
                                        <i data-ng-click="availableCancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                    </div>
                                    <div class="table__row form form--stack is-active u-padding--top u-padding--right u-padding--left box-sizing">
                                        <div class="table__data table-col--100">
                                            <div class="form__fieldset six-col">
                                                <div class="form__group u-display--mobile">
                                                    <label for="new-raid-name">Name</label>
                                                    <input type="text" id="new-raid-name" class="table__input"
                                                        data-ng-class="{ 'has-error': isNewDiskNameInvalid() }"
                                                        data-ng-model="availableNew.name">
                                                </div>
                                                <dl>
                                                    <dt class="two-col">Size</dt>
                                                        <dd class="four-col last-col">{$ getNewRAIDSize() $}</dd>
                                                </dl>
                                                <div class="form__group">
                                                    <label for="type" class="two-col">RAID type</label>
                                                    <select name="type" id="type" class="three-col"
                                                        data-ng-model="availableNew.mode"
                                                        data-ng-change="RAIDModeChanged()"
                                                        data-ng-options="mode as mode.title for mode in getAvailableRAIDModes()">
                                                    </select>
                                                </div>
                                                <div class="form__group">
                                                    <label class="two-col">Tags</label>
                                                    <div class="form__group-input three-col last-col">
                                                        <tags-input ng-model="availableNew.tags" allow-tags-pattern="[\w-]+"></tags-input>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form__fieldset six-col last-col">
                                                <div class="form__group">
                                                    <label for="type" class="two-col">File system</label>
                                                    <select name="filesys" class="three-col"
                                                        data-ng-model="availableNew.fstype"
                                                        data-ng-change="fstypeChanged(availableNew)"
                                                        data-ng-options="fs.key as fs.key for fs in node.supported_filesystems">
                                                        <option value="">Unformatted</option>
                                                    </select>
                                                </div>
                                                <div class="form__group">
                                                    <label for="mount-point" class="two-col">Mount point</label>
                                                    <input type="text" id="mount-point" class="three-col"
                                                        placeholder="Absolute path"
                                                        data-ng-model="availableNew.mountPoint"
                                                        data-ng-disabled="!usesMountPoint(availableNew.fstype)"
                                                        data-ng-class="{ 'has-error': isMountPointInvalid(availableNew.mountPoint) }">
                                                </div>
                                                <div class="form__group">
                                                    <label for="mount-options" class="two-col">Mount options</label>
                                                    <input type="text" id="mount-options" class="three-col"
                                                        placeholder="Separated by commas, no spaces"
                                                        data-ng-model="availableNew.mountOptions"
                                                        data-ng-disabled="availableNew.fstype === null">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data table-col--100">
                                            <div class="table__row table__row--head is-active u-border--none u-display--desktop">
                                                <div class="table__header table-col--15">Name</div>
                                                <div class="table__header table-col--15">Size</div>
                                                <div class="table__header table-col--15">Device type</div>
                                                <div class="table__header table-col--10">Active</div>
                                                <div class="table__header table-col--15">
                                                    <span data-ng-show="showSparesColumn()">Spare (Maximum {$ getTotalNumberOfAvailableSpares() $})</span>
                                                </div>
                                                <div class="table__header table-col--30"></div>
                                            </div>
                                            <div class="table__row u-border--none is-active"
                                                data-ng-repeat="device in availableNew.devices">
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Name">{$ device.name $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Size">{$ device.size_human $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Tyoe">{$ getDeviceType(device) $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--10" aria-label="Active">
                                                    <input type="radio" id="{$ device.name $}-active" name="{$ device.name $}-options"
                                                        data-ng-checked="isActiveRAIDMember(device)"
                                                        data-ng-click="setAsActiveRAIDMember(device)">
                                                    <label for="{$ device.name $}-active"></label>
                                                </div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Spare" data-ng-show="showSparesColumn()">
                                                    <input type="radio" name="{$ device.name $}-options" id="{$ device.name $}-spare"
                                                        data-ng-checked="isSpareRAIDMember(device)"
                                                        data-ng-click="setAsSpareRAIDMember(device)"
                                                        data-ng-disabled="getNumberOfRemainingSpares() <= 0">
                                                    <label for="{$ device.name $}-spare"></label>
                                                </div>
                                                <div class="table__data u-display--desktop u-padding--top-none table-col--30"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data u-float--right">
                                            <a class="button--base button--inline"
                                                data-ng-click="availableCancel()">Cancel</a>
                                            <button class="button--positive button--inline"
                                                data-ng-disabled="!createRAIDCanSave()"
                                                data-ng-click="availableConfirmCreateRAID()">Create RAID</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="table__row is-active" data-ng-if="availableMode === 'volume-group'">
                                <div class="table__data table-col--3">
                                    <input type="checkbox" class="checkbox" id="vg-create" disabled="disabled" checked />
                                    <label for="vg-create"></label>
                                </div>
                                <div class="table__data table-col--15">
                                    <input type="text" class="table__input"
                                        data-ng-class="{ 'has-error': isNewDiskNameInvalid() }"
                                        data-ng-model="availableNew.name">
                                </div>
                                <div class="table__data table-col--82"></div>
                                <div class="table__dropdown">
                                    <div class="table__dropdown-title">
                                        <h2 data-ng-click="availableCancel()" class="u-float--left">Creating volume group</h2>
                                        <i data-ng-click="availableCancel()" class="icon icon--remove u-float--right u-margin--top-small u-margin--right-small"></i>
                                    </div>
                                    <div class="table__row form form--stack is-active">
                                        <div class="table__data table-col--100">
                                            <div class="form__fieldset six-col">
                                                <div class="form__group u-display--mobile">
                                                    <label for="new-vg-name">Name</label>
                                                    <input type="text" class="three-col" id="new-vg-name"
                                                        data-ng-class="{ 'has-error': isNewDiskNameInvalid() }"
                                                        data-ng-model="availableNew.name">
                                                </div>
                                                <dl>
                                                    <dt class="two-col">Size</dt>
                                                        <dd class="four-col last-col">{$ getNewVolumeGroupSize() $}</dd>
                                                    <dt class="two-col">Type</dt>
                                                        <dd class="four-col last-col">Volume group</dd>
                                                </dl>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data table-col--100">
                                            <div class="table__row is-active u-border--none table__row--head u-display--desktop">
                                                <div class="table__header table-col--15">Name</div>
                                                <div class="table__header table-col--15">Size</div>
                                                <div class="table__header table-col--15">Device type</div>
                                                <div class="table__header table-col--55"></div>
                                            </div>
                                            <div class="table__row is-active u-border--none"
                                                data-ng-repeat="device in availableNew.devices">
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Name">{$ device.name $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Size">{$ device.size_human $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--15" aria-label="Device type">{$ getDeviceType(device) $}</div>
                                                <div class="table__data table__data--children u-padding--top-none table-col--55 u-display--desktop"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table__row is-active">
                                        <div class="table__data u-float--right">
                                            <a class="button--base button--inline"
                                                data-ng-click="availableCancel()">Cancel</a>
                                            <button class="button--positive button--inline"
                                                data-ng-disabled="!createVolumeGroupCanSave()"
                                                data-ng-click="availableConfirmCreateVolumeGroup()">Create volume group</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </section>
                    <a class="button--secondary button--inline tooltip"
                        aria-label="Select two or more physical devices to create a RAID"
                        data-ng-disabled="!canCreateRAID()"
                        data-ng-hide="isAllStorageDisabled() || !isSuperUser()"
                        data-ng-click="createRAID()">Create RAID</a>
                    <a class="button--secondary button--inline tooltip"
                        aria-label="Select one or more devices to create a volume group"
                        data-ng-disabled="!canCreateVolumeGroup()"
                        data-ng-hide="isAllStorageDisabled() || !isSuperUser()"
                        data-ng-click="createVolumeGroup()">Create volume group</a>
                    <a class="button--secondary button--inline tooltip"
                        aria-label="Select one device to create a cache set"
                        data-ng-disabled="!canCreateCacheSet()"
                        data-ng-hide="isAllStorageDisabled() || !isSuperUser()"
                        data-ng-click="createCacheSet()">Create cache Set</a>
                    <a class="button--secondary button--inline tooltip"
                        aria-label="{$ getCannotCreateBcacheMsg() $}"
                        data-ng-class="{ tooltip: !canCreateBcache() }"
                        data-ng-disabled="!canCreateBcache()"
                        data-ng-hide="isAllStorageDisabled() || !isSuperUser()"
                        data-ng-click="createBcache()">Create bcache</a>
                </div>
                <div class="twelve-col">
                    <h3>Used disks and partitions</h3>
                </div>
                <div class="twelve-col">
                    <section class="table">
                        <header class="table__head">
                            <div class="table__row">
                                <div class="table__header table-col--3"></div>
                                <div class="table__header table-col--16">
                                    <a class="table__header-link" data-ng-click="column = 'name'" data-ng-class="{'is-active': column === 'name'}">Name</a>
                                    <span class="divide"></span>
                                    <a class="table__header-link" data-ng-click="column = 'model'" data-ng-class="{'is-active': column === 'model'}">Model</a>
                                    <span class="divide"></span>
                                    <a class="table__header-link" data-ng-click="column = 'serial'" data-ng-class="{'is-active': column === 'serial'}">Serial</a>
                                </div>
                                <div class="table__header table-col--4">Boot</div>
                                <div class="table__header table-col--15">Device type</div>
                                <div class="table__header table-col--52">Used for</div>
                            </div>
                        </header>
                        <main class="table-body">
                            <div class="table__row" data-ng-hide="used.length">
                                <div class="table__header table-col--100">
                                    No disk or partition has been fully utilized.
                                </div>
                            </div>
                            <div data-ng-repeat="item in used">
                                <div class="table__row details__used">
                                    <div class="table__data table-col--3 u-display--desktop"></div>
                                    <div class="table__data table-col--16" data-ng-show="column === 'name'" aria-label="Name">{$ item.name $}</div>
                                    <div class="table__data table-col--16" data-ng-show="column === 'model'">{$ item.model $}</div>
                                    <div class="table__data table-col--16" data-ng-show="column === 'serial'">{$ item.serial $}</div>
                                    <div class="table__data table-col--4 u-align--center" aria-label="Boot disk">
                                        <input type="radio" id="{$ item.name $}-boot" name="boot-disk"
                                            data-ng-click="setAsBootDisk(item)"
                                            data-ng-checked="item.is_boot"
                                            data-ng-if="item.type === 'physical'"
                                            data-ng-disabled="isBootDiskDisabled(item, 'used')">
                                        <label for="{$ item.name $}-boot"></label>
                                    </div>
                                    <div class="table__data table-col--15" aria-label="Device type">{$ getDeviceType(item) $}</div>
                                    <div class="table__data table-col--52" aria-label="Used for">{$ item.used_for $}</div>
                                </div>
                            </div>
                        </main>
                    </section>
                </div>
            </form>
        </div>
    </div>
    <div class="row" id="events">
        <div class="wrapper--inner">
            <div class="eight-col">
                <h2 class="title">Latest {$ type_name $} events</h2>
            </div>
            <div class="four-col last-col u-align--right">
                <a class="button--secondary button--inline" href="#/node/{$ type_name $}/{$ node.system_id $}/events">View full history</a>
            </div>
            <div class="twelve-col">
                <p data-ng-hide="node.events.length">No events.</p>
                <table class="table-listing no-hover" data-ng-show="node.events.length">
                    <thead>
                        <tr>
                            <th class="table-col--2"></th>
                            <th class="table-col--79">Event</th>
                            <th class="table-col--20">Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr
                            data-ng-repeat="event in node.events | limitTo:events.limit">
                            <td class="table-col--2" aria-label="{$ event.type.level $}">
                                <span class="icon icon--{$ event.type.level $}"></span>
                            </td>
                            <td class="table-col--79" aria-label="Event">{$ getEventText(event) $}</td>
                            <td class="table-col--20" aria-label="Created">{$ event.created $}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="twelve-col u-align--center">
                <p>
                    <span data-ng-show="allowShowMoreEvents()">
                        <a href="" data-ng-click="showMoreEvents()">Load next 10 events</a>
                    </span>
                </p>
            </div>
        </div>
    </div>
    <div class="row" id="testing_output" data-ng-show='node.testing_results.length > 0'>
        <div class="wrapper--inner">
            <div class="twelve-col">
                <h2 class="title">Test Results</h2>
            </div>
            <table>
                <thead>
                    <tr>
                        <th class="table-col--1 u-padding--left-none u-padding--right-none"></th>
                        <th class="table-col--35">Filename</th>
                        <th class="table-col--35">Tags</th>
                        <th class="table-col--30">Time</th>
                        <th class="table-col--30">Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="output in node.testing_results">
                        <td class="table-col--1 u-padding--right-none u-padding--left-none">
                            <span class="icon" data-ng-class="{ 'icon--warning': output.status < 2, 'icon--success': output.status === 2, 'icon--error': output.status > 2 }"></span>
                        </td>
                        <td class="table-col--35" aria-label="Filename"><a href="#/node/{$ type_name $}/{$ node.system_id $}/result/{$ output.name $}">{$ output.name $}</a></td>
                        <td class="table-col--30" aria-label="Tags">{$ output.tags $}</td>
                        <td class="table-col--30" aria-label="Time">{$ output.updated $}</td>
                        <td class="table-col--30" aria-label="Status">{$ output.status_name $}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row" id="output" data-ng-show="machine_output.viewable">
        <div class="wrapper--inner">
            <div class="eight-col">
                <h2 class="u-display--inline-block">{$ type_name_title $} output</h2>
                <!-- XXX ricgard 2016-06-16 - Need to add e2e test. -->
                <ul class="tabs" data-ng-show="machine_output.showSummaryToggle">
                    <!-- XXX ricgard 2016-06-16 - Need to add e2e test. -->
                    <li class="tabs__tab is-active"
                        data-ng-class="{ 'is-active': machine_output.summaryType === 'yaml' }">
                        <a href=""
                            class="tabs__tab-link"
                            data-ng-click="machine_output.summaryType = 'yaml'">YAML</a>
                    </li>
                    <li class="tabs__tab"
                        data-ng-class="{ 'is-active': machine_output.summaryType === 'xml' }">
                        <a href=""
                            class="tabs__tab-link"
                            data-ng-click="machine_output.summaryType = 'xml'">XML</a>
                    </li>
                </ul>
            </div>
            <div class="four-col last-col u-align--right">
                <div data-maas-cta="machine_output.views"
                    data-ng-model="machine_output.selectedView"
                    data-ng-change="machineOutputViewChanged()">
                </div>
            </div>
            <div class="twelve-col ng-hide" data-ng-show="machine_output.selectedView.name === 'summary'">
                <pre class="code-block code-block--numbering" data-maas-code-lines="getSummaryData()">
                </pre>
            </div>
            <div class="twelve-col ng-hide" data-ng-show="machine_output.selectedView.name === 'commissioning'">
                <table>
                    <thead>
                        <tr>
                            <th class="table-col--1 u-padding--left-none u-padding--right-none"></th>
                            <th class="table-col--35">Filename</th>
                            <th class="table-col--30">Time</th>
                            <th class="table-col--30">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-repeat="output in node.commissioning_results">
                            <td class="table-col--1 u-padding--right-none u-padding--left-none">
                                <span class="icon" data-ng-class="{ 'icon--warning': output.status < 2, 'icon--success': output.status === 2, 'icon--error': output.status > 2 }"></span>
                            </td>
                            <td class="table-col--35" aria-label="Filename"><a href="#/node/{$ type_name $}/{$ node.system_id $}/result/{$ output.name $}">{$ output.name $}</a></td>
                            <td class="table-col--30" aria-label="Time">{$ output.updated $}</td>
                            <td class="table-col--30" aria-label="Status">{$ output.status_name $}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="twelve-col ng-hide" data-ng-show="machine_output.selectedView.name === 'installation'">
                <pre class="code-block code-block--numbering" data-maas-code-lines="getInstallationData()">
                </pre>
            </div>
        </div>
    </div>
</div>
