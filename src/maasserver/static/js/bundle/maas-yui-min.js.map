{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/maasserver/static/js/yui/io.js","webpack:///./src/maasserver/static/js/yui/os_distro_select.js","webpack:///./src/maasserver/static/js/yui/prefs.js","webpack:///./src/maasserver/static/js/yui/reveal.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","YUI","add","Y","log","namespace","getIO","io","IO","header","Cookie","requires","OSReleaseWidget","_io","maas","superclass","constructor","apply","this","arguments","NAME","extend","Widget","initializer","cfg","initialSkip","bindTo","osNode","event_name","self","one","on","e","osValue","currentTarget","switchTo","newOSValue","options","all","selected","each","option","sel","modifyOption","selectVisableOption","split_value","split","removeClass","set","addClass","first_option","Array","hasClass","use","releaseWidget","os_distro_select","srcNode","render","TokenWidget","ATTRS","nb_tokens","readOnly","size","displayError","message","status_node","create_link","Node","create","spinnerNode","append","confirm","_x","_confirm","toString","bindDeleteRow","row","preventDefault","deleteToken","bindUI","requestKeys","token_key","method","data","QueryString","stringify","op","sync","start","bind","showSpinner","end","hideSpinner","success","id","out","remove","failure","status","send","MAAS_config","uris","account_handler","insert","createTokenFromKeys","consumer_key","token_secret","addToken","token","list","keys","JSON","parse","response","Reveal","get_style_int","node","attribute","parseInt","getStyle","config","targetNode","linkNode","hideText","showText","quick","renderUI","target","reveal","syncUI","fire","setStyle","set_hidden_link","is_visible","link","new_text","undefined","set_visible_link","get_animation_duration","suggested_duration","create_slide_in","publisher","anim","Anim","duration","to","height","create_slide_out","content_node","new_height","run","script_entry"],"mappings":"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","file":"maas-yui-min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/* Copyright 2015 Canonical Ltd.  This software is licensed under the\n * GNU Affero General Public License version 3 (see the file LICENSE).\n *\n * IO module.\n *\n */\n\nYUI.add('maas.io', function(Y) {\n\nY.log('loading maas.io');\n\nvar module = Y.namespace('maas.io');\n\n/**\n * Return a Y.IO object to talk to the MAAS website.\n *\n * @method getIO\n */\nmodule.getIO = function() {\n    var io = new Y.IO();\n    // Populate the header used by Django for CSRF protection.\n    Y.io.header('X-CSRFTOKEN', Y.Cookie.get(\"csrftoken\"));\n    return io;\n};\n\n}, '0.1', {'requires': ['cookie', 'io-base']}\n);\n","/* Copyright 2015-2016 Canonical Ltd.  This software is licensed under the\n * GNU Affero General Public License version 3 (see the file LICENSE).\n *\n * OS/Release seletion utilities.\n *\n * @module Y.maas.power_parameter\n */\n\nYUI.add('maas.os_distro_select', function(Y) {\n\nY.log('loading maas.os_distro_select');\nvar module = Y.namespace('maas.os_distro_select');\n\n// Only used to mockup io in tests.\nmodule._io = new Y.maas.io.getIO();\n\nvar OSReleaseWidget;\n\n/**\n * A widget class that modifies the viewable options of the release\n * field, based on the selected operating system field.\n *\n */\nOSReleaseWidget = function() {\n    OSReleaseWidget.superclass.constructor.apply(this, arguments);\n};\n\nOSReleaseWidget.NAME = 'os-release-widget';\n\nY.extend(OSReleaseWidget, Y.Widget, {\n\n   /**\n    * Initialize the widget.\n    * - cfg.srcNode is the node which will be updated when the selected\n    *   value of the 'os node' will change.\n    * - cfg.osNode is the node containing a 'select' element.  When\n    *   the selected element will change, the srcNode HTML will be\n    *   updated.\n    *\n    * @method initializer\n    */\n    initializer: function(cfg) {\n        this.initialSkip = true;\n    },\n\n   /**\n    * Bind the widget to events (to name 'event_name') generated by the given\n    * 'osNode'.\n    *\n    * @method bindTo\n    */\n    bindTo: function(osNode, event_name) {\n        var self = this;\n        if (!osNode) {\n            return;\n        }\n        Y.one(osNode).on(event_name, function(e) {\n            var osValue = e.currentTarget.get('value');\n            self.switchTo(osValue);\n        });\n        var osValue = Y.one(osNode).get('value');\n        self.switchTo(osValue);\n    },\n\n   /**\n    * React to a new value of the os node: update the HTML of\n    * 'srcNode'.\n    *\n    * @method switchTo\n    */\n    switchTo: function(newOSValue) {\n        var srcNode = this.get('srcNode');\n        var options = srcNode.all('option');\n        var selected = false;\n        options.each(function(option) {\n            var sel = this.modifyOption(option, newOSValue);\n            if (selected === false) {\n                selected = sel;\n            }\n        }, this);\n\n        // We skip selection on first load, as Django will already\n        // provide the users, current selection. Without this the\n        // current selection will be clobered.\n        if (this.initialSkip === true) {\n            this.initialSkip = false;\n            return;\n        }\n\n        // See if a selection was made, if not then we need\n        // to select the first visible as a default is not\n        // present.\n        if(!selected) {\n            this.selectVisableOption(options);\n        }\n    },\n\n   /**\n    * Modify an option to make it visible or hidden. Returns true\n    * if the method also make the selection active.\n    *\n    * @method modifyOption\n    */\n    modifyOption: function(option, newOSValue) {\n        var selected = false;\n        var value = option.get('value');\n        var split_value = value.split(\"/\");\n\n        // If \"Default OS\" is selected, then\n        // only show \"Default OS Release\".\n        if(newOSValue === '') {\n            if(value === '') {\n                option.removeClass('hidden');\n                option.set('selected', 'selected');\n            }\n            else {\n                option.addClass('hidden');\n            }\n        }\n        else {\n            if(split_value[0] === newOSValue) {\n                option.removeClass('hidden');\n                if(split_value[1] === '' && !this.initialSkip) {\n                    selected = true;\n                    option.set('selected', 'selected');\n                }\n            }\n            else {\n                option.addClass('hidden');\n            }\n        }\n        return selected;\n    },\n\n   /**\n    * Selected the first option that is not hidden.\n    *\n    * @method selectVisableOption\n    */\n    selectVisableOption: function(options) {\n        var first_option = null;\n        Y.Array.each(options, function(option) {\n            if(!option.hasClass('hidden')) {\n                if(first_option === null) {\n                    first_option = option;\n                }\n            }\n        });\n        if(first_option !== null) {\n            first_option.set('selected', 'selected');\n        }\n    }\n});\n\nmodule.OSReleaseWidget = OSReleaseWidget;\n\n}, '0.1', {'requires': ['widget', 'maas.io']}\n);\n\nYUI().use(\n  'maas.os_distro_select',\n  function (Y) {\n  Y.on('load', function() {\n    // Create OSDistroWidget so that the release field will be\n    // updated each time the value of the os field changes.\n    var releaseWidget = new Y.maas.os_distro_select.OSReleaseWidget({\n        srcNode: '#id_deploy-default_distro_series'\n        });\n    releaseWidget.bindTo(Y.one('#id_deploy-default_osystem'), 'change');\n    releaseWidget.render();\n  });\n});\n","/* Copyright 2012-2016 Canonical Ltd.  This software is licensed under the\n * GNU Affero General Public License version 3 (see the file LICENSE).\n *\n * Utilities for the user preferences page.\n *\n * @module Y.maas.prefs\n */\n\nYUI.add('maas.prefs', function(Y) {\n\nY.log('loading maas.prefs');\nvar module = Y.namespace('maas.prefs');\n\n// Only used to mockup io in tests.\nmodule._io = new Y.maas.io.getIO();\n\nvar TokenWidget;\n\nTokenWidget = function() {\n    TokenWidget.superclass.constructor.apply(this, arguments);\n};\n\nTokenWidget.NAME = 'profile-widget';\n\nTokenWidget.ATTRS = {\n    // The number of tokens displayed.\n    nb_tokens: {\n        readOnly: true,\n        getter: function() {\n            return this.get('srcNode').all('.js-bundle').size();\n        }\n    }\n};\n\nY.extend(TokenWidget, Y.Widget, {\n\n    displayError: function(message) {\n        this.status_node.set('text', message);\n    },\n\n    initializer: function(cfg) {\n        this.create_link = Y.Node.create('<a />')\n            .set('href', '#')\n            .set('id','create_token')\n            .addClass('p-button--neutral')\n            .addClass('u-float--right')\n            .set('text', \"Generate MAAS key\");\n        this.status_node = Y.Node.create('<div />')\n            .set('id','create_error');\n        this.spinnerNode = Y.Node.create('<img />')\n            .addClass('u-animation--spin')\n            .addClass('icon')\n            .addClass('icon--loading');\n        this.get('srcNode').one('#token_creation_placeholder')\n            .append(this.create_link)\n            .append(this.status_node);\n    },\n\n    confirm: function(message) {\n        return confirm(message);\n    },\n\n    bindDeleteRow: function(row) {\n        var self = this;\n        var delete_link = row.one('a.js-delete-link');\n        delete_link.on('click', function(e) {\n            e.preventDefault();\n            if (self.confirm(\"Are you sure you want to delete this key?\")) {\n                self.deleteToken(row);\n            }\n        });\n    },\n\n    bindUI: function() {\n        var self = this;\n        this.create_link.on('click', function(e) {\n            e.preventDefault();\n            self.requestKeys();\n        });\n        Y.each(this.get('srcNode').all('.js-bundle'), function(row) {\n            self.bindDeleteRow(row);\n        });\n    },\n\n   /**\n    * Delete the token contained in the provided row.\n    * Call the API to delete the token and then remove the table row.\n    *\n    * @method deleteToken\n    */\n    deleteToken: function(row) {\n        var token_key = row.one('input').get('id');\n        var self = this;\n        var cfg = {\n            method: 'POST',\n            data: Y.QueryString.stringify({\n                op: 'delete_authorisation_token',\n                token_key: token_key\n                }),\n            sync: false,\n            on: {\n                start: Y.bind(self.showSpinner, self),\n                end: Y.bind(self.hideSpinner, self),\n                success: function(id, out) {\n                    row.remove();\n                 },\n                failure: function(id, out) {\n                    Y.log(out);\n                    if (out.status === 404) {\n                        self.displayError(\"The key has already been deleted.\");\n                    }\n                    else {\n                        self.displayError(\"Unable to delete the key.\");\n                    }\n                }\n            }\n        };\n        var request = module._io.send(\n            MAAS_config.uris.account_handler, cfg);\n    },\n\n    showSpinner: function() {\n        this.displayError('');\n        this.status_node.insert(this.spinnerNode, 'after');\n    },\n\n    hideSpinner: function() {\n        this.spinnerNode.remove();\n    },\n\n   /**\n    * Create a single string token from a key set.\n    *\n    * A key set is composed of 3 keys: consumer_key, token_key, token_secret.\n    * For an easy copy and paste experience, the string handed over to the\n    * user is a colon separated concatenation of these keys called 'token'.\n    *\n    * @method createTokenFromKeys\n    */\n    createTokenFromKeys: function(consumer_key, token_key, token_secret) {\n        return consumer_key + ':' + token_key + ':' + token_secret;\n    },\n\n   /**\n    * Add a token to the list of tokens.\n    *\n    * @method addToken\n    */\n    addToken: function(token, token_key) {\n        var list = this.get('srcNode').one('ul');\n        var row = Y.Node.create('<li />')\n            .addClass('js-bundle')\n            .addClass('u-equal-height')\n            .append(Y.Node.create('<div />')\n                .addClass('col-8')\n                .addClass('p-code-snippet')\n                    .append(Y.Node.create('<input />')\n                        .set('type', 'text')\n                        .addClass('p-code-snippet__input')\n                        .set('id', token_key)\n                        .set('value', token)))\n            .append(Y.Node.create(\n                '<div class=\"col-1 u-vertically-center\">' +\n                '<a class=\"p-tooltip p-tooltip--top-center js-delete-link\">' +\n                '<i class=\"p-icon--delete\"></i>' +\n                '<span class=\"p-tooltip__message\" role=\"tooltip\">' +\n                'Delete API key</span></a></div>'))\n       list.append(row);\n       this.bindDeleteRow(row);\n    },\n\n   /**\n    * Request a new OAuth key set from the API.\n    *\n    * @method requestKeys\n    */\n    requestKeys: function() {\n        var self = this;\n        var cfg = {\n            method: 'POST',\n            data: 'op=create_authorisation_token',\n            sync: false,\n            on: {\n                start: Y.bind(self.showSpinner, self),\n                end: Y.bind(self.hideSpinner, self),\n                success: function(id, out) {\n                    var keys;\n                    try {\n                        keys = JSON.parse(out.response);\n                    }\n                    catch(e) {\n                        // Parsing error.\n                        self.displayError('Unable to create a new token.');\n                    }\n                    // Generate a token from the keys.\n                    var token = self.createTokenFromKeys(\n                        keys.consumer_key, keys.token_key,\n                        keys.token_secret);\n                    // Add the new token to the list of tokens.\n                    self.addToken(token, keys.token_key);\n                 },\n                failure: function(id, out) {\n                    self.displayError('Unable to create a new token.');\n                }\n            }\n        };\n        var request = module._io.send(\n            MAAS_config.uris.account_handler, cfg);\n    }\n});\n\nmodule.TokenWidget = TokenWidget;\n\n}, '0.1', {'requires': ['widget', 'maas.io']}\n);\n","/* Copyright 2012-2014 Canonical Ltd.  This software is licensed under the\n * GNU Affero General Public License version 3 (see the file LICENSE).\n *\n * Widget to expand (make visible) or fold (make invisible) a content div,\n * in response to clicks on a button link.\n *\n * Write your initial HTML for the visible state.  If the client does not\n * execute the script, the content div will be visible.  Upon initialization,\n * the widget immediately goes into its \"hidden\" state.\n *\n * Once the widget is set up, its reveal() method will toggle it between its\n * visible and invisible states.  The transition is animated with a sliding\n * effect.\n *\n * The widget fires a \"hiding\" event before hiding, and \"hidden\" after.\n * Similarly, it fires \"revealing\" before revealing and \"revealed\" after.\n *\n * Synonyms: expander, collapsible, foldable.\n *\n * @module Y.maas.reveal\n */\n\nYUI.add('maas.reveal', function(Y) {\n\nY.log('loading maas.reveal');\n\nvar module = Y.namespace('maas.reveal');\n\nvar Reveal;\n\nReveal = function(config) {\n    Reveal.superclass.constructor.apply(this, arguments);\n};\n\nReveal.NAME = 'reveal';\n\nReveal.ATTRS = {\n    /**\n     * DOM node for the content div.  This is the div that will be hidden\n     * or revealed.  It must contain exactly one tag.\n     *\n     * The widget will add the \"slider\" class to this node, and the \"content\"\n     * class to its child node.\n     *\n     * Hiding the content is done by setting the target node's height to zero;\n     * it's child node keeps its original size but becomes invisible.\n     *\n     * @attribute targetNode\n     * @type node\n     */\n    targetNode: {\n        value: null\n    },\n\n    /**\n     * DOM node for the button link that triggers the reveal.\n     *\n     * @attribute linkNode\n     * @type node\n     */\n    linkNode: {\n        value: null\n    },\n\n    /**\n     * The text the button link should contain when the content div is\n     * visible.\n     *\n     * @attribute hideText\n     * @type string\n     */\n    hideText: {\n        value: null\n    },\n\n    /**\n     * The text the button link should contain when the content div is hidden.\n     *\n     * @attribute showText\n     * @type string\n     */\n    showText: {\n        value: null\n    },\n\n    /**\n     * Skip animations?\n     *\n     * Use this when testing, to avoid wasting time on delays.\n     *\n     * @attribute quick\n     * @type bool\n     */\n    quick: {\n        value: false\n    }\n};\n\n\n// Return a style attribute for a node, as an int.\n// Any suffix to the number, such as the typical \"px,\" is ignored.\nfunction get_style_int(node, attribute) {\n    return parseInt(node.getStyle(attribute), 10);\n}\n\n\nY.extend(Reveal, Y.Widget, {\n    /**\n     * Standard YUI hook: prepare the DOM for the widget.\n     *\n     * @method renderUI\n     */\n    renderUI: function() {\n        var target = this.get('targetNode');\n        target.addClass('slider');\n        target.get('children').addClass('content');\n    },\n\n    /**\n     * Standard YUI hook: install event listeners for the widget.\n     *\n     * @method bindUI\n     */\n    bindUI: function() {\n        var self = this;\n        this.get('linkNode').on('click', function(e) {\n            e.preventDefault();\n            self.reveal();\n        });\n    },\n\n    /**\n     * Standard YUI hook: update UI to match the widget's state at the time\n     * it is rendered.\n     *\n     * The HTML is written in an expanded state, but during rendering, the\n     * widget immediately (and without animation) goes into its hidden state.\n     *\n     * @method syncUI\n     */\n    syncUI: function() {\n        this.fire(\"hiding\");\n        this.get('targetNode').setStyle('height', 0);\n        this.set_hidden_link(this.get('linkNode'));\n        this.fire(\"hidden\");\n    },\n\n    /**\n     * Is this widget currently in its visible state?\n     *\n     * @method is_visible\n     */\n    is_visible: function() {\n        return get_style_int(this.get('targetNode'), 'height') > 0;\n    },\n\n    /**\n     * Set link to its \"hidden\" state.\n     *\n     * @method set_hidden_link\n     */\n    set_hidden_link: function(link) {\n        var new_text = this.get('showText');\n        if (new_text !== null && new_text !== undefined) {\n            link.set('text', new_text);\n        }\n    },\n\n    /**\n     * Set link to its \"visible\" state.\n     *\n     * @method set_visible_link\n     */\n    set_visible_link: function(link) {\n        var new_text = this.get('hideText');\n        if (new_text !== null && new_text !== undefined) {\n            link.set('text', new_text);\n        }\n    },\n\n    /**\n     * Get the desired duration for an animation.\n     *\n     * Returns the suggested duration, unless the \"quick\" attribute is set\n     * in which case it returns a very brief duration.\n     *\n     * @method get_animation_duration\n     */\n    get_animation_duration: function(suggested_duration) {\n        if (this.get('quick')) {\n            return 0.01;\n        }\n        else {\n            return suggested_duration;\n        }\n    },\n\n    /**\n     * Create the animation for sliding in the content div.\n     *\n     * @method create_slide_in\n     */\n    create_slide_in: function(node, publisher) {\n        var anim = new Y.Anim({\n            node: node,\n            duration: this.get_animation_duration(0.3),\n            to: {height: 0}\n        });\n        anim.on('end', function() {\n            publisher.fire('hidden');\n        });\n        return anim;\n    },\n\n    /**\n     * Create the animation for sliding out the content div.\n     *\n     * @method create_slide_out\n     */\n    create_slide_out: function(node, publisher) {\n        // The target node contains exactly one node of content.  Its height\n        // is constant.  We calculate the appropriate expanded height for the\n        // target node from the height of the content node, plus marings and\n        // padding.\n        var content_node = node.one('.content');\n        var new_height = (\n            get_style_int(content_node, 'height') +\n            get_style_int(content_node, 'paddingTop') +\n            get_style_int(content_node, 'paddingBottom') +\n            get_style_int(content_node, 'marginTop') +\n            get_style_int(content_node, 'marginBottom'));\n        var anim = new Y.Anim({\n            node: node,\n            duration: this.get_animation_duration(0.2),\n            to: {height: new_height}\n        });\n        anim.on('end', function() {\n            publisher.fire('revealed');\n        });\n        return anim;\n    },\n\n    /**\n     * Toggle between the hidden and revealed states.\n     *\n     * @method reveal\n     */\n    reveal: function() {\n        var target = this.get('targetNode');\n        var link = this.get('linkNode');\n        if (this.is_visible()) {\n            this.fire('hiding');\n            this.create_slide_in(target, this).run();\n            this.set_hidden_link(link);\n        }\n        else {\n            this.fire('revealing');\n            this.create_slide_out(target, this).run();\n            this.set_visible_link(link);\n        }\n    }\n});\n\nmodule.Reveal = Reveal;\n\n}, '0.1', {'requires': ['widget', 'node', 'event', 'anim']});\n\nYUI().use('maas.reveal', function (Y) {\n  Y.on('domready', function() {\n    Y.all('.p-script-expander').each(function (script_entry) {\n      var script_expander = new Y.maas.reveal.Reveal({\n        targetNode: script_entry.one('.p-script-expander__content'),\n        linkNode: script_entry.one('.p-script-expander__trigger')\n        });\n      script_expander.render();\n    });\n  });\n});\n"],"sourceRoot":""}