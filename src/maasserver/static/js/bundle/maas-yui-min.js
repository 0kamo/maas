!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.r=function(exports){Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1)}({"./src/maasserver/static/js/yui/io.js":function(module,exports){YUI.add("maas.io",function(Y){Y.log("loading maas.io"),Y.namespace("maas.io").getIO=function(){var io=new Y.IO;return Y.io.header("X-CSRFTOKEN",Y.Cookie.get("csrftoken")),io}},"0.1",{requires:["cookie","io-base"]})},"./src/maasserver/static/js/yui/os_distro_select.js":function(module,exports){YUI.add("maas.os_distro_select",function(Y){Y.log("loading maas.os_distro_select");var _OSReleaseWidget,module=Y.namespace("maas.os_distro_select");module._io=new Y.maas.io.getIO,(_OSReleaseWidget=function(){_OSReleaseWidget.superclass.constructor.apply(this,arguments)}).NAME="os-release-widget",Y.extend(_OSReleaseWidget,Y.Widget,{initializer:function(cfg){this.initialSkip=!0},bindTo:function(osNode,event_name){var self=this;if(osNode){Y.one(osNode).on(event_name,function(e){var osValue=e.currentTarget.get("value");self.switchTo(osValue)});var osValue=Y.one(osNode).get("value");self.switchTo(osValue)}},switchTo:function(newOSValue){var options=this.get("srcNode").all("option"),selected=!1;options.each(function(option){var sel=this.modifyOption(option,newOSValue);!1===selected&&(selected=sel)},this),!0!==this.initialSkip?selected||this.selectVisableOption(options):this.initialSkip=!1},modifyOption:function(option,newOSValue){var selected=!1,value=option.get("value"),split_value=value.split("/");return""===newOSValue?""===value?(option.removeClass("hidden"),option.set("selected","selected")):option.addClass("hidden"):split_value[0]===newOSValue?(option.removeClass("hidden"),""!==split_value[1]||this.initialSkip||(selected=!0,option.set("selected","selected"))):option.addClass("hidden"),selected},selectVisableOption:function(options){var first_option=null;Y.Array.each(options,function(option){option.hasClass("hidden")||null===first_option&&(first_option=option)}),null!==first_option&&first_option.set("selected","selected")}}),module.OSReleaseWidget=_OSReleaseWidget},"0.1",{requires:["widget","maas.io"]}),YUI().use("maas.os_distro_select",function(Y){Y.on("load",function(){var releaseWidget=new Y.maas.os_distro_select.OSReleaseWidget({srcNode:"#id_deploy-default_distro_series"});releaseWidget.bindTo(Y.one("#id_deploy-default_osystem"),"change"),releaseWidget.render()})})},"./src/maasserver/static/js/yui/prefs.js":function(module,exports){YUI.add("maas.prefs",function(Y){Y.log("loading maas.prefs");var _TokenWidget,module=Y.namespace("maas.prefs");module._io=new Y.maas.io.getIO,(_TokenWidget=function(){_TokenWidget.superclass.constructor.apply(this,arguments)}).NAME="profile-widget",_TokenWidget.ATTRS={nb_tokens:{readOnly:!0,getter:function(){return this.get("srcNode").all(".js-bundle").size()}}},Y.extend(_TokenWidget,Y.Widget,{displayError:function(message){this.status_node.set("text",message)},initializer:function(cfg){this.create_link=Y.Node.create("<a />").set("href","#").set("id","create_token").addClass("p-button--neutral").addClass("u-float--right").set("text","Generate MAAS key"),this.status_node=Y.Node.create("<div />").set("id","create_error"),this.spinnerNode=Y.Node.create("<img />").addClass("u-animation--spin").addClass("icon").addClass("icon--loading"),this.get("srcNode").one("#token_creation_placeholder").append(this.create_link).append(this.status_node)},confirm:function(_confirm){function confirm(_x){return _confirm.apply(this,arguments)}return confirm.toString=function(){return _confirm.toString()},confirm}(function(message){return confirm(message)}),bindDeleteRow:function(row){var self=this;row.one("a.js-delete-link").on("click",function(e){e.preventDefault(),self.confirm("Are you sure you want to delete this key?")&&self.deleteToken(row)})},bindUI:function(){var self=this;this.create_link.on("click",function(e){e.preventDefault(),self.requestKeys()}),Y.each(this.get("srcNode").all(".js-bundle"),function(row){self.bindDeleteRow(row)})},deleteToken:function(row){var token_key=row.one("input").get("id"),self=this,cfg={method:"POST",data:Y.QueryString.stringify({op:"delete_authorisation_token",token_key:token_key}),sync:!1,on:{start:Y.bind(self.showSpinner,self),end:Y.bind(self.hideSpinner,self),success:function(id,out){row.remove()},failure:function(id,out){Y.log(out),404===out.status?self.displayError("The key has already been deleted."):self.displayError("Unable to delete the key.")}}};module._io.send(MAAS_config.uris.account_handler,cfg)},showSpinner:function(){this.displayError(""),this.status_node.insert(this.spinnerNode,"after")},hideSpinner:function(){this.spinnerNode.remove()},createTokenFromKeys:function(consumer_key,token_key,token_secret){return consumer_key+":"+token_key+":"+token_secret},addToken:function(token,token_key){var list=this.get("srcNode").one("ul"),row=Y.Node.create("<li />").addClass("js-bundle").addClass("u-equal-height").append(Y.Node.create("<div />").addClass("col-8").addClass("p-code-snippet").append(Y.Node.create("<input />").set("type","text").addClass("p-code-snippet__input").set("id",token_key).set("value",token))).append(Y.Node.create('<div class="col-1 u-vertically-center"><a class="p-tooltip p-tooltip--top-center js-delete-link"><i class="p-icon--delete"></i><span class="p-tooltip__message" role="tooltip">Delete API key</span></a></div>'));list.append(row),this.bindDeleteRow(row)},requestKeys:function(){var self=this,cfg={method:"POST",data:"op=create_authorisation_token",sync:!1,on:{start:Y.bind(self.showSpinner,self),end:Y.bind(self.hideSpinner,self),success:function(id,out){var keys;try{keys=JSON.parse(out.response)}catch(e){self.displayError("Unable to create a new token.")}var token=self.createTokenFromKeys(keys.consumer_key,keys.token_key,keys.token_secret);self.addToken(token,keys.token_key)},failure:function(id,out){self.displayError("Unable to create a new token.")}}};module._io.send(MAAS_config.uris.account_handler,cfg)}}),module.TokenWidget=_TokenWidget},"0.1",{requires:["widget","maas.io"]})},1:function(module,exports,__webpack_require__){__webpack_require__("./src/maasserver/static/js/yui/io.js"),__webpack_require__("./src/maasserver/static/js/yui/os_distro_select.js"),module.exports=__webpack_require__("./src/maasserver/static/js/yui/prefs.js")}});
//# sourceMappingURL=maas-yui-min.js.map