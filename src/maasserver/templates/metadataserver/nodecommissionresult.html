{% extends "maasserver/base.html" %}

{% block nav-active-settings %}active{% endblock %}
{% block title %}Commissioning result for node {{ object.node.hostname }}, script {{ object.name }}{% endblock %}
{% block page-title %}Commissioning result for node: {{ object.node.hostname }}{% endblock %}

{% block content %}
  <script type="text/javascript">
    <!--
      YUI().use('tabview', function (Y) {
        var tabview = new Y.TabView({srcNode: '#tags'});
        tabview.render();
      });
    // -->
  </script>
  <ul class="data-list">
    <li class="block size7 first" id="name">
      <h4>Output file</h4>
      <span>{{ object.name }}</span>
    </li>
    <li class="block size8" id="node">
      <h4>Node</h4>
      <span>
        <a href="{% url 'node-view' object.node.system_id %}">
          {{ object.node.hostname }}
        </a>
      </span>
    </li>
    <li class="block size7 first" id="time">
      <h4>Result registered at</h4>
      <span>{{ object.created }}</span>
    </li>
    <li class="block size3" id="script-result">
      <h4>Script return value</h4>
      <span>{{ object.script_result }}</span>
    </li>

    <li class="block first separate" id="output">
      {% if object.data %}
      <h2>Output</h2>
        {% if object.name == "99-maas-02-capture-lldp.out" or object.name == "00-maas-01-lshw.out" %}
        <div class="block first" id="tags">
          <ul class="list size2 no-background normal">
	    <li><a href="#yaml">YAML</a></li>
	    <li><a href="#xml">XML</a></li>
	  </ul>
          <div class="last size12 no-background normal">
	    <div id="yaml">
	      <pre>{{ object.get_data_as_yaml_html }}</pre>
	    </div>
	    <div id="xml">
	      <pre>{{ object.get_data_as_html }}</pre>	
	    </div>
	  </div>
	</div>
        {% else %}
	<pre>
	  {{ object.get_data_as_html }}
	</pre>
        {% endif %}
      {% endif %}
    </li>
  </ul>

{% endblock %}
